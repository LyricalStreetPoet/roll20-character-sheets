<input type="hidden" class="form-font" name="attr_form_font" value="handwriting"/>
<div class="main">
    <input type="hidden" class="active-tab" name="attr_activeTab" value="personal"/>
    <input type="hidden" class="stat-method" name="attr_stat_method" value="roll"/>

    <div class="heading">
        <div class="top-banner">
            <div class="title"><img class="img-merp-logo" alt="Middle Earth Role Playing" src="https://raw.githubusercontent.com/LyricalStreetPoet/roll20-character-sheets/master/MERP/merp-logo.png"></div>
            <div class="grid-global-settings">
                <div class="global-label">Roll Broadcast:</div>
                <select class="select-broadcast" name="attr_wtype">
                    <option value="">Public</option>
                    <option value="?{Broadcast?|Public,|GM Only,/w gm }">Ask Me</option>
                    <option value="/w gm ">GM Only</option>
                </select>
            </div>
            <div class="grid-global-rolls">
                <div class="global-label">d100:</div>
                <button class="roller-button" type="roll" name="attr_1d100_roll" title="1d100" value="@{wtype} &{template:1d100} {{type=1d100}} {{character=@{character_name}}} {{subtags=Generic}} {{roll=[[1d100 + ?{Modifier|0}[Modifier]]]}}">T</button>
                <div class="global-label">Open Ended:</div>
                <button class="roller-button" type="roll" name="attr_openended_roll" title="Roll for 1d100. Keep rolling while the outcome is equal to or greater than 95 and add up the results." value="@{wtype} &{template:openended} {{type=Open-ended 1d100}} {{character=@{character_name}}} {{subtags=Generic}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + ?{Modifier|0}[Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                <div class="global-label">Orientation:</div>
                <button class="roller-button" type="roll" name="attr_orientation2_roll" title="Roll 1d100 for orientation" value="@{wtype} &{template:staticmaneuver} {{type=Orientation}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5}[Orientation] + @{skill_perception_total_bonus}[Perception] + @{helmet_worn} * @{helmet_penalty}[Helm] + @{activity_penalty}[Activity] + ?{Modifier|0}[Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                <div class="global-label">Fumble:</div>
                <button class="roller-button" type="roll" name="attr_fumble_roll" title="Fumble roll" value="@{wtype} &{template:?{Fumble Table|Hand Arms,handarmsfumble|Missile Weapons,missilefumble|Moving Maneuver,movingmaneuverfumble|Spells,spellfumble}} {{type=Fumble}} {{character=@{character_name}}} {{subtags=Generic}} {{roll=[[1d100[Fumble Roll] + ?{Modifier|Weapon-Concussion,-20|Weapon-Slashing,-10|Weapon-2 Handed,0|Weapon-Pole Arm,+10|Weapon-Mounted,+20|Missile-Sling,-20|Missile-Short Bow,-10|Missile-Composite Bow,0|Missile-Long Bow,+10|Missile-Crossbow,+20|Spells-Class I,-20|Spells-Class U,-10|Spells-Class P,0|Spells-Class F,+10|Spells-Class E,+20|MM-Routine,-50|MM-Easy,-35|MM-Light,-20|MM-Medium,-10|MM-Hard,0|MM-Very Hard,+5|MM-Extra Hard,+10|MM-Sheer Folly,+15|MM-Absurd,+20}[Modifier]]]}} ">T</button>
            </div>
        </div>
        <div class="tabs">
            <button class="tab-buttons tab-personal" type="action" name="act_personal">Personal</button>
            <button class="tab-buttons tab-skills" type="action" name="act_skills">Skills</button>
            <button class="tab-buttons tab-spells" type="action" name="act_spells">Spells</button>
            <button class="tab-buttons tab-equipment" type="action" name="act_equipment">Equipment</button>
            <button class="tab-buttons tab-journal" type="action" name="act_journal">Journal</button>
            <button class="tab-buttons tab-settings" type="action" name="act_settings">Settings</button>
        </div>
    </div>

    <div class="content-area">
        <div class="tab-content tab-content-personal">
            <input type="hidden" class="active-personal-section" name="attr_activePersonalSection" value="player" />
            <div class="grid-personal-buttons">
                <button class="button-personal button-personal-player" type="action" name="act_player">Player</button>
                <button class="button-personal button-personal-npc" type="action" name="act_npc">NPC</button>
            </div>

            <div class="personal-section personal-player">
                <div class="grid-personal-top">
                    <div class="box-border box-border-personal-info">
                        <div class="text-section-heading personal-heading">Personal</div>
                        <div class="grid-personal-info">
                            <div class="text-label">Name:</div>
                            <input class="texbox" size="30" type="text" name="attr_character_name" spellcheck="false"/>
                            <div class="text-label">Culture/Race:</div>
                            <select class="select-race" name="attr_race">
                                <option value=""></option>
                                <optgroup label="Dwarvish Races">
                                    <option value="Dwarf">Dwarf</option>
                                    <option value="Umli">Umli</option>
                                </optgroup>
                                <optgroup label="Elvish Races">
                                    <option value="Half-Elf">Half-Elf</option>
                                    <option value="Noldo Elf">Noldo Elf</option>
                                    <option value="Sindar Elf">Sindar Elf</option>
                                    <option value="Silvan Elf">Silvan Elf</option>
                                </optgroup>
                                <optgroup label="Hobbits">
                                    <option value="Hobbit">Hobbit</option>
                                </optgroup>
                                <optgroup label="Men">
                                    <option value="Beorning">Beorning</option>
                                    <option value="Black Numenorean">Black Numenorean</option>
                                    <option value="Corsair">Corsair</option>
                                    <option value="Dorwinrim">Dorwinrim</option>
                                    <option value="Dunedain">Dunedain</option>
                                    <option value="Dunlending">Dunlending</option>
                                    <option value="Easterling">Easterling</option>
                                    <option value="Eriadoran">Eriadoran</option>
                                    <option value="Gondorian">Gondorian</option>
                                    <option value="Haradrim">Haradrim</option>
                                    <option value="Lossoth">Lossoth</option>
                                    <option value="Rohirrim">Rohirrim</option>
                                    <option value="Variag">Variag</option>
                                    <option value="Woodman">Woodman</option>
                                    <option value="Wose">Wose</option>
                                </optgroup>
                                <optgroup label="Orcish Races">
                                    <option value="Orc">Orc</option>
                                    <option value="Uruk-Hai">Uruk-Hai</option>
                                    <option value="Half-Orc">Half-Orc</option>
                                </optgroup>
                                <optgroup label="Trollish Races">
                                    <option value="Troll">Troll</option>
                                    <option value="Olog-Hai">Olog-Hai</option>
                                    <option value="Half-Troll">Half-Troll</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="custom">Custom / Home Brew</option>
                                </optgroup>
                            </select>
                            <div class="text-label">Profession:</div>
                            <select class="select-race" name="attr_profession">
                                <option value=""></option>
                                <optgroup label="Standard Classes">
                                    <option value="animist">Animist (IT)</option>
                                    <option value="bard">Bard (PR)</option>
                                    <option value="mage">Mage (IG)</option>
                                    <option value="ranger">Ranger (CO)</option>
                                    <option value="scout">Scout (AG)</option>
                                    <option value="warrior">Warrior (ST)</option>
                                </optgroup>
                                <optgroup label="Advanced Classes">
                                    <option value="barbarian">Barbarian (ST)</option>
                                    <option value="burglar">Burglar (AG)</option>
                                    <option value="conjurer">Conjurer (IG/IT)</option>
                                    <option value="explorer">Explorer (CO)</option>
                                    <option value="rogue">Rogue (ST)</option>
                                    <option value="wizard">Wizard (IG/IT)</option>
                                </optgroup>
                                <optgroup label="Special Classes">
                                    <option value="monk">Monk (AG)</option>
                                    <option value="shapechanger">Shape Changer (PR)</option>
                                    <option value="warriormonk">Warrior Monk (ST)</option>
                                </optgroup>
                                <optgroup label="Civilian Classes">
                                    <option value="acrobat">Acrobat (AG)</option>
                                    <option value="actor">Actor (PR)</option>
                                    <option value="artist">Artist (IT)</option>
                                    <option value="blacksmith">Blacksmith (AG)</option>
                                    <option value="bureaucrat">Bureaucrat (PR)</option>
                                    <option value="carpenter">Carpenter (AG)</option>
                                    <option value="farmer">Farmer (IT)</option>
                                    <option value="fisherman">Fisherman (IT)</option>
                                    <option value="herder">Herder (IT)</option>
                                    <option value="merchant">Merchant (IG)</option>
                                    <option value="scholar">Scholar/Sage (IG)</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="custom">Custom / Home Brew</option>
                                </optgroup>
                            </select>
                            <div class="text-label">Level:</div>
                            <input class="number-bonus" type="number" name="attr_level" value="1" min="0" />
                            <div class="text-label">Realm:</div>
                            <select class="select-realm" name="attr_realm">
                                <option value=""></option>
                                <option value="Channeling">Channeling</option>
                                <option value="Essence">Essence</option>
                            </select>
                            <div class="text-label">Exp. Points:</div>
                            <input class="number-field number-experience" type="number" name="attr_experience_points" spellcheck="false"/>
                            <div class="text-label">Demeanor:</div>
                            <input type="text" name="attr_demeanor" title="Character's outward behavior" spellcheck="false"/>
                            <div class="text-label">Personality:</div>
                            <input type="text" name="attr_personality" title="Character's underlying set of behaviors, cognitions, and emotional patterns." spellcheck="false"/>
                            <div class="text-label">Motivation:</div>
                            <input type="text" name="attr_motivation" title="Character's objective(s) in life." spellcheck="false"/>
                            <div class="text-label">Alignment:</div>
                            <input type="text" name="attr_alignment" title="Character's morals, philosophy, and social tendencies." spellcheck="false"/>
                        </div>
                    </div>

                    <div class="box-border box-border-resistances">
                        <div class="text-section-heading resistances-heading">Resistances and Defenses</div>
                        <div class="grid-armor">
                            <div class="grid-armor-shield">
                                <div class="grid-auto-columns">
                                    <div class="text-label text-label-armor">Armor:</div>
                                    <select class="select-armor" name="attr_armorworn">
                                        <option value="no_armor" selected="selected">No armor</option>
                                        <option value="soft_leather">Soft leather</option>
                                        <option value="rigid_leather">Rigid leather</option>
                                        <option value="chain_armor">Chain</option>
                                        <option value="plate_armor">Plate</option>
                                    </select>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label text-label-shield">Shield:</div>
                                    <input class="check-armor" type="checkbox" name="attr_shield_bonus" value="25"/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label">Melee DB:</div>
                                    <input type="number" class="number-bonus" name="attr_shield_melee_bonus" value="25"/>
                                    <div class="text-label">Ranged DB:</div>
                                    <input type="number" class="number-bonus" name="attr_shield_ranged_bonus" value="25"/>
                                </div>
                            </div>
                            <div class="grid-helm-greaves">
                                <div class="grid-auto-columns">
                                    <div class="text-label text-label-helm">Helm (</div>
                                    <input type="number" class="number-bonus" name="attr_helmet_penalty" value="-5"/>
                                    <div class="text-label text-label-helm">Perception):</div>
                                    <input class="check-armor" type="checkbox" name="attr_helmet_worn" value="1"/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label text-label-armgreaves">Arm Greaves (</div>
                                    <input type="number" class="number-bonus" name="attr_armgreaves_penalty" value="-5"/>
                                    <div class="text-label text-label-helm">OB):</div>
                                    <input class="check-armor" type="checkbox" name="attr_armgreaves_worn" value="1"/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label text-label-legreaves">Leg Greaves (</div>
                                    <input type="number" class="number-bonus" name="attr_leggreaves_penalty" value="-5"/>
                                    <div class="text-label text-label-helm">MM):</div>
                                    <input class="check-armor" type="checkbox" name="attr_leggreaves_worn" value="1"/>
                                </div>
                            </div>
                        </div>
                        <div class="grid-resistances">
                            <div class="text-column-header"></div>
                            <div class="text-column-header">Stat</div>
                            <div class="text-column-header">Bonus</div>
                            <div class="text-column-header">Race</div>
                            <div class="text-column-header">Item</div>
                            <div class="text-column-header">Spec</div>
                            <div class="text-column-header">Spec</div>
                            <div class="text-column-header">Total</div>
                            <div class="text-column-header"></div>
                            <div class="text-column-header"></div>

                            <div class="text-row-header">Melee DB</div>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_defensive_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_defensive_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_defensive_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_defensive_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_defensive_spec2_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_defensive_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Defensive Bonus">DB</div>
                            <button type="roll" class="roller-button" name="attr_defensive_rr" title="Defensive Resistance Roll" value="@{wtype} &{template:openended} {{type=Melee Defense}} {{character=@{character_name}}} {{subtags=Defensive Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{defensive_total_bonus}[Defensive Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{defensive_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Ranged DB</div>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_defensive_ranged_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_defensive_ranged_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_defensive_ranged_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_defensive_ranged_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_defensive_ranged_spec2_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_defensive_ranged_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Defensive Bonus">DB</div>
                            <button type="roll" class="roller-button" name="attr_defensive_ranged_rr" title="Defensive Resistance Roll" value="@{wtype} &{template:openended} {{type=Ranged Defense}} {{character=@{character_name}}} {{subtags=Defensive Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{defensive_ranged_total_bonus}[Defensive Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{defensive_ranged_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Essence Resist</div>
                            <div class="text-center" title="Intelligence">IG</div>
                            <input type="number" class="number-autocalc" name="attr_essence_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_essence_race_bonus" value="0" />
                            <input type="number" class="number-field number-stat" name="attr_essence_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_essence_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_essence_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_essence_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_essence_rr" title="Essence Resistance Roll" value="@{wtype} &{template:openended} {{type=Essence}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{essence_total_bonus}[Essence Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{essence_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Channeling Resist</div>
                            <div class="text-center" title="Intuition">IT</div>
                            <input type="number" class="number-autocalc" name="attr_channeling_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_channeling_race_bonus" value="0" />
                            <input type="number" class="number-field number-stat" name="attr_channeling_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_channeling_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_channeling_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_channeling_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_channeling_rr" title="Channeling Resistance Roll" value="@{wtype} &{template:openended} {{type=Channeling}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{channeling_total_bonus}[Channeling Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{channeling_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Poison Resist</div>
                            <div class="text-center">CO</div>
                            <input type="number" class="number-autocalc" name="attr_poison_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_poison_race_bonus" value="0" />
                            <input type="number" class="number-field number-stat" name="attr_poison_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_poison_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_poison_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_poison_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_poison_rr" title="Poison Resistance Roll" value="@{wtype} &{template:openended} {{type=Poison}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{poison_total_bonus}[Poison Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{poison_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Disease Resist</div>
                            <div class="text-center">CO</div>
                            <input type="number" class="number-autocalc" name="attr_disease_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_disease_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_disease_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_disease_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_disease_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_disease_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_disease_rr" title="Disease Resistance Roll" value="@{wtype} &{template:openended} {{type=Disease}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{disease_total_bonus}[Disease Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{disease_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Cold Resist</div>
                            <div class="text-center"></div>
                            <div class="text-center">xx</div>
                            <input type="number" class="number-stat" name="attr_cold_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_cold_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_cold_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_cold_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_cold_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_cold_rr" title="Cold Resistance Roll" value="@{wtype} &{template:openended} {{type=Cold}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{cold_total_bonus}[Cold Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{cold_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Heat Resist</div>
                            <div class="text-center"></div>
                            <div class="text-center">xx</div>
                            <input type="number" class="number-stat" name="attr_heat_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_heat_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_heat_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_heat_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_heat_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_heat_rr" title="Heat Resistance Roll" value="@{wtype} &{template:openended} {{type=Heat}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{heat_total_bonus}[Heat Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{heat_total_bonus}]]}}">T</button>
                        </div>
                    </div>
                </div>
                <div class="grid-personal-middle">
                    <div class="box-border box-border-stats">
                        <div class="grid-stats-heading">
                            <div class="text-section-heading">Stats</div>
                            <div class="stat-method-content stat-method-player-pointbuy">
                                <div class="grid-auto-columns">
                                    <div class="text-label">Point Pool:</div>
                                    <input type="number" class="number-autocalc-pool" readonly name="attr_stat_point_pool" value="0">
                                    <div class="text-label">Remaining:</div>
                                    <input type="number" class="number-autocalc-pool" readonly name="attr_stat_point_pool_remaining" value="0">
                                </div>
                            </div>
                            <div class="stat-method-content stat-method-player-roll">
                                <div class="grid-auto-columns">
                                    <div class="text-label">Generate:</div>
                                    <button type="roll" class="roller-button" name="attr_roll_stats" title="Generate Stats" value="@{wtype} &{template:1d100} {{type=Creation}} {{character=@{character_name}}} {{subtags=Character Stats}} {{roll=[[@{stat_roll_max_rolls}d100r<@{stat_roll_min_value}k6]]}}">T</button>
                                </div>
                            </div>

                        </div>

                        <div class="grid-stats">
                            <div class="text-column-header">Stats</div>
                            <div class="text-column-header">Roll</div>
                            <div class="text-column-header">BG</div>
                            <div class="text-column-header">Stat</div>
                            <div class="text-column-header">Norm</div>
                            <div class="text-column-header">Race</div>
                            <div class="text-column-header">Misc</div>
                            <div class="text-column-header">Total</div>
                            <div class="text-column-header"></div>

                            <div class="text-row-header" title="A character's capabilities in melee, carrying loads, and other activities requiring strength.">Strength (ST)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_st_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_st_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_st_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_st_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_st_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_st_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_st_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_st_roll" title="Strength Check" value="@{wtype} &{template:openended} {{type=Strength}} {{character=@{character_name}}} {{subtags=Strength Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_st_total_bonus}[Strength Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's manual dexterity, litheness, quickness, reaction time, and speed.">Agility (AG)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_ag_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_ag_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_ag_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_ag_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_ag_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_ag_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_ag_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_ag_roll" title="Agility Check" value="@{wtype} &{template:openended} {{type=Agility}} {{character=@{character_name}}} {{subtags=Agility Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_ag_total_bonus}[Agility Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's general health and well-being.">Constitution (CO)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_co_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_co_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_co_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_co_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_co_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_co_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_co_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_co_roll" title="Constitution Check" value="@{wtype} &{template:openended} {{type=Constitution}} {{character=@{character_name}}} {{subtags=Constitution Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_co_total_bonus}[Constitution Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's reasoning, memory, and common sense.">Intelligence (IG)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_ig_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_ig_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_ig_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_ig_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_ig_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_ig_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_ig_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_ig_roll" title="Intelligence Check" value="@{wtype} &{template:openended} {{type=Intelligence}} {{character=@{character_name}}} {{subtags=Intelligence Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_ig_total_bonus}[Intelligence Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's wisdom, luck, and genius.">Intuition (IT)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_it_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_it_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_it_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_it_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_it_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_it_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_it_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_it_roll" title="Intuition Check" value="@{wtype} &{template:openended} {{type=Intuition}} {{character=@{character_name}}} {{subtags=Intuition Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_it_total_bonus}[Intuition Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's self-discipline, courage, bearing, self esteem, and charisma.">Presence (PR)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_pr_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_pr_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_pr_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_pr_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_pr_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_pr_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_pr_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_pr_roll" title="Presence Check" value="@{wtype} &{template:openended} {{type=Presence}} {{character=@{character_name}}} {{subtags=Presence Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_pr_total_bonus}[Presence Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="How well your character is perceived by others.">Appearance (AP)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_ap_value" min="0" value="50"/>
                            <div></div>
                            <div></div>
                            <div class="text-center">+</div>
                            <div class="text-center">PR</div>
                            <div class="text-center">=</div>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_ap_total_bonus" value="0" readonly/>
                            <div></div>
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label">Ambidextrous?</div>
                            <input type="checkbox" value="1" name="attr_ambidextrous">
                            <div class="text-label">&nbsp;</div>
                            <button type="roll" class="roller-button" name="attr_ambidextrous" title="Check Ambidextrous (Character Creation)" value="@{wtype} &{template:successcheck} {{type=Ambidextrous}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{chance=[[2]]}}">T</button>
                        </div>
                    </div>
                    <div class="box-border box-border-status">
                        <div class="text-section-heading status-heading">Status</div>
                        <div class="status-options">
                            <div class="grid-status">
                                <div class="grid-status-hp box-border">
                                    <div class="grid-auto-columns">
                                        <div class="text-label">Hit Points: [</div>
                                        <input type="number" class="number-autocalc-left number-autocalc-total" name="attr_hit_points_max" value="0" readonly>
                                        <div class="text">]</div>
                                    </div>
                                    <input type="number" class="number-hp" name="attr_hit_points" min="0" value="0"/>
                                </div>
                                <div>
                                    <div class="grid-auto-columns">
                                        <div class="text-label" title="Blood loss in hits per round">Blood loss:</div>
                                        <input type="number" class="number-bonus" name="attr_status_bleeding" value="0"/>
                                        <div class="text">hits/rnd</div>
                                    </div>
                                    <div class="grid-status-effects">
                                        <div class="grid-auto-columns">
                                            <div class="text-label" title="Unable to attack. May only parry at 50% OB. Any other action requires a maneuver roll at -50.">Stunned:</div>
                                            <input type="checkbox" class="checkbox-center" name="attr_status_stunned" value="-50"/>
                                        </div>
                                        <div class="grid-auto-columns">
                                            <div class="text-label" title="Unable to attack or parry. Any other action requires a maneuver roll at -50.">Down:</div>
                                            <input type="checkbox" class="checkbox-center" name="attr_status_down" value="-70"/>
                                        </div>
                                        <div class="grid-auto-columns">
                                            <div class="text-label" title="Unable to use an arm or a leg.">One limb out:</div>
                                            <input type="checkbox" class="checkbox-center" name="attr_status_onelimbout" value="-30"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="grid-movement">
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Height-based modifier to movement rate">Stride Modifier:</div>
                                    <input class="number-bonus" type="number" name="attr_stride_modifier" value="0" />
                                    <div class="text">feet/rnd</div>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Movement rate (feet/round)">Movement Rate:</div>
                                    <input type="number" class="number-bonus" name="attr_movement_rate" value="0" readonly/>
                                    <div class="text">feet/rnd</div>
                                </div>
                            </div>
                            <div class="grid-vision">
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Distance they can see in complete darkness.">Dark Vision:</div>
                                    <input type="number" class="number-vision" name="attr_vision_dark" value="0"/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Distance they can see in complete darkness.">Dim Vision:</div>
                                    <input type="number" class="number-vision" name="attr_vision_dim" value="0"/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Distance they can see in complete darkness.">Star-Moon Vision:</div>
                                    <input type="number" class="number-vision" name="attr_vision_starmoon" value="0"/>
                                </div>
                            </div>
                            <div class="text-section-heading status-heading">Penalties</div>
                            <div class="grid-penalties">
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Total penalty for moving maneuvers. (Stunned + Down + One Limb Out + Activity Penalty + Encumbrance Penalty + Leg Greaves)">Total MM:</div>
                                    <input type="number" class="number-autocalc-total number-autocalc-penalty number-autocalc-left" name="attr_total_mm_penalty" value="0" readonly/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Total penalty for offensive actions. (Activity Penalty + Arm Greaves + Hit Loss)">Total OB:</div>
                                    <input type="number" class="number-autocalc-total number-autocalc-penalty number-autocalc" name="attr_total_ob_penalty" value="0" readonly/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Total penalty for static maneuvers. (Activity Penalty)">Total SM:</div>
                                    <input type="number" class="number-autocalc-total number-autocalc-penalty number-autocalc" name="attr_total_sm_penalty" value="0" readonly/>
                                </div>
                            </div>
                            <div class="grid-penalties">
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Applies to all activity except DB and RR.">Activity:</div>
                                    <input type="number"  class="number-bonus" name="attr_activity_penalty" value="0" max="0"/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Hit loss penalty applies to OB, when more than half of total hit points are lost.">Hit Loss:</div>
                                    <input type="number" class="number-autocalc-total number-autocalc-penalty number-autocalc" name="attr_total_hit_loss_penalty" value="0" readonly/>
                                </div>
                                <div class="grid-auto-columns">
                                    <div class="text-label" title="Encumbrance penalty applies to all movement and moving maneuvers. Negated by ST bonus.">Encumbrance:</div>
                                    <input type="number" class="number-autocalc-total number-autocalc-penalty" name="attr_encumbrance_penalty" value="0" readonly/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid-personal-bottom">
                    <div class="box-border box-border-appearance">
                        <div class="text-section-heading appearance-heading">Appearance</div>
                        <div class="grid-appearance">
                            <div class="text-label">Age:</div>
                            <input class="text-field-short" type="text" name="attr_age"/>
                            <div class="text-label">Gender:</div>
                            <input class="text-field-short" type="text" name="attr_gender"/>
                            <div class="text-label" title="Height in feet and inches">Height:</div>
                            <input class="text-field-short" type="text" name="attr_height"/>
                            <div class="text-label" title="Weight in pounds">Weight:</div>
                            <input class="text-field-short" type="text" name="attr_weight"/>
                            <div class="text-label">Hair:</div>
                            <input class="text-field-short" type="text" name="attr_hair"/>
                            <div class="text-label">Eyes:</div>
                            <input class="text-field-short" type="text" name="attr_eyes"/>
                        </div>
                    </div>

                    <div class="box-border box-border-backgrounds">
                        <div class="text-section-heading background-options-heading">Background Options</div>
                        <div class="grid-background-options-helper">
                            <div class="text-label">AD Ranks:</div>
                            <input class="number-bonus" type="number" name="attr_race_bg_options" value="0" title="Number of background options available for your race.">
                        </div>
                        <fieldset class="repeating_backgroundoptions">
                            <select class="select-background-options" name="attr_background_options">
                                <optgroup label="Special Abilities">
                                    <option value="Adept at Moving">Adept at Moving</option>
                                    <option value="Animal Empathy">Animal Empathy</option>
                                    <option value="Charismatic">Charismatic</option>
                                    <option value="Infravision">Infravision</option>
                                    <option value="Lightning Reactions">Lightning Reactions</option>
                                    <option value="Resistant to Pain">Resistant to Pain</option>
                                    <option value="Very Observant">Very Observant</option>
                                </optgroup>
                                <optgroup label="Special Items">
                                    <option value="+10 Magic Item">+10 Magic Item</option>
                                    <option value="+15 Magic Item">+15 Magic Item</option>
                                    <option value="+1 Spell Adder">+1 Spell Adder</option>
                                    <option value="+2 Spell Adder">+2 Spell Adder</option>
                                    <option value="Daily Spell Item">Daily Spell Item</option>
                                </optgroup>
                                <optgroup label="Money">
                                    <option value="Extra Gold">Extra Gold</option>
                                </optgroup>
                                <optgroup label="Resistances (+10)">
                                    <option value="Resist Essence">Essence Resistance</option>
                                    <option value="Resist Channeling">Channeling Resistance</option>
                                    <option value="Resist Poison">Poison Resistance</option>
                                    <option value="Resist Disease">Disease Resistance</option>
                                    <option value="Resist Cold">Cold Resistance</option>
                                    <option value="Resist Heat">Heat Resistance</option>
                                </optgroup>
                                <optgroup label="Proficient with Essence Spells">
                                    <option value="Essence Hand">Essence Hand</option>
                                    <option value="Essence Perception">Essence Perception</option>
                                    <option value="Essence Ways">Essence Ways</option>
                                    <option value="Illusions">Illusions</option>
                                    <option value="Physical Enhancement">Physical Enhancement</option>
                                    <option value="Spell Ways">Spell Ways</option>
                                    <option value="Spirit Mastery">Spirit Mastery</option>
                                    <option value="Unbarring Ways">Unbarring Ways</option>
                                </optgroup>
                                <optgroup label="Proficient with Mage Spells">
                                    <option value="Fire Law">Fire Law</option>
                                    <option value="Ice Law">Ice Law</option>
                                    <option value="Earth Law">Earth Law</option>
                                    <option value="Light Law">Light Law</option>
                                    <option value="Wind Law">Wind Law</option>
                                    <option value="Water Law">Water Law</option>
                                    <option value="Lofty Bridge">Lofty Bridge</option>
                                    <option value="Living Change">Living Change</option>
                                </optgroup>
                                <optgroup label="Proficient with Bard Spells">
                                    <option value="Lore">Lore</option>
                                    <option value="Controlling Songs">Controlling Songs</option>
                                    <option value="Sound Control">Sound Control</option>
                                    <option value="Item Lore">Item Lore</option>
                                </optgroup>
                                <optgroup label="Proficient with Channeling Spells">
                                    <option value="Natures Lore">Natures Lore</option>
                                    <option value="Natures Movement">Natures Movement</option>
                                    <option value="Spell Defense">Spell Defense</option>
                                    <option value="Suface Ways">Suface Ways</option>
                                    <option value="Protections">Protections</option>
                                    <option value="Detection Mastery">Detection Mastery</option>
                                    <option value="Sound Light Ways">Sound-Light Ways</option>
                                    <option value="Calm Spirits">Calm Spirits</option>
                                </optgroup>
                                <optgroup label="Proficient with Animist Spells">
                                    <option value="Direct Channeling">Direct Channeling</option>
                                    <option value="Blood Ways">Blood Ways</option>
                                    <option value="Bone Muscle Ways">Bone-Muscle Ways</option>
                                    <option value="Organ Ways">Organ Ways</option>
                                    <option value="Animal Mastery">Animal Mastery</option>
                                    <option value="Plant Mastery">Plant Mastery</option>
                                    <option value="Purifications">Purifications</option>
                                    <option value="Creations">Creations</option>
                                </optgroup>
                                <optgroup label="Proficient with Ranger Spells">
                                    <option value="Path Mastery">Path Mastery</option>
                                    <option value="Moving Ways">Moving Ways</option>
                                    <option value="Natures Guises">Natures Guises</option>
                                    <option value="Natures Ways">Natures Ways</option>
                                </optgroup>
                                <optgroup label="Primary Skill Hobbies (2 Ranks)">
                                    <option value="Hobby No Armor">No Armor Hobby</option>
                                    <option value="Hobby Soft Leather">Soft Leather Hobby</option>
                                    <option value="Hobby Rigid Leather">Rigid Leather Hobby</option>
                                    <option value="Hobby Chain Mail">Chain Mail Hobby</option>
                                    <option value="Hobby Plate Mail">Plate Mail Hobby</option>
                                    <option value="Hobby 1H Edged">1H Edged Hobby</option>
                                    <option value="Hobby 1H Concussion">1H Concussion Hobby</option>
                                    <option value="Hobby 2 Handed">2 Handed Hobby</option>
                                    <option value="Hobby Pole Arms">Pole Arms Hobby</option>
                                    <option value="Hobby Missile">Missile Hobby</option>
                                    <option value="Hobby Thrown">Thrown Hobby</option>
                                    <option value="Hobby Climb">Climb Hobby</option>
                                    <option value="Hobby Ride">Ride Hobby</option>
                                    <option value="Hobby Swim">Swim Hobby</option>
                                    <option value="Hobby Track">Track Hobby</option>
                                    <option value="Hobby Stalk Hide">Stalk/Hide Hobby</option>
                                    <option value="Hobby Pick Lock">Pick Lock Hobby</option>
                                    <option value="Hobby Disarm Trap">Disarm Trap Hobby</option>
                                    <option value="Hobby Read Runes">Read Rune Hobby</option>
                                    <option value="Hobby Use Items">Use Item Hobby</option>
                                    <option value="Hobby Directed Spells">Directed Spells Hobby</option>
                                    <option value="Hobby Perception">Perception Hobby</option>
                                </optgroup>
                                <optgroup label="Secondary Skill Hobbies (5 Ranks)">
                                    <option value="Hobby Acrobatics">Acrobatics Hobby</option>
                                    <option value="Hobby Acting">Acting Hobby</option>
                                    <option value="Hobby Animal Handling">Animal Handling Hobby</option>
                                    <option value="Hobby Appraisal">Appraisal Hobby</option>
                                    <option value="Hobby Boat Handling">Boat Handling Hobby</option>
                                    <option value="Hobby Caving">Caving Hobby</option>
                                    <option value="Hobby Contortions">Contortions Hobby</option>
                                    <option value="Hobby Cookery">Cookery Hobby</option>
                                    <option value="Hobby First Aid">First Aid Hobby</option>
                                    <option value="Hobby Foraging">Foraging Hobby</option>
                                    <option value="Hobby Gambling">Gambling Hobby</option>
                                    <option value="Hobby Meditation">Meditation Hobby</option>
                                    <option value="Hobby Rope-Mastery">Rope-Mastery Hobby</option>
                                    <option value="Hobby Signaling">Signaling Hobby</option>
                                    <option value="Hobby Sky-Watching">Sky-Watching Hobby</option>
                                    <option value="Hobby Trickery">Trickery Hobby</option>
                                    <option value="Hobby Dance">Dance Hobby</option>
                                    <option value="Hobby Music">Music Hobby</option>
                                    <option value="Hobby Painting">Painting Hobby</option>
                                    <option value="Hobby Poetry">Poetry Hobby</option>
                                    <option value="Hobby Sculpting">Sculpting Hobby</option>
                                    <option value="Hobby Singing">Singing Hobby</option>
                                    <option value="Hobby Tale Telling">Tale Telling Hobby</option>
                                    <option value="Hobby Juggling">Juggling Hobby</option>
                                    <option value="Hobby Jumping">Jumping Hobby</option>
                                    <option value="Hobby Pole Vaulting">Pole Vaulting Hobby</option>
                                    <option value="Hobby Rappelling">Rappelling Hobby</option>
                                    <option value="Hobby Skiing">Skiing Hobby</option>
                                    <option value="Hobby Skating">Skating Hobby</option>
                                    <option value="Hobby Sprinting">Sprinting Hobby</option>
                                    <option value="Hobby Stilt Walking">Stilt Walking Hobby</option>
                                    <option value="Hobby Surfing">Surfing Hobby</option>
                                    <option value="Hobby Tight Rope Walking">Tight Rope Walking Hobby</option>
                                    <option value="Hobby Fletching">Fletching Hobby</option>
                                    <option value="Hobby Leather Crafting">Leather Crafting Hobby</option>
                                    <option value="Hobby Metal Crafting">Metal Crafting Hobby</option>
                                    <option value="Hobby Stone Crafting">Stone Crafting Hobby</option>
                                    <option value="Hobby Trap Making">Trap Making Hobby</option>
                                    <option value="Hobby Wood Crafting">Wood Crafting Hobby</option>
                                    <option value="Hobby Bribery">Bribery Hobby</option>
                                    <option value="Hobby Bureacracy">Bureacracy Hobby</option>
                                    <option value="Hobby Diplomacy">Diplomacy Hobby</option>
                                    <option value="Hobby Interrogation">Interrogation Hobby</option>
                                    <option value="Hobby Leadership">Leadership Hobby</option>
                                    <option value="Hobby Public Speaking">Public Speaking Hobby</option>
                                    <option value="Hobby Seduction">Seduction Hobby</option>
                                    <option value="Hobby Trading">Trading Hobby</option>
                                    <option value="Hobby Animal Lore">Animal Lore Hobby</option>
                                    <option value="Hobby Culture">Culture Hobby</option>
                                    <option value="Hobby Geography">Geography Hobby</option>
                                    <option value="Hobby History">History Hobby</option>
                                    <option value="Hobby Mathematics">Mathematics Hobby</option>
                                    <option value="Hobby Physics">Physics Hobby</option>
                                    <option value="Hobby Plant Lore">Plant Lore Hobby</option>
                                    <option value="Hobby Religion">Religion Hobby</option>
                                    <option value="Hobby Special Creature Lore">Special Creature Lore Hobby</option>
                                    <option value="Hobby Tactics">Tactics Hobby</option>
                                    <option value="Hobby 2 Weapon Fighting">2 Weapon Fighting Hobby</option>
                                    <option value="Hobby Shield Bash">Shield Bash Hobby</option>
                                </optgroup>
                                <optgroup label="Stat Increases">
                                    <option value="ST 2">Strength by 2</option>
                                    <option value="AG 2">Agility by 2</option>
                                    <option value="CO 2">Constitution by 2</option>
                                    <option value="IG 2">Intelligence by 2</option>
                                    <option value="IT 2">Intuition by 2</option>
                                    <option value="PR 2">Presence by 2</option>
                                    <option value="ST AG CO">Strengh/Agility/Constitution by 1</option>
                                    <option value="ST AG IG">Strengh/Agility/Intelligence by 1</option>
                                    <option value="ST AG IT">Strengh/Agility/Intuition by 1</option>
                                    <option value="ST AG PR">Strengh/Agility/Presence by 1</option>
                                    <option value="ST CO IG">Strengh/Constitution/Intelligence by 1</option>
                                    <option value="ST CO IT">Strengh/Constitution/Intuition by 1</option>
                                    <option value="ST CO PR">Strengh/Constitution/Presence by 1</option>
                                    <option value="ST IG IT">Strengh/Intelligence/Intuition by 1</option>
                                    <option value="ST IG PR">Strengh/Intelligence/Presence by 1</option>
                                    <option value="ST IT PR">Strengh/Intuition/Presence by 1</option>
                                    <option value="AG CO IG">Agility/Constitution/Intelligence by 1</option>
                                    <option value="AG CO IT">Agility/Constitution/Intuition by 1</option>
                                    <option value="AG CO PR">Agility/Constitution/Presence by 1</option>
                                    <option value="AG IG IT">Agility/Intelligence/Intuition by 1</option>
                                    <option value="AG IG PR">Agility/Intelligence/Presence by 1</option>
                                    <option value="AG IT PR">Agility/Intuition/Presence by 1</option>
                                    <option value="CO IG IT">Constitution/Intelligence/Intuition by 1</option>
                                    <option value="CO IG PR">Constitution/Intelligence/Presence by 1</option>
                                    <option value="CO IT PR">Constitution/Intuition/Presence by 1</option>
                                    <option value="IG IT PR">Intelligence/Intuition/Presence by 1</option>
                                </optgroup>
                                <optgroup label="Extra Languages (5 Ranks)">
                                    <option value="Adunaic">Adunaic</option>
                                    <option value="Apysaic">Apysaic</option>
                                    <option value="Atliduk">Atliduk</option>
                                    <option value="Bethteur">Bethteur</option>
                                    <option value="Black Speech">Black Speech</option>
                                    <option value="Dunael">Dunael</option>
                                    <option value="Haradaic">Haradaic</option>
                                    <option value="Khuzdul">Khuzdul</option>
                                    <option value="Kuduk">Kuduk</option>
                                    <option value="Labba">Labba</option>
                                    <option value="Logathig">Logathig</option>
                                    <option value="Nahaiduk">Nahaiduk</option>
                                    <option value="Orkish">Orkish</option>
                                    <option value="Pukael">Pukael</option>
                                    <option value="Quenya">Quenya</option>
                                    <option value="Rohirric">Rohirric</option>
                                    <option value="Sindarin">Sindarin</option>
                                    <option value="Umitic">Umitic</option>
                                    <option value="Varadja">Varadja</option>
                                    <option value="Waildyth">Waildyth</option>
                                    <option value="Westron">Westron</option>
                                </optgroup>
                                <optgroup label="Primary Skills (+5 Bonus)">
                                    <option value="Bonus No Armor">No Armor Bonus</option>
                                    <option value="Bonus Soft Leather">Soft Leather Bonus</option>
                                    <option value="Bonus Rigid Leather">Rigid Leather Bonus</option>
                                    <option value="Bonus Chain Mail">Chain Mail Bonus</option>
                                    <option value="Bonus Plate Mail">Plate Mail Bonus</option>
                                    <option value="Bonus 1H Edged">1H Edged Bonus</option>
                                    <option value="Bonus 1H Concussion">1H Concussion Bonus</option>
                                    <option value="Bonus 2 Handed">2 Handed Bonus</option>
                                    <option value="Bonus Pole Arms">Pole Arms Bonus</option>
                                    <option value="Bonus Missile">Missile Bonus</option>
                                    <option value="Bonus Thrown">Thrown Bonus</option>
                                    <option value="Bonus Climb">Climb Bonus</option>
                                    <option value="Bonus Ride">Ride Bonus</option>
                                    <option value="Bonus Swim">Swim Bonus</option>
                                    <option value="Bonus Track">Track Bonus</option>
                                    <option value="Bonus Stalk Hide">Stalk/Hide Bonus</option>
                                    <option value="Bonus Pick Lock">Pick Lock Bonus</option>
                                    <option value="Bonus Disarm Trap">Disarm Trap Bonus</option>
                                    <option value="Bonus Read Rune">Read Rune Bonus</option>
                                    <option value="Bonus Use Item">Use Item Bonus</option>
                                    <option value="Bonus Directed Spells">Directed Spells Bonus</option>
                                    <option value="Bonus Perception">Perception Bonus</option>
                                    <option value="Bonus Body Development">Body Development Bonus</option>
                                    <option value="Bonus Base Spell OB">Base Spell OB Bonus</option>
                                </optgroup>
                                <optgroup label="Secondary Skills (+15 Bonus)">
                                    <option value="Bonus Acrobatics">Acrobatics Bonus</option>
                                    <!--TODO Finish Secondary Skills-->
                                </optgroup>
                            </select>
                        </fieldset>
                        <div class="text-section-heading special-abilities-heading">Special Features</div>
                        <fieldset class="repeating_special">
                            <input type="text" name="attr_special" spellcheck="false"/>
                        </fieldset>
                    </div>

                    <div class="box-border box-border-languages">
                        <div class="text-section-heading languages-heading">Languages</div>
                        <div class="grid-languages-helper">
                            <div class="text-label">AD Ranks:</div>
                            <input type="number" class="number-bonus" name="attr_race_language_ad_ranks" value="0" title="Number of ranks learned during adolescence.">
                            <input type="number" class="number-bonus" name="attr_language_profession_development" value="0" title="Number of ranks earned per level">
                            <div class="text">/LVL</div>
                        </div>
                        <div class="grid-languages">
                            <div class="text-column-header">Language</div>
                            <div class="text-column-header" title="Proficiency in Language: 1 - Simple Phrases / No Literacy; 2 - Simple Sentences / Basic Reading; 3 - Fluency (with Accent) / 5th Grade Literacy; 4 - Fluency (with Accent) / 9th Grade Literacy; 5 - Fluency  Total Literacy">Rank</div>
                        </div>
                        <fieldset class="repeating_languages_standard">
                            <div class="grid-languages">
                                <select name="attr_language_standard" class="select-language">
                                    <option value="Adunaic">Adunaic</option>
                                    <option value="Apysaic">Apysaic</option>
                                    <option value="Atliduk">Atliduk</option>
                                    <option value="Bethteur">Bethteur</option>
                                    <option value="Black Speech">Black Speech</option>
                                    <option value="Dunael">Dunael</option>
                                    <option value="Haradaic">Haradaic</option>
                                    <option value="Khuzdul">Khuzdul</option>
                                    <option value="Kuduk">Kuduk</option>
                                    <option value="Labba">Labba</option>
                                    <option value="Logathig">Logathig</option>
                                    <option value="Nahaiduk">Nahaiduk</option>
                                    <option value="Orkish">Orkish</option>
                                    <option value="Pukael">Pukael</option>
                                    <option value="Quenya">Quenya</option>
                                    <option value="Rohirric">Rohirric</option>
                                    <option value="Sindarin">Sindarin</option>
                                    <option value="Umitic">Umitic</option>
                                    <option value="Varadja">Varadja</option>
                                    <option value="Waildyth">Waildyth</option>
                                    <option value="Westron">Westron</option>
                                </select>
                                <input type="number" class="number-field number-stat" name="attr_language_rank_standard" />
                            </div>
                        </fieldset>
                        <div class="text-section-heading languages-heading">Custom Languages</div>
                        <fieldset class="repeating_languages">
                            <div class="grid-languages">
                                <input type="text" name="attr_language" />
                                <input type="number" class="number-field number-stat" name="attr_language_rank" />
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>

            <div class="personal-section personal-npc">

                <div class="grid-npc-top">
                    <div class="box-border box-border-npc">
                        <div class="text-section-heading appearance-heading">NPC/Creature</div>
                        <div class="grid-npc-details">
                            <div class="text-label">Name:</div>
                            <input type="text" name="attr_character_name" />
                            <div class="text-label">Type:</div>
                            <input type="text" name="attr_creature_type" />
                            <div class="text-label">Level:</div>
                            <input class="text-field-short" type="text" name="attr_creature_level" value="1" />
                            <div class="text-label" title="The usual number of appearance">Max # App:</div>
                            <input class="text-field-short" type="text" name="attr_creature_number_of_appearance" value="1" spellcheck="false"/>
                            <div class="text-label">Size:</div>
                            <input type="text" name="attr_creature_size" />
                            <div class="text-label">Weight:</div>
                            <input type="text" name="attr_weight" />
                            <div class="text-label">Climate:</div>
                            <input type="text" name="attr_creature_climate" />
                            <div class="text-label">Terrain:</div>
                            <input type="text" name="attr_creature_terrain" />
                        </div>
                        <div class="box-border">
                            <div>&nbsp;</div>
                            <div class="grid-auto-columns">
                                <div class="text-label">Template:</div>
                                <select name="attr_creature_template" class="text-field-medium">                
                                    <option value="">None</option>
                                    <optgroup label="Common Land">
                                        <option value="ape-small">Ape, small</option>
                                        <option value="ape-large">Ape, large</option>
                                        <option value="ape-huge">Ape, huge</option>
                                        <option value="bat-small">Bat, small</option>
                                        <option value="bat-giant">Bat, giant</option>
                                        <option value="bear-large">Bear, large</option>
                                        <option value="bear-giant">Bear, giant</option>
                                        <option value="bird-small">Bird, small</option>
                                        <option value="bird-large">Bird, large</option>
                                        <option value="boar">Boar</option>
                                        <option value="bull">Bull</option>
                                        <option value="cat-small">Cat, small</option>
                                        <option value="cat-medium">Cat, medium</option>
                                        <option value="cat-large">Cat, large</option>
                                        <option value="deer-female">Deer, doe</option>
                                        <option value="deer-male">Deer, buck</option>
                                        <option value="dog-small">Dog, small</option>
                                        <option value="dog-medium">Dog, medium</option>
                                        <option value="dog-large">Dog, large</option>
                                        <option value="elk" disabled>Elk</option>
                                        <option value="horse-small" disabled>Horse, small</option>
                                        <option value="horse-large" disabled>Horse, large</option>
                                        <option value="lizard-small" disabled>Lizard, small</option>
                                        <option value="lizard-medium" disabled>Lizard, medium</option>
                                        <option value="lizard-large" disabled>Lizard, large</option>
                                        <option value="moose" disabled>Moose</option>
                                        <option value="pony" disabled>Pony</option>
                                        <option value="snake-small" disabled>Snake, small</option>
                                        <option value="snake-medium" disabled>Snake, medium</option>
                                        <option value="snake-large" disabled>Snake, large</option>
                                        <option value="spider-small" disabled>Spider, small</option>
                                        <option value="spider-medium" disabled>Spider, medium</option>
                                        <option value="spider-large" disabled>Spider, large</option>
                                        <option value="wolf" disabled>Wolf</option>
                                    </optgroup>
                                    <optgroup label="Common Sea">
                                        <option value="dolphin" disabled>Dolphin</option>
                                        <option value="shark" disabled>Shark</option>
                                        <option value="whale" disabled>Whale</option>
                                    </optgroup>
                                    <optgroup label="Tolkien Special">
                                        <option value="balrogs">Balrogs</option>
                                        <option value="crebain">Crebain</option>
                                        <option value="dragons" disabled>Dragons</option>
                                        <option value="dumbledors" disabled>Dubmledors</option>
                                        <option value="ents" disabled>Ents (Onodrim)</option>
                                        <option value="festitycelyn" disabled>Festitycelyn</option>
                                        <option value="fellbeast" disabled>Fell Beast</option>
                                        <option value="fliesofmordor" disabled>Flies of Mordor</option>
                                        <option value="giants" disabled>Giants</option>
                                        <option value="eagles-great" disabled>Great Eagles</option>
                                        <option value="spiders-great" disabled>Great Spiders</option>
                                        <option value="hummerthorns" disabled>Hummerthorns</option>
                                        <option value="huorns" disabled>Huorns</option>
                                        <option value="kraken-small" disabled>Kraken, small</option>
                                        <option value="kraken-medium" disabled>Kraken, medium</option>
                                        <option value="kraken-large" disabled>Kraken, large</option>
                                        <option value="meras" disabled>Meras</option>
                                        <option value="mewlips" disabled>Mewlips</option>
                                        <option value="mumakil" disabled>Mumakil</option>
                                        <option value="nazgul" disabled>Nazgul</option>
                                        <option value="olog-hai" disabled>Olog-hai</option>
                                        <option value="orcs-weak" disabled>Orcs, weak</option>
                                        <option value="orcs-medium" disabled>Orcs, medium</option>
                                        <option value="orcs-strong" disabled>Orcs, strong</option>
                                        <option value="trolls" disabled>Trolls</option>
                                        <option value="vampires" disabled>Vampires</option>
                                        <option value="wargs" disabled>Wargs</option>
                                        <option value="werewolves" disabled>Werewolves</option>
                                        <option value="wights-minor" disabled>Wights, minor</option>
                                        <option value="wights-lesser" disabled>Wights, lesser</option>
                                        <option value="wights-major" disabled>Wights, major</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div>&nbsp;</div>
                        </div>
                    </div>


                    <div class="box-border box-border-npc">
                        <div class="text-section-heading">Resistances and Defenses</div>
                        <div class="grid-npc-resistances">
                            <div class="grid-npc-armor">
                                <div class="text-label text-label-armor">Armor:</div>
                                <select class="select-armor" name="attr_creature_armorworn">
                                    <option value="no_armor" selected="selected">No armor</option>
                                    <option value="soft_leather">Soft leather</option>
                                    <option value="rigid_leather">Rigid leather</option>
                                    <option value="chain_armor">Chain</option>
                                    <option value="plate_armor">Plate</option>
                                </select>
                                <div class="text-label" title="The relative quickness of the creature.">Quickness:</div>
                                <select name="attr_creature_quickness" class="text-speed">
                                    <option value="CR">Creeping</option>
                                    <option value="VS">Very Slow</option>
                                    <option value="SL">Slow</option>
                                    <option value="MD" selected="selected">Medium</option>
                                    <option value="MF">Moderately Fast</option>
                                    <option value="FA">Fast</option>
                                    <option value="VF">Very Fast</option>
                                    <option value="BF">Blindingly Fast</option>
                                </select>
                            </div>

                            <div class="box-border box-border-npc">
                                <div class="grid-npc-db-mods">
                                    <span class="text-label" title="Applies when creature is attacking.">Charge/Lunge DB (Mod):</span>
                                    <input type="number" name="attr_creature_chargelunge_db_mod" value="0" readonly/>

                                    <span class="text-label" title="Applies when creature is 50' away and dashing away or across a line of sight.">Flee/Evade DB (Mod):</span>
                                    <input type="number" name="attr_creature_fleeevade_db_mod" value="0" readonly/>
                                </div>
                            </div>
                        </div>
                        <div class="grid-resistances">
                            <div class="text-column-header"></div>
                            <div class="text-column-header">Stat</div>
                            <div class="text-column-header">Bonus</div>
                            <div class="text-column-header">Race</div>
                            <div class="text-column-header">Item</div>
                            <div class="text-column-header">Spec</div>
                            <div class="text-column-header">Spec</div>
                            <div class="text-column-header">Total</div>
                            <div class="text-column-header"></div>
                            <div class="text-column-header"></div>

                            <div class="text-row-header">Defensive Bonus</div>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_defensive_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_defensive_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_defensive_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_defensive_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_defensive_spec2_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_defensive_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Defensive Bonus">DB</div>
                            <button type="roll" class="roller-button" name="attr_defensive_rr" title="Defensive Resistance Roll" value="@{wtype} &{template:openended} {{type=Defense}} {{character=@{character_name}}} {{subtags=Defensive Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{defensive_total_bonus}[Defensive Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{defensive_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Essence Resist</div>
                            <div class="text-center" title="Intelligence">IG</div>
                            <input type="number" class="number-autocalc" name="attr_essence_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_essence_race_bonus" value="0" />
                            <input type="number" class="number-field number-stat" name="attr_essence_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_essence_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_essence_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_essence_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_essence_rr" title="Essence Resistance Roll" value="@{wtype} &{template:openended} {{type=Essence}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{essence_total_bonus}[Essence Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{essence_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Channeling Resist</div>
                            <div class="text-center" title="Intuition">IT</div>
                            <input type="number" class="number-autocalc" name="attr_channeling_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_channeling_race_bonus" value="0" />
                            <input type="number" class="number-field number-stat" name="attr_channeling_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_channeling_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_channeling_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_channeling_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_channeling_rr" title="Channeling Resistance Roll" value="@{wtype} &{template:openended} {{type=Channeling}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{channeling_total_bonus}[Channeling Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{channeling_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Poison Resist</div>
                            <div class="text-center">CO</div>
                            <input type="number" class="number-autocalc" name="attr_poison_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_poison_race_bonus" value="0" />
                            <input type="number" class="number-field number-stat" name="attr_poison_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_poison_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_poison_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_poison_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_poison_rr" title="Poison Resistance Roll" value="@{wtype} &{template:openended} {{type=Poison}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{poison_total_bonus}[Poison Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{poison_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Disease Resist</div>
                            <div class="text-center">CO</div>
                            <input type="number" class="number-autocalc" name="attr_disease_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_disease_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_disease_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_disease_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_disease_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_disease_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_disease_rr" title="Disease Resistance Roll" value="@{wtype} &{template:openended} {{type=Disease}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{disease_total_bonus}[Disease Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{disease_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Cold Resist</div>
                            <div class="text-center"></div>
                            <div class="text-center">xx</div>
                            <input type="number" class="number-stat" name="attr_cold_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_cold_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_cold_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_cold_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_cold_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_cold_rr" title="Cold Resistance Roll" value="@{wtype} &{template:openended} {{type=Cold}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{cold_total_bonus}[Cold Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{cold_total_bonus}]]}}">T</button>

                            <div class="text-row-header">Heat Resist</div>
                            <div class="text-center"></div>
                            <div class="text-center">xx</div>
                            <input type="number" class="number-stat" name="attr_heat_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_heat_item_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_heat_spec1_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_heat_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_heat_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Resistance roll">RR</div>
                            <button type="roll" class="roller-button" name="attr_heat_rr" title="Heat Resistance Roll" value="@{wtype} &{template:openended} {{type=Heat}} {{character=@{character_name}}} {{subtags=Resistance Roll}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{heat_total_bonus}[Heat Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{bonus=[[@{heat_total_bonus}]]}}">T</button>
                        </div>
                    </div>
                </div>

                <div class="grid-npc-middle">
                    <div class="box-border box-border-stats">
                        <div class="text-section-heading stats-heading">Stats <button type="action" name="act_randomize_npc_stats">Randomize!</button></div>

                        <div class="grid-stats">
                            <div class="text-column-header">Stats</div>
                            <div class="text-column-header">Roll</div>
                            <div class="text-column-header">BG</div>
                            <div class="text-column-header">Stat</div>
                            <div class="text-column-header">Norm</div>
                            <div class="text-column-header">Race</div>
                            <div class="text-column-header">Misc</div>
                            <div class="text-column-header">Total</div>
                            <div class="text-column-header"></div>

                            <div class="text-row-header" title="A character's capabilities in melee, carrying loads, and other activities requiring strength.">Strength (ST)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_st_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_st_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_st_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_st_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_st_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_st_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_st_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_st_roll" title="Strength Check" value="@{wtype} &{template:openended} {{type=Strength}} {{character=@{character_name}}} {{subtags=Strength Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_st_total_bonus}[Strength Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's manual dexterity, litheness, quickness, reaction time, and speed.">Agility (AG)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_ag_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_ag_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_ag_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_ag_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_ag_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_ag_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_ag_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_ag_roll" title="Agility Check" value="@{wtype} &{template:openended} {{type=Agility}} {{character=@{character_name}}} {{subtags=Agility Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_ag_total_bonus}[Agility Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's general health and well-being.">Constitution (CO)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_co_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_co_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_co_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_co_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_co_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_co_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_co_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_co_roll" title="Constitution Check" value="@{wtype} &{template:openended} {{type=Constitution}} {{character=@{character_name}}} {{subtags=Constitution Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_co_total_bonus}[Constitution Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's reasoning, memory, and common sense.">Intelligence (IG)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_ig_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_ig_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_ig_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_ig_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_ig_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_ig_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_ig_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_ig_roll" title="Intelligence Check" value="@{wtype} &{template:openended} {{type=Intelligence}} {{character=@{character_name}}} {{subtags=Intelligence Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_ig_total_bonus}[Intelligence Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's wisdom, luck, and genius.">Intuition (IT)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_it_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_it_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_it_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_it_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_it_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_it_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_it_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_it_roll" title="Intuition Check" value="@{wtype} &{template:openended} {{type=Intuition}} {{character=@{character_name}}} {{subtags=Intuition Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_it_total_bonus}[Intuition Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="A character's self-discipline, courage, bearing, self esteem, and charisma.">Presence (PR)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_pr_value" min="0" value="50"/>
                            <input type="number" class="number-autocalc" name="attr_stat_pr_bg_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc-total" name="attr_stat_pr_adjusted_value" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_pr_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc" name="attr_stat_pr_race_bonus" value="0"/>
                            <input type="number" class="number-field number-stat" name="attr_stat_pr_misc_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_pr_total_bonus" value="0" readonly/>
                            <button type="roll" class="roller-button" name="attr_pr_roll" title="Presence Check" value="@{wtype} &{template:openended} {{type=Presence}} {{character=@{character_name}}} {{subtags=Presence Check}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{stat_pr_total_bonus}[Presence Bonus] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <div class="text-row-header" title="How well your character is perceived by others.">Appearance (AP)</div>
                            <input type="number" class="number-field number-stat" name="attr_stat_ap_value" min="0" value="50"/>
                            <div></div>
                            <div></div>
                            <div class="text-center">+</div>
                            <div class="text-center">PR</div>
                            <div class="text-center">=</div>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_stat_ap_total_bonus" value="0" readonly/>
                            <div></div>
                        </div>
                    </div>

                    <div class="box-border box-border-npc">
                        <div class="text-section-heading">Status</div>
                        <div class="status-options">
                            <div class="grid-status">
                                <div class="grid-status-hp box-border">
                                    <div class="grid-auto-columns">
                                        <div class="text-label">Hit Points: [</div>
                                        <input type="number" class="number-bonus" name="attr_creature_hit_points_max" value="0">
                                        <div class="text">]</div>
                                    </div>
                                    <input type="number" class="number-hp" name="attr_creature_hit_points" min="0" value="0"/>
                                </div>

                                <div>
                                    <div class="grid-auto-columns">
                                        <span class="text-label" title="Blood loss in hits per round">Blood loss:</span> 
                                        <input type="number" class="number-bonus" name="attr_creature_status_bleeding" value="0"/>
                                        <div class="text">hits/rnd</div>
                                    </div>
                                    <div class="grid-status-effects">
                                        <div class="grid-auto-columns">
                                            <span class="text-label" title="Unable to attack. May only parry at 50% OB. Any other action requires a maneuver roll at -50.">Stunned:</span> 
                                            <input type="checkbox" name="attr_creature_status_stunned" value="-50"/> 
                                        </div>
                                        <div class="grid-auto-columns">
                                            <span class="text-label" title="Unable to attack or parry. Any other action requires a maneuver roll at -50.">Down:</span> 
                                            <input type="checkbox" name="attr_creature_status_down" value="-70"/> 
                                        </div>
                                        <div class="grid-auto-columns">
                                            <span class="text-label" title="Unable to use an arm or a leg.">One limb out:</span> 
                                            <input type="checkbox" name="attr_creature_status_onelimbout" value="-30"/> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-section-heading">Movement</div>
                        <div class="grid-npc-movement">
                            <div class="grid-auto-columns">
                                <div class="text-label" title="The relative speed of the creature">Speed:</div>
                                <select name="attr_creature_speed" class="text-speed">                
                                    <option value="CR">Creeping</option>
                                    <option value="VS">Very Slow</option>
                                    <option value="SL">Slow</option>
                                    <option value="MD" selected="selected">Medium</option>
                                    <option value="MF">Moderately Fast</option>
                                    <option value="FA">Fast</option>
                                    <option value="VF">Very Fast</option>
                                    <option value="BF">Blindingly Fast</option>
                                </select>
                            </div>

                            <div class="grid-auto-columns">
                                <span class="text-label" title="Movement rate (feet/round)">Rate:</span>
                                <div class="grid-auto-columns">
                                    <input type="number" class="number-autocalc-penalty" name="attr_creature_movement_rate" value="0" readonly/>
                                    <span class="text"> feet/rnd</span>
                                </div>
                            </div>

                            <div class="grid-auto-columns">
                                <span class="text-label" title="Movement maneuver bonus from movement speed">Bonus:</span>
                                <div class="grid-auto-columns">
                                    <input type="number" class="number-bonus" name="attr_creature_mm_bonus" value="0" readonly/>
                                    <span class="action-type-label" title="Movement maneuver bonus">MM&nbsp;</span>
                                    <button type="roll" class="roller-button" name="attr_creature_mm" title="Creature Moving Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Basic}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{creature_mm_bonus}[MM Bonus] + @{creature_activity_penalty}[Activity] + @{creature_status_stunned}[Stunned] + @{creature_status_down}[Down] + @{creature_status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + ?{Modifier|0} ]]}}  {{underflow=[[1d100!>95 * -1]]}}">T</button>
                                </div>  
                            </div>
                        </div>


                        <div class="grid-status-vision">
                        </div>

                        <div class="text-section-heading status-heading">Penalties</div>
                        <div class="grid-penalties">
                            <div class="grid-auto-columns">
                                <span class="text-label" title="Applies to all activity except DB and RR.">Activity</span>
                                <input type="number" class="number-stat" name="attr_creature_activity_penalty" value="0" max="0"/>
                            </div>
                            <div class="grid-auto-columns">
                                <span class="text-label" title="Hit loss penalty applies to OB, when more than half of total hit points are lost.">Hit Loss:</span>
                                <input type="number" class="number-autocalc-penalty" name="attr_creature_total_hit_loss_penalty" value="0" readonly/>
                            </div>
                            <div class="grid-auto-columns">
                                <div class="text-label" title="Encumbrance penalty applies to all movement and moving maneuvers. Negated by ST bonus.">Encumbrance:</div>
                                <input type="number" class="number-autocalc number-autocalc-penalty" name="attr_encumbrance_penalty" value="0" readonly/>
                            </div>
                        </div>

                        <div class="grid-penalties">
                            <div class="grid-auto-columns">
                                <span class="text-label" title="Total penalty for moving maneuvers">Total MM:</span>
                                <input type="number" class="autocalc-total number-autocalc-penalty sheet-number-autocalc" name="attr_creature_total_mm_penalty" value="0" readonly/> 
                            </div>
                            <div class="grid-auto-columns">
                                <span class="text-label" title="Total penalty for offensive actions: activity penalty + arm greaves + hit loss">Total OB:</span>
                                <input type="number" class="number-autocalc number-autocalc-penalty" name="attr_creature_total_ob_penalty" value="0" readonly/> 
                            </div>
                            <div class="grid-auto-columns">
                                <span class="text-label" title="Total penalty for offensive actions: activity penalty + arm greaves + hit loss">Total SM:</span>
                                <input type="number" class="number-autocalc number-autocalc-penalty" name="attr_creature_total_sm_penalty" value="0" readonly/> 
                            </div>
                        </div>



                    </div>
                </div>

                <div class="grid-npc-bottom">
                    <div class="box-border box-border-npc">
                        <div class="text-section-heading">Special Abilities</div>
                        <fieldset class="repeating_creaturespecials">            
                            <input type="text" class="text-special-abilities" name="attr_creature_special" spellcheck="false"/> 
                        </fieldset>
                    </div>

                    <div class="box-border box-border-npc">
                        <div class="text-section-heading">Attacks</div>
                        <div class="grid-auto-columns">
                            <div class="text-label" title="The criticals table to use when hit.">Criticals:</div>
                            <select name="attr_creature_critical" class="text-field-medium">                
                                <option value="medium">Regular</option>
                                <option value="large">Large</option>
                                <option value="superlarge">Super Large</option>
                                <option value="i">I</option>
                                <option value="ii">II</option>
                            </select>
                        </div>
                        <div class="grid-npc-attacks">
                            <div class="text-column-header">Name</div>
                            <div class="text-column-header">Size</div>
                            <div class="text-column-header">Type</div>
                            <div class="text-column-header">Primary</div>
                            <div class="text-column-header">Secondary</div>
                            <div class="text-column-header">Bonus</div>
                            <div class="text-column-header"></div>
                            <div class="text-column-header"></div>
                                    
                            <input type="text" name="attr_attack1_name" class="text-field-long" spellcheck="false"/> 
                            <select name="attr_attack1_size" class="text-field-short">                
                                <option value=""></option>
                                <option value="Tiny">Tiny</option>
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="Large">Large</option>
                                <option value="Huge">Huge</option>
                            </select>
                            <select name="attr_attack1_type" class="text-field-medium">                
                                <option value=""></option>
                                <optgroup label="Creatures">
                                    <option value="Bash/Slug">Bash/Slug</option>
                                    <option value="Bite">Bite</option>
                                    <option value="Claw">Claw/Talon</option>
                                    <option value="Crush">Crush</option>
                                    <option value="Grapple/Swallow">Grapple/Swallow</option>
                                    <option value="Horn/Tusk">Horn/Tusk</option>
                                    <option value="Pincer/Beak">Pincher/Beak</option>
                                    <option value="Ram">Ram</option>
                                    <option value="Stinger">Stinger</option>
                                    <option value="Trample/Stomp">Trample/Stomp</option>
                                </optgroup>
                                <optgroup label="Humanoid">
                                    <option value="Fist/Kick">Fist/Kick</option>
                                    <option value="Weapon">Weapon</option>
                                    <option value="Wrestling/Tackle">Wrestling/Tackles</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="Spell">Spell</option>
                                    <option value="Touch">Touch</option>
                                </optgroup>
                            </select>
                            <input type="text" name="attr_attack1_primary" class="text-field-medium" spellcheck="false"/> 
                            <input type="text" name="attr_attack1_secondary" class="text-field-medium" spellcheck="false"/> 
                            <input type="number" class="number-bonus" name="attr_attack1_ob" value="0"/>
                            <span class="action-type-label" title="Offensive bonus">OB</span>
                            <button type="roll" class="roller-button" name="attr_attack1_roll" title="Primary Attack Roll" value="@{wtype} &{template:attack} {{type=@{attack1_name}}} {{character=@{character_name}}} {{subtags=@{attack1_size} @{attack1_type} Attack}} {{roll=[[1d100!>95cs>95cf<8 + @{attack1_ob}[OB] - ?{Parry(@{attack1_ob})|0}[Parry] + @{creature_total_hit_loss_penalty}[Hit Loss] + @{creature_activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{primary_critical=[[1d100]] @{attack1_primary}}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type=@{attack1_secondary}}} {{parry=[[?{Parry(@{attack1_ob})|0}]]}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <input type="text" name="attr_attack2_name" class="text-field-long" spellcheck="false"/> 
                            <select name="attr_attack2_size" class="text-field-short">                
                                <option value=""></option>
                                <option value="Tiny">Tiny</option>
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="Large">Large</option>
                                <option value="Huge">Huge</option>
                            </select>
                            <select name="attr_attack2_type" class="text-field-medium">                
                                <option value=""></option>
                                <optgroup label="Creatures">
                                    <option value="Bash/Slug">Bash/Slug</option>
                                    <option value="Bite">Bite</option>
                                    <option value="Claw">Claw/Talon</option>
                                    <option value="Crush">Crush</option>
                                    <option value="Grapple/Swallow">Grapple/Swallow</option>
                                    <option value="Horn/Tusk">Horn/Tusk</option>
                                    <option value="Pincer/Beak">Pincher/Beak</option>
                                    <option value="Ram">Ram</option>
                                    <option value="Stinger">Stinger</option>
                                    <option value="Trample/Stomp">Trample/Stomp</option>
                                </optgroup>
                                <optgroup label="Humanoid">
                                    <option value="Fist/Kick">Fist/Kick</option>
                                    <option value="Weapon">Weapon</option>
                                    <option value="Wrestling/Tackle">Wrestling/Tackles</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="Spell">Spell</option>
                                    <option value="Touch">Touch</option>
                                </optgroup>

                            </select>
                            <input type="text" name="attr_attack2_primary" class="text-field-medium" spellcheck="false"/> 
                            <input type="text" name="attr_attack2_secondary" class="text-field-medium" spellcheck="false"/> 
                            <input type="number" class="number-bonus" name="attr_attack2_ob" value="0"/> <span class="action-type-label" title="Offensive bonus">OB</span>
                            <button type="roll" class="roller-button" name="attr_attack2_roll" title="Primary Attack Roll" value="@{wtype} &{template:attack} {{type=@{attack2_name}}} {{character=@{character_name}}} {{subtags=@{attack2_size} @{attack2_type} Attack}} {{roll=[[1d100!>95cs>95cf<8 + @{attack2_ob}[OB] - ?{Parry(@{attack2_ob})|0}[Parry] + @{creature_total_hit_loss_penalty}[Hit Loss] + @{creature_activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{primary_critical=[[1d100]] @{attack2_primary}}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type=@{attack2_secondary}}} {{parry=[[?{Parry(@{attack2_ob})|0}]]}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                                    
                            <input type="text" name="attr_attack3_name" class="text-field-long" spellcheck="false"/> 
                            <select name="attr_attack3_size" class="text-field-short">                
                                <option value=""></option>
                                <option value="Tiny">Tiny</option>
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="Large">Large</option>
                                <option value="Huge">Huge</option>
                            </select>
                            <select name="attr_attack3_type" class="text-field-medium">                
                                <option value=""></option>
                                <optgroup label="Creatures">
                                    <option value="Bash/Slug">Bash/Slug</option>
                                    <option value="Bite">Bite</option>
                                    <option value="Claw">Claw/Talon</option>
                                    <option value="Crush">Crush</option>
                                    <option value="Grapple/Swallow">Grapple/Swallow</option>
                                    <option value="Horn/Tusk">Horn/Tusk</option>
                                    <option value="Pincer/Beak">Pincher/Beak</option>
                                    <option value="Ram">Ram</option>
                                    <option value="Stinger">Stinger</option>
                                    <option value="Trample/Stomp">Trample/Stomp</option>
                                </optgroup>
                                <optgroup label="Humanoid">
                                    <option value="Fist/Kick">Fist/Kick</option>
                                    <option value="Weapon">Weapon</option>
                                    <option value="Wrestling/Tackle">Wrestling/Tackles</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="Spell">Spell</option>
                                    <option value="Touch">Touch</option>
                                </optgroup>

                            </select>
                            <input type="text" name="attr_attack3_primary" class="text-field-medium" spellcheck="false"/> 
                            <input type="text" name="attr_attack3_secondary" class="text-field-medium" spellcheck="false"/> 
                            <input type="number" class="number-bonus" name="attr_attack3_ob" value="0"/> <span class="action-type-label" title="Offensive bonus">OB</span>
                            <button type="roll" class="roller-button" name="attr_attack3_roll" title="Primary Attack Roll" value="@{wtype} &{template:attack} {{type=@{attack3_name}}} {{character=@{character_name}}} {{subtags=@{attack3_size} @{attack3_type} Attack}} {{roll=[[1d100!>95cs>95cf<8 + @{attack3_ob}[OB] - ?{Parry(@{attack3_ob})|0}[Parry] + @{creature_total_hit_loss_penalty}[Hit Loss] + @{creature_activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{primary_critical=[[1d100]] @{attack3_primary}}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type=@{attack3_secondary}}} {{parry=[[?{Parry(@{attack3_ob})|0}]]}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                                    
                            <input type="text" name="attr_attack4_name" class="text-field-long" spellcheck="false"/> 
                            <select name="attr_attack4_size" class="text-field-short">                
                                <option value=""></option>
                                <option value="Tiny">Tiny</option>
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="Large">Large</option>
                                <option value="Huge">Huge</option>
                            </select>
                            <select name="attr_attack4_type" class="text-field-medium">                
                                <option value=""></option>
                                <optgroup label="Creatures">
                                    <option value="Bash/Slug">Bash/Slug</option>
                                    <option value="Bite">Bite</option>
                                    <option value="Claw">Claw/Talon</option>
                                    <option value="Crush">Crush</option>
                                    <option value="Grapple/Swallow">Grapple/Swallow</option>
                                    <option value="Horn/Tusk">Horn/Tusk</option>
                                    <option value="Pincer/Beak">Pincher/Beak</option>
                                    <option value="Ram">Ram</option>
                                    <option value="Stinger">Stinger</option>
                                    <option value="Trample/Stomp">Trample/Stomp</option>
                                </optgroup>
                                <optgroup label="Humanoid">
                                    <option value="Fist/Kick">Fist/Kick</option>
                                    <option value="Weapon">Weapon</option>
                                    <option value="Wrestling/Tackle">Wrestling/Tackles</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="Spell">Spell</option>
                                    <option value="Touch">Touch</option>
                                </optgroup>

                            </select>
                            <input type="text" name="attr_attack4_primary" class="text-field-medium" spellcheck="false"/> 
                            <input type="text" name="attr_attack4_secondary" class="text-field-medium" spellcheck="false"/> 
                            <input type="number" class="number-bonus" name="attr_attack4_ob" value="0"/> <span class="action-type-label" title="Offensive bonus">OB</span>
                            <button type="roll" class="roller-button" name="attr_attack4_roll" title="Primary Attack Roll" value="@{wtype} &{template:attack} {{type=@{attack4_name}}} {{character=@{character_name}}} {{subtags=@{attack4_size} @{attack4_type} Attack}} {{roll=[[1d100!>95cs>95cf<8 + @{attack4_ob}[OB] - ?{Parry(@{attack4_ob})|0}[Parry] + @{creature_total_hit_loss_penalty}[Hit Loss] + @{creature_activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{primary_critical=[[1d100]] @{attack4_primary}}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type=@{attack4_secondary}}} {{parry=[[?{Parry(@{attack4_ob})|0}]]}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                            <input type="text" name="attr_attack5_name" class="text-field-long" spellcheck="false"/> 
                            <select name="attr_attack5_size" class="text-field-short">                
                                <option value=""></option>
                                <option value="Tiny">Tiny</option>
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="Large">Large</option>
                                <option value="Huge">Huge</option>
                            </select>
                            <select name="attr_attack5_type" class="text-field-medium">                
                                <option value=""></option>
                                <optgroup label="Creatures">
                                    <option value="Bash/Slug">Bash/Slug</option>
                                    <option value="Bite">Bite</option>
                                    <option value="Claw">Claw/Talon</option>
                                    <option value="Crush">Crush</option>
                                    <option value="Grapple/Swallow">Grapple/Swallow</option>
                                    <option value="Horn/Tusk">Horn/Tusk</option>
                                    <option value="Pincer/Beak">Pincher/Beak</option>
                                    <option value="Ram">Ram</option>
                                    <option value="Stinger">Stinger</option>
                                    <option value="Trample/Stomp">Trample/Stomp</option>
                                </optgroup>
                                <optgroup label="Humanoid">
                                    <option value="Fist/Kick">Fist/Kick</option>
                                    <option value="Weapon">Weapon</option>
                                    <option value="Wrestling/Tackle">Wrestling/Tackles</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="Spell">Spell</option>
                                    <option value="Touch">Touch</option>
                                </optgroup>

                            </select>
                            <input type="text" name="attr_attack5_primary" class="text-field-medium" spellcheck="false"/> 
                            <input type="text" name="attr_attack5_secondary" class="text-field-medium" spellcheck="false"/> 
                            <input type="number" class="number-bonus" name="attr_attack5_ob" value="0"/> <span class="action-type-label" title="Offensive bonus">OB</span>
                            <button type="roll" class="roller-button" name="attr_attack5_roll" title="Primary Attack Roll" value="@{wtype} &{template:attack} {{type=@{attack5_name}}} {{character=@{character_name}}} {{subtags=@{attack5_size} @{attack5_type} Attack}} {{roll=[[1d100!>95cs>95cf<8 + @{attack5_ob}[OB] - ?{Parry(@{attack5_ob})|0}[Parry] + @{creature_total_hit_loss_penalty}[Hit Loss] + @{creature_activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{primary_critical=[[1d100]] @{attack5_primary}}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type=@{attack5_secondary}}} {{parry=[[?{Parry(@{attack5_ob})|0}]]}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>

                        </div>
                    </div>
                </div>

            </div>


        </div>

        <div class="tab-content tab-content-skills">
            <input type="hidden" class="active-skills-section" name="attr_activeSkillSection" value="primary" />

            <div class="grid-skills">
                <div class="grid-skill-top-header">
                    <div class="skill-section-buttons">
                        <button class="button-skills button-skills-primary" type="action" name="act_primary">Primary</button>
                        <button class="button-skills button-skills-secondary" type="action" name="act_secondary">Secondary</button>
                    </div>
                    <div class="text-column-header item-skill-ranks">Skill Ranks</div>
                    <div class="text-column-header item-skill-bonuses">Skill Bonuses</div>
                </div>

                <div class="grid-skill-column-header">
                    <div class="text-column-header">Skills</div>
                    <div class="text-column-header">AD/BG</div>
                    <div class="text-column-header">5% Rank</div>
                    <div class="text-column-header">2% Rank</div>
                    <div class="text-column-header" title="The total bonus from skill ranks">Rank</div>
                    <div class="text-column-header" title="The bonus from relevant stat">Stat</div>
                    <div class="text-column-header" title="The bonus from relevant stat">Bonus</div>
                    <div class="text-column-header" title="The bonus from profession">Prof</div>
                    <div class="text-column-header" title="The bonus from profession">Race</div>
                    <div class="text-column-header" title="The bonus from special item">Item</div>
                    <div class="text-column-header" title="Special bonus">Spec</div>
                    <div class="text-column-header" title="Special bonus">Spec</div>
                    <div class="text-column-header" title="The total skill bonus">Total</div>
                    <div class="text-column-header"></div>
                    <div class="text-column-header"></div>
                </div>

                <div class="skills-section skills-primary">

                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">Movement and Maneuver</div>
                            <div class="grid-auto-columns">
                                <div class="text-label">Ranks:</div>
                                <input type="number" class="number-bonus" name="attr_movingmaneuver_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                                <div class="text">/LEVEL</div>
                            </div>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">No Armor</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_noarmor_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_noarmor_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_noarmor_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_noarmor_5rank2" value="5" />
                            </div>
                            <div class="grid-2ranks"></div>
                            <input type="number" class="number-autocalc" name="attr_skill_noarmor_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_noarmor_stat_bonus" value="0" readonly/>
                            <div class="text-center"> xx </div>
                            <input type="number" class="number-autocalc" name="attr_skill_noarmor_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_noarmor_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_noarmor_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_noarmor_spec2_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_noarmor_total_bonus" value="0" readonly/>
                            <div class="text-center">MM</div>
                            <button type="roll" class="roller-button" name="attr_noarmor_mm" title="No Armor Moving Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=No Armor}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_noarmor_total_bonus}[No Armor] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Soft Leather</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_softleather_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_softleather_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_softleather_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_softleather_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_softleather_5rank3" value="5" />
                            </div>
                            <div class="grid-2ranks"></div>
                            <input type="number" class="number-autocalc" name="attr_skill_softleather_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_softleather_stat_bonus" value="0" readonly/>
                            <div class="text-center"> xx </div>
                            <input type="number" class="number-autocalc" name="attr_skill_softleather_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_softleather_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_softleather_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_softleather_spec2_bonus" value="-15" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_softleather_total_bonus" value="0" readonly>
                            <div class="text-center">MM</div>
                            <button type="roll" class="roller-button" name="attr_softleather_mm" title="Soft Leather Moving Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Soft Leather}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_softleather_total_bonus}[Soft Leather] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Rigid Leather</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_rigidleather_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_rigidleather_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_rigidleather_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_rigidleather_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_rigidleather_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_rigidleather_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_rigidleather_5rank5" value="5" />
                            </div>
                            <div class="grid-2ranks"></div>
                            <input type="number" class="number-autocalc" name="attr_skill_rigidleather_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_rigidleather_stat_bonus" value="0" readonly/>
                            <div class="text-center"> xx </div>
                            <input type="number" class="number-autocalc" name="attr_skill_rigidleather_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_rigidleather_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_rigidleather_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_rigidleather_spec2_bonus" value="-30" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_rigidleather_total_bonus" value="0" readonly>
                            <div class="text-center">MM</div>
                            <button type="roll" class="roller-button" name="attr_rigidleather_mm" title="Rigid Leather Moving Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Rigid Leather}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_rigidleather_total_bonus}[Rigid Leather] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Chain</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_chain_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_chain_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_chain_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_chain_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_chain_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_chain_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_chain_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_chain_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_chain_5rank7" value="5" />
                            </div>
                            <div class="grid-2ranks"></div>
                            <input type="number" class="number-autocalc" name="attr_skill_chain_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_chain_stat_bonus" value="0" readonly/>
                            <div class="text-center"> xx </div>
                            <input type="number" class="number-autocalc" name="attr_skill_chain_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_chain_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_chain_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_chain_spec2_bonus" value="-45" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_chain_total_bonus" value="0" readonly>
                            <div class="text-center">MM</div>
                            <button type="roll" class="roller-button" name="attr_chain_mm" title="Chain Moving Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Chain}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_chain_total_bonus}[Chain] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Plate</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_plate_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_plate_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_plate_5rank9" value="5" />
                            </div>
                            <div class="grid-2ranks"></div>
                            <input type="number" class="number-autocalc" name="attr_skill_plate_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_plate_stat_bonus" value="0" readonly/>
                            <div class="text-center"> xx </div>
                            <input type="number" class="number-autocalc" name="attr_skill_plate_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_plate_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_plate_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_plate_spec2_bonus" value="-60" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_plate_total_bonus" value="0" readonly>
                            <div class="text-center">MM</div>
                            <button type="roll" class="roller-button" name="attr_plate_mm" title="Plate Moving Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Plate}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_plate_total_bonus}[Plate] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                    </div>

                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">Weapon Skills</div>
                            <div class="grid-auto-columns">
                                <div class="text-label">Ranks:</div>
                                <input type="number" class="number-bonus" name="attr_weapon_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                                <div class="text">/LEVEL</div>
                            </div>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">1-H Edged</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_1hedged_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_1hedged_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hedged_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_1hedged_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_1hedged_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_1hedged_prof_bonus" value="0">
                            <input type="number" class="number-autocalc" name="attr_skill_1hedged_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_1hedged_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_1hedged_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_1hedged_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_1hedged_total_bonus" value="0" readonly/>
                            <div class="text-center">OB</div>
                            <button type="roll" class="roller-button" name="attr_1hedged_ob" title="1-H Edged Attack Roll" value="@{wtype} &{template:attack} {{type=1H Edged}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_1hedged_total_bonus}[1H Edged OB] - ?{Parry(@{skill_1hedged_total_bonus})|0}[Parry] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{parry=?{Parry(@{skill_1hedged_total_bonus})|0}}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">1-H Concussion</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_1hconc_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_1hconc_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_1hconc_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_1hconc_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_1hconc_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_1hconc_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_1hconc_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_1hconc_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_1hconc_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_1hconc_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_1hconc_total_bonus" value="0" readonly/>
                            <div class="text-center">OB</div>
                            <button type="roll" class="roller-button" name="attr_1hconc_ob" title="1-H Concussion Attack Roll" value="@{wtype} &{template:attack} {{type=1H Concussion}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_1hconc_total_bonus}[1H Concussion OB] - ?{Parry(@{skill_1hconc_total_bonus})|0}[Parry] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{parry=?{Parry(@{skill_1hconc_total_bonus})|0}}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">2-Handed</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_2handed_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_2handed_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_2handed_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_2handed_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_2handed_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_2handed_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_2handed_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_2handed_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_2handed_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_2handed_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_2handed_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_2handed_ob" title="2 Handed Attack Roll" value="@{wtype} &{template:attack} {{type=2 Handed}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_2handed_total_bonus}[2 Handed OB] - ?{Parry(@{skill_2handed_total_bonus})|0}[Parry] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{parry=?{Parry(@{skill_2handed_total_bonus})|0}}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                                <!-- Thrown -->
                        <div class="grid-skill-row">
                            <div class="text-row-header">Thrown</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_thrown_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_thrown_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_thrown_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_thrown_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_thrown_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_thrown_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_thrown_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_thrown_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_thrown_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_thrown_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_thrown_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_thrown_ob" title="Thrown Attack Roll" value="@{wtype} &{template:attack} {{type=Thrown}} {{character=@{character_name}}} {{subtags=Ranged Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_thrown_total_bonus}[Thrown OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Missile</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_missile_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_missile_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_missile_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_missile_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_missile_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_missile_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_missile_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_missile_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_missile_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_missile_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_missile_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_missile_ob" title="Missile Attack Roll" value="@{wtype} &{template:attack} {{type=Missile}} {{character=@{character_name}}} {{subtags=Ranged Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_missile_total_bonus}[Missile OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Pole-arms</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_polearm_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_polearm_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_polearm_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_polearm_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_polearm_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_polearm_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_polearm_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_polearm_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_polearm_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_polearm_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_polearm_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_polearm_ob" title="Polearm Attack Roll" value="@{wtype} &{template:attack} {{type=Polearm}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_polearm_total_bonus}[Polearm OB] - ?{Parry(@{skill_polearm_total_bonus})|0}[Parry] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{parry=?{Parry(@{skill_polearm_total_bonus})|0}}} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                    </div>
                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">General Skills</div>
                            <input type="number" class="number-bonus" name="attr_general_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                            <div class="text">/LEVEL</div>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Climb</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_climb_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_climb_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_climb_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_climb_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_climb_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_climb_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_climb_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_climb_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_climb_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_climb_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_climb_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Moving maneuver">MM</div>
                            <button type="roll" class="roller-button" name="attr_climb_mm" title="No armor moving maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Climb}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_climb_total_bonus}[Climb] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Ride</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_ride_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_ride_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ride_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_ride_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_ride_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_ride_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_ride_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_ride_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_ride_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_ride_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_ride_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Moving maneuver">MM</div>
                            <button type="roll" class="roller-button" name="attr_ride_mm" title="Ride moving maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Ride}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_ride_total_bonus}[Ride] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Swim</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_swim_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_swim_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_swim_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_swim_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_swim_stat_bonus"  value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_swim_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_swim_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_swim_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_swim_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_swim_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_swim_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Moving maneuver">MM</div>
                            <button type="roll" class="roller-button" name="attr_swim_mm" title="Swim Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Swim}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_swim_total_bonus}[Swim] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Track</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_track_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_track_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_track_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_track_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_track_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_track_stat_bonus"  value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_track_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_track_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_track_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_track_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_track_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_track_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_track_sm" title="Tracking static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Tracking}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_track_total_bonus}[Track Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                    </div>

                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">Subterfuge Skills</div>
                            <input type="number" class="number-bonus" name="attr_subterfuge_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                            <div class="text">/LEVEL</div>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Ambush</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_ambush_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_ambush_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank1" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank2" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank3" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank4" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank5" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank6" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank7" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank8" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank9" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_5rank10" value="1" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_2rank1" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_2rank2" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_2rank3" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_2rank4" value="1" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ambush_2rank5" value="1" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_ambush_rank_bonus" value="0" readonly/>
                            <div class="text-center">xx</div>
                            <div class="text-center">xx</div>
                            <div class="text-center">xx</div>
                            <div class="text-center">xx</div>
                            <div class="text-right">xx</div>
                            <input type="number" class="number-stat" name="attr_skill_ambush_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_ambush_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_ambush_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Special">SP</div>
                            <div></div>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Stalk/Hide</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_stalkhide_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_stalkhide_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_stalkhide_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_stalkhide_rank_bonus" value="0" readonly/>
                            <div class="text-center">PR</div>
                            <input type="number" class="number-autocalc" name="attr_skill_stalkhide_stat_bonus"  value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_stalkhide_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_stalkhide_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_stalkhide_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_stalkhide_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_stalkhide_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_stalkhide_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Special: Movement manuver / Static maneuver">SP</div>
                            <button type="roll" class="roller-button" name="attr_stalkhide_mm" title="Stalk/hide maneuver" value="@{wtype} &{template:stalkhide} {{type=Stalk/hide maneuver}} {{character=@{character_name}}} {{subtags=Movement & Static Maneuver}} {{mm_roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_stalkhide_total_bonus}[Stalk/Hide] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{sm_roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_stalkhide_total_bonus}[Stalk/Hide Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Pick Lock</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_picklock_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_picklock_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_picklock_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_picklock_rank_bonus" value="0" readonly/>
                            <div class="text-center">IG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_picklock_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_picklock_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_picklock_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_picklock_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_picklock_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_picklock_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_picklock_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_picklock_sm" title="Pick Lock Static Maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Picking Lock}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_picklock_total_bonus}[Pick Lock Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Disarm Trap</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_disarmtrap_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_disarmtrap_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_disarmtrap_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_disarmtrap_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_disarmtrap_stat_bonus"  value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_disarmtrap_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_disarmtrap_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_disarmtrap_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_disarmtrap_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_disarmtrap_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_disarmtrap_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_disarmtrap_sm" title="Disarm Trap Static Maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Disarming Trap}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_disarmtrap_total_bonus}[Disarm Trap Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                    </div>

                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">Magical Skills</div>
                            <input type="number" class="number-bonus" name="attr_magical_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                            <div class="text">/LEVEL</div>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">Read Runes</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_readrunes_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_readrunes_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_readrunes_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_readrunes_rank_bonus" value="0" readonly/>
                            <div class="text-center">IG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_readrunes_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_readrunes_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_readrunes_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_readrunes_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_readrunes_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_readrunes_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_readrunes_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_readrunes_sm" title="Read Runes Static Maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Reading Runes}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_readrunes_total_bonus}[Read Runes Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Use Items</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_useitems_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_useitems_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_useitems_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_useitems_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_useitems_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_useitems_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_useitems_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_useitems_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_useitems_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_useitems_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_useitems_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_useitems_sm" title="Use Items Static Maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Using Item}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_useitems_total_bonus}[Use Items Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Directed Spells</div>
                            <div class="grid-skill-ad-bg-ranks">
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_directedspells_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_directedspells_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_directedspells_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_directedspells_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_directedspells_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_directedspells_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_directedspells_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_directedspells_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_directedspells_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive Bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_directedspells_ob" title="Directed Spells Attack Roll" value="@{wtype} &{template:spellattack} {{type=Directed Spells}} {{character=@{character_name}}} {{subtags=Spell Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|8} + @{skill_directedspells_total_bonus}[Directed Spells OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                    </div>

                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">Misc. Skills</div>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">Perception</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_perception_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_perception_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_perception_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_perception_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_perception_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_perception_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_perception_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_perception_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_perception_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_perception_spec2_bonus" value="0" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_perception_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_perception_sm" title="Perception Static Maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Perception}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_perception_total_bonus}[Perception Bonus] + @{activity_penalty}[Activity] + @{helmet_worn} * @{helmet_penalty}[Helm] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header grid-bodydev-header">
                                <div>Body Dev</div>
                                <input type="number" class="number-bonus" name="attr_body_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                                <div>/lv</div>
                            </div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_bodydev_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_bodydev_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank1" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank2" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank3" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank4" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank5" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank6" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank7" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank8" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank9" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_5rank10" min="0" max="10" value="0" />
                            </div>
                            <div class="grid-2ranks">
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_2rank1" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_2rank2" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_2rank3" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_2rank4" min="0" max="10" value="0" />
                                <input type="number" class="number-bodydev" name="attr_skill_bodydev_2rank5" min="0" max="10" value="0" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_bodydev_rank_bonus" value="0" readonly/>
                            <div class="text-center">CO</div>
                            <input type="number" class="number-autocalc" name="attr_skill_bodydev_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_bodydev_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_bodydev_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_bodydev_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_bodydev_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_bodydev_spec2_bonus" value="5" readonly/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_bodydev_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Special">SP</div>
                            <div></div>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Base Spells</div>
                            <div class="grid-skill-ad-bg-ranks"></div>
                            <div class="grid-5ranks"></div>
                            <div class="grid-2ranks"></div>
                            <div class="text-center">xx</div>
                            <div class="text-center">xx</div>
                            <div class="text-center">xx</div>
                            <input type="number" class="number-stat" name="attr_skill_basespells_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_basespells_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_basespells_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_basespells_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_basespells_spec2_bonus" value="0"/>
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_basespells_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive Bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_basespells_ob" title="Base Spells Attack Roll" value="@{wtype} &{template:spellattack} {{type=Base Spells}} {{character=@{character_name}}} {{subtags=Spell Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|8} + @{skill_basespells_total_bonus}[Base Spells OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Lead/Influence</div>
                            <div class="grid-skill-ad-bg-ranks"></div>
                            <div class="grid-5ranks"></div>
                            <div class="grid-2ranks"></div>
                            <div class="text-center">xx</div>
                            <div class="text-center">PR</div>
                            <input type="number" class="number-autocalc" name="attr_skill_leadership_stat_bonus" value="0" readonly />
                            <div class="text-right">xx</div>
                            <input type="number" class="number-autocalc" name="attr_skill_leadership_race_bonus" value="0">
                            <input type="number" class="number-stat" name="attr_skill_leadership_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_leadership_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_leadership_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_leadership_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_leadership_sm" title="Leadership Static Maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Leadership}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_leadership_total_bonus}[Leadership Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                    </div>
                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">Martial Arts Skills</div>
                            <input type="number" class="number-bonus" name="attr_martialarts_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                            <div class="text">/LEVEL</div>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">Striking</div>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">&nbsp;&nbsp;Novice</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_novicestriking_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_novicestriking_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicestriking_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_novicestriking_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_novicestriking_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_novicestriking_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_novicestriking_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_novicestriking_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_novicestriking_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_novicestriking_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_novicestriking_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_novicestriking_ob" title="Novice Striking Attack Roll" value="@{wtype} &{template:attack} {{type=Novice Striking}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_novicestriking_total_bonus}[Novice Striking OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">&nbsp;&nbsp;Standard</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_standardstriking_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_standardstriking_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardstriking_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_standardstriking_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_standardstriking_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_standardstriking_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_standardstriking_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_standardstriking_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_standardstriking_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_standardstriking_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_standardstriking_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_standardstriking_ob" title="Standard Striking Attack Roll" value="@{wtype} &{template:attack} {{type=Standard Striking}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_standardstriking_total_bonus}[Standard Striking OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">&nbsp;&nbsp;Expert</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_expertstriking_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_expertstriking_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertstriking_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_expertstriking_rank_bonus" value="0" readonly/>
                            <div class="text-center">ST</div>
                            <input type="number" class="number-autocalc" name="attr_skill_expertstriking_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_expertstriking_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_expertstriking_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_expertstriking_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_expertstriking_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_expertstriking_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_expertstriking_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_expertstriking_ob" title="Expert Striking Attack Roll" value="@{wtype} &{template:attack} {{type=Expert Striking}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_expertstriking_total_bonus}[Expert Striking OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">Sweeps</div>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">&nbsp;&nbsp;Novice</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_novicesweeps_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_novicesweeps_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_novicesweeps_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_novicesweeps_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_novicesweeps_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_novicesweeps_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_novicesweeps_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_novicesweeps_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_novicesweeps_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_novicesweeps_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_novicesweeps_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_novicesweeps_ob" title="Novice Sweeps Attack Roll" value="@{wtype} &{template:attack} {{type=Novice Sweeps}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_novicesweeps_total_bonus}[Novice Sweeps OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">&nbsp;&nbsp;Standard</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_standardsweeps_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_standardsweeps_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_standardsweeps_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_standardsweeps_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_standardsweeps_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_standardsweeps_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_standardsweeps_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_standardsweeps_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_standardsweeps_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_standardsweeps_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_standardsweeps_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_standardsweeps_ob" title="Standard Sweeps Attack Roll" value="@{wtype} &{template:attack} {{type=Standard Sweeps}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_standardsweeps_total_bonus}[Standard Sweeps OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">&nbsp;&nbsp;Expert</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_expertsweeps_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_expertsweeps_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_expertsweeps_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_expertsweeps_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_expertsweeps_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_expertsweeps_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_expertsweeps_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_expertsweeps_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_expertsweeps_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_expertsweeps_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_expertsweeps_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">OB</div>
                            <button type="roll" class="roller-button" name="attr_expertsweeps_ob" title="Expert Sweeps Attack Roll" value="@{wtype} &{template:attack} {{type=Expert Sweeps}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_expertsweeps_total_bonus}[Expert Sweeps OB] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{total_hit_loss_penalty}[Hit Loss] + ?{Modifier|0}[Manual Modifier]]]}}  {{primary_critical=[[1d100]]}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type= }} {{fumble_roll=[[1d100]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">Defense</div>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header grid-bodydev-header">
                                <div>&nbsp;&nbsp;Adrenal</div>
                                <input type="number" class="number-bonus" name="attr_adrenaldefense_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                                <div>/lv</div>
                            </div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_adrenaldefense_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_adrenaldefense_display_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank1" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_adrenaldefense_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_adrenaldefense_rank_bonus" value="0" readonly/>
                            <div class="text-center">xx</div>
                            <div class="text-center">xx</div>
                            <input type="number" class="number-stat" name="attr_skill_adrenaldefense_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_adrenaldefense_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_adrenaldefense_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_adrenaldefense_spec1_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_adrenaldefense_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_adrenaldefense_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Offensive bonus">SP</div>
                        </div>
                    </div>
                </div>

                <div class="skills-section skills-secondary">
                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">Standard Skills</div>
                            <div class="grid-auto-columns">
                                <div class="text-label">Ranks:</div>
                                <input type="number" class="number-autocalc" name="attr_secondary_profession_development" value="0" title="Number of rank points per level.  To raise a skill 1 rank = 1 point, 2 ranks = 3 points">
                                <div class="text">/LEVEL</div>
                            </div>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">Acrobatics</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_acrobatics_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_acrobatics_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acrobatics_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_acrobatics_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_acrobatics_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_acrobatics_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_acrobatics_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_acrobatics_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_acrobatics_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_acrobatics_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_acrobatics_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">MM</div>
                            <button type="roll" class="roller-button" name="attr_acrobatics_mm" title="Acrobatics Moving Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Acrobatics}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_acrobatics_total_bonus}[Acrobatics] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">Acting</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_acting_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_acting_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_acting_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_acting_rank_bonus" value="0" readonly/>
                            <div class="text-center">PR</div>
                            <input type="number" class="number-autocalc" name="attr_skill_acting_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_acting_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_acting_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_acting_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_acting_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_acting_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_acting_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_acting_sm" title="Acting static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Acting}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_acting_total_bonus}[Acting Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                        <div class="grid-skill-row">
                            <div class="text-row-header">Animal Handling</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_animalhandling_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_animalhandling_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_animalhandling_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_animalhandling_rank_bonus" value="0" readonly/>
                            <div class="text-center">PR</div>
                            <input type="number" class="number-autocalc" name="attr_skill_animalhandling_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_animalhandling_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_animalhandling_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_animalhandling_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_animalhandling_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_animalhandling_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_animalhandling_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_animalhandling_sm" title="Animal Handling static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Animal Handling}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_animalhandling_total_bonus}[Animal Handling Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row grid-skill-row-bg">
                            <div class="text-row-header">Appraisal</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_appraisal_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_appraisal_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_appraisal_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_appraisal_rank_bonus" value="0" readonly/>
                            <div class="text-center">IG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_appraisal_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_appraisal_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_appraisal_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_appraisal_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_appraisal_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_appraisal_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_appraisal_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_appraisal_sm" title="Appraisal static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Appraisal}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_appraisal_total_bonus}[Appraisal Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row grid-skill-row-bg">
                            <div class="text-row-header">Boat Handling</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_boathandling_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_boathandling_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_boathandling_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_boathandling_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_boathandling_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_boathandling_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_boathandling_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_boathandling_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_boathandling_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_boathandling_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_boathandling_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_boathandling_sm" title="Boat Handling static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Boat Handling}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_boathandling_total_bonus}[Boat Handling Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row grid-skill-row-bg">
                            <div class="text-row-header">Caving</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_caving_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_caving_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_caving_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_caving_rank_bonus" value="0" readonly/>
                            <div class="text-center">IG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_caving_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_caving_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_caving_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_caving_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_caving_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_caving_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_caving_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_caving_sm" title="Caving static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Caving}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_caving_total_bonus}[Caving Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Contortions</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_contortions_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_contortions_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_contortions_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_contortions_rank_bonus" value="0" readonly/>
                            <div class="text-center">AG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_contortions_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_contortions_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_contortions_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_contortions_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_contortions_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_contortions_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_contortions_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">MM</div>
                            <button type="roll" class="roller-button" name="attr_contortions_mm" title="Contortions Moving Maneuver" value="@{wtype} &{template:movingmaneuver} {{type=Contortions}} {{character=@{character_name}}} {{subtags=Moving Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_contortions_total_bonus}[Contortions] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Cookery</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_cookery_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_cookery_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_cookery_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_cookery_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_cookery_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_cookery_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_cookery_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_cookery_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_cookery_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_cookery_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_cookery_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_cookery_sm" title="Cookery static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Cookery}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_cookery_total_bonus}[Cookery Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">First Aid</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_firstaid_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_firstaid_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_firstaid_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_firstaid_rank_bonus" value="0" readonly/>
                            <div class="text-center">IG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_firstaid_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_firstaid_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_firstaid_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_firstaid_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_firstaid_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_firstaid_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_firstaid_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_firstaid_sm" title="First Aid static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=First Aid}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_firstaid_total_bonus}[First Aid Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row grid-skill-row-bg">
                            <div class="text-row-header">Foraging</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_foraging_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_foraging_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_foraging_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_foraging_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_foraging_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_foraging_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_foraging_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_foraging_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_foraging_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_foraging_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_foraging_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_foraging_sm" title="Foraging static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Foraging}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_foraging_total_bonus}[Foraging Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row grid-skill-row-bg">
                            <div class="text-row-header">Gambling</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_gambling_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_gambling_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_gambling_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_gambling_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_gambling_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_gambling_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_gambling_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_gambling_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_gambling_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_gambling_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_gambling_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_gambling_sm" title="Gambling static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Gambling}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_gambling_total_bonus}[Gambling Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row grid-skill-row-bg">
                            <div class="text-row-header">Meditation</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_meditation_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_meditation_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_meditation_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_meditation_rank_bonus" value="0" readonly/>
                            <div class="text-center">PR</div>
                            <input type="number" class="number-autocalc" name="attr_skill_meditation_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_meditation_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_meditation_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_meditation_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_meditation_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_meditation_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_meditation_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_meditation_sm" title="Meditation static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Meditation}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_meditation_total_bonus}[Meditation Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Rope Mastery</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_ropemastery_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_ropemastery_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_ropemastery_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_ropemastery_rank_bonus" value="0" readonly/>
                            <div class="text-center">IG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_ropemastery_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_ropemastery_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_ropemastery_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_ropemastery_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_ropemastery_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_ropemastery_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_ropemastery_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_ropemastery_sm" title="Rope Mastery static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Rope Mastery}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_ropemastery_total_bonus}[Rope Mastery Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Signaling</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_signaling_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_signaling_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_signaling_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_signaling_rank_bonus" value="0" readonly/>
                            <div class="text-center">IG</div>
                            <input type="number" class="number-autocalc" name="attr_skill_signaling_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_signaling_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_signaling_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_signaling_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_signaling_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_signaling_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_signaling_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_signaling_sm" title="Signaling static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Signaling}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_signaling_total_bonus}[Signaling Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row">
                            <div class="text-row-header">Sky Watching</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_skywatching_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_skywatching_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_skywatching_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_skywatching_rank_bonus" value="0" readonly/>
                            <div class="text-center">IT</div>
                            <input type="number" class="number-autocalc" name="attr_skill_skywatching_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_skywatching_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_skywatching_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_skywatching_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_skywatching_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_skywatching_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_skywatching_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_skywatching_sm" title="Sky Watching static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Sky Watching}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_skywatching_total_bonus}[Sky Watching Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>

                        <div class="grid-skill-row grid-skill-row-bg">
                            <div class="text-row-header">Trickery</div>
                            <div class="grid-skill-ad-bg-ranks">
                                <input type="number" class="number-autocalc" name="attr_skill_trickery_ad_ranks" value="0" readonly/>
                                <div class="text">/</div>
                                <input type="number" class="number-autocalc-left" name="attr_skill_trickery_bg_ranks" value="0" readonly/>
                            </div>
                            <div class="grid-5ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank1" value="30" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank2" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank3" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank4" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank5" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank6" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank7" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank8" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank9" value="5" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_5rank10" value="5" />
                            </div>
                            <div class="grid-2ranks">
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_2rank1" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_2rank2" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_2rank3" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_2rank4" value="2" />
                                <input class="rank-box" type="checkbox" name="attr_skill_trickery_2rank5" value="2" />
                            </div>
                            <input type="number" class="number-autocalc" name="attr_skill_trickery_rank_bonus" value="0" readonly/>
                            <div class="text-center">PR</div>
                            <input type="number" class="number-autocalc" name="attr_skill_trickery_stat_bonus" value="0" readonly/>
                            <input type="number" class="number-stat" name="attr_skill_trickery_prof_bonus" value="0"/>
                            <input type="number" class="number-autocalc" name="attr_skill_trickery_race_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_trickery_item_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_trickery_spec1_bonus" value="0"/>
                            <input type="number" class="number-stat" name="attr_skill_trickery_spec2_bonus" value="0" />
                            <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_trickery_total_bonus" value="0" readonly/>
                            <div class="text-center" title="Static maneuver">SM</div>
                            <button type="roll" class="roller-button" name="attr_trickery_sm" title="Trickery static maneuver" value="@{wtype} &{template:staticmaneuver} {{type=Trickery}} {{character=@{character_name}}} {{subtags=Static Maneuver}} {{roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_trickery_total_bonus}[Trickery Bonus] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                        </div>
                        <!--TODO Finish Secondary Skills-->
                    </div>
                    <div class="box-border">
                        <div class="grid-skill-section-header">
                            <div class="text-skill-heading">Other Skills</div>
                        </div>
                        <fieldset class="repeating_secondaryskills">
                            <div class="grid-skill-row">
                                <div class="text-row-header">
                                    <input class="text-row-header text-secondary-skill-name" type="text" name="attr_skill_secondaryskill_name"/>
                                </div>
                                <div class="grid-skill-ad-bg-ranks">
                                </div>
                                <div class="grid-5ranks">
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank1" value="30" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank2" value="5" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank3" value="5" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank4" value="5" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank5" value="5" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank6" value="5" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank7" value="5" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank8" value="5" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank9" value="5" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_5rank10" value="5" />
                                    <input type="hidden" name="attr_skill_secondaryskill_5sum_ranks" value="(-25 + @{skill_secondaryskill_5rank1} + @{skill_secondaryskill_5rank2} + @{skill_secondaryskill_5rank3} + @{skill_secondaryskill_5rank4} + @{skill_secondaryskill_5rank5} + @{skill_secondaryskill_5rank6} + @{skill_secondaryskill_5rank7} + @{skill_secondaryskill_5rank8} + @{skill_secondaryskill_5rank9} + @{skill_secondaryskill_5rank10})"/>
                                </div>
                                <div class="grid-2ranks">
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_2rank1" value="2" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_2rank2" value="2" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_2rank3" value="2" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_2rank4" value="2" />
                                    <input class="rank-box" type="checkbox" name="attr_skill_secondaryskill_2rank5" value="2" />
                                    <input type="hidden" name="attr_skill_secondaryskill_2sum_ranks" value="(@{skill_secondaryskill_2rank1} + @{skill_secondaryskill_2rank2} + @{skill_secondaryskill_2rank3} + @{skill_secondaryskill_2rank4} + @{skill_secondaryskill_2rank5})"/>
                                </div>
                                <input type="number" class="number-autocalc" name="attr_skill_secondaryskill_rank_bonus" disabled value="(@{skill_secondaryskill_5sum_ranks} + @{skill_secondaryskill_2sum_ranks})"/>
                                <select name="attr_skill_secondaryskill_stat" class="select-secondaryskill-stat">
                                    <option value="@{stat_st_total_bonus}">ST</option>
                                    <option value="@{stat_ag_total_bonus}">AG</option>
                                    <option value="@{stat_co_total_bonus}">CO</option>
                                    <option value="@{stat_ig_total_bonus}">IG</option>
                                    <option value="@{stat_it_total_bonus}">IT</option>
                                    <option value="@{stat_pr_total_bonus}">PR</option>
                                </select>
                                <input type="number" class="number-autocalc" name="attr_skill_secondaryskill_stat_bonus" value="@{skill_secondaryskill_stat}" disabled />
                                <div class="text-center">xx</div>
                                <input type="number" class="number-autocalc" name="attr_skill_secondaryskill_race_bonus" value="0" />
                                <input type="number" class="number-autocalc" name="attr_skill_secondaryskill_item_bonus" value="0" />
                                <input type="number" class="number-autocalc" name="attr_skill_secondaryskill_spec1_bonus" value="0" />
                                <input type="number" class="number-autocalc" name="attr_skill_secondaryskill_spec2_bonus" value="0" />
                                <input type="number" class="number-autocalc number-autocalc-total" name="attr_skill_secondaryskill_total_bonus" disabled value="(@{skill_secondaryskill_rank_bonus}+@{skill_secondaryskill_stat_bonus}+@{skill_secondaryskill_race_bonus}+@{skill_secondaryskill_item_bonus}+@{skill_secondaryskill_spec1_bonus}+@{skill_secondaryskill_spec2_bonus})" />
                                <select name="attr_skill_secondaryskill_type" class="select-secondaryskill-type" title="SM - static maneuver, MM - moving maneuver, SP - special (i.e. both)">
                                    <option value="staticmaneuver">SM</option>
                                    <option value="movingmaneuver">MM</option>
                                    <option value="special">SP</option>
                                </select>
                                <button type="roll" class="roller-button" name="attr_secondaryskill_roll" title="@{skill_secondaryskill_name} maneuver" value="@{wtype} &{template:secondaryskill} {{type=@{skill_secondaryskill_name}}} {{character=@{character_name}}} {{@{skill_secondaryskill_type}=1}} {{mm_roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_secondaryskill_total_bonus}[@{skill_secondaryskill_name}] + @{activity_penalty}[Activity] + @{status_stunned}[Stunned] + @{status_down}[Down] + @{status_onelimbout}[One Limb Out] + @{encumbrance_penalty}[Encumbrance] + @{leggreaves_worn} * @{leggreaves_penalty}[Leg Greaves]]]}} {{sm_roll=[[1d100!>95cs>95cf<?{Fumble|5} + @{skill_secondaryskill_total_bonus}[@{skill_secondaryskill_name}] + @{activity_penalty}[Activity] + ?{Modifier|0}[Manual Modifier]]]}} {{underflow=[[1d100!>95 * -1]]}}">T</button>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content tab-content-spells">
            <div class="grid-spells-top">
                <div class="grid-auto-columns">
                    <div class="text-label">Realm:</div>
                    <span name="attr_realm"></span>
                </div>
                <div class="grid-auto-columns">
                    <div class="text-label" title="The available number of power points is based on stats (IG or IT) and level.">Power Points:</div>
                    <input class="number-bonus" type="number" name="attr_power_points" value="0" />
                    <div class="text">/</div>
                    <input class="number-autocalc-left" type="number" name="attr_power_points_max" value="0" readonly />
                </div>
                <div class="grid-auto-columns">
                    <div class="text-label" title="Multiplies the power points available per day">PP Multiplier:</div>
                    <input class="number-bonus" type="number" name="attr_power_point_multiplier" value="1" min="1" />
                </div>
                <div class="grid-auto-columns">
                    <div class="text-label" title="Each adder allows casting an extra spell (any level) per day">Spell Adders:</div>
                    <input class="number-bonus" type="number" name="attr_temp_spell_adders" value="0" /> 
                    <div class="text">/</div>
                    <input class="number-bonus" type="number" name="attr_total_spell_adders" value="0" />
                </div>
            </div>

            <div class="grid-spells-top">
                <div class="grid-auto-columns">
                    <div class="text-label">Spell List Ranks:</div>
                    <input type="number" class="number-bonus" name="attr_spell_profession_development" value="0" title="Number of rank points per level.  For each point spend learning a spell list, your chance to learn that list increases by 20%">
                    <div class="text">/LEVEL</div>
                </div>
                <div class="grid-auto-columns">
                    <div class="text-label">Adolescent Chance:</div>
                    <input type="number" class="number-bonus" name="attr_race_spell_ad_ranks" value="0" title="Percent chance you have at learning a spell list during adolescence.">
                    <div class="text">%&nbsp;</div>
                    <button type="roll" class="roller-button" name="attr_spelllist_ad_learn" title="Learn Spell List" value="@{wtype} &{template:spelllistlearn} {{type=Spell List}} {{character=@{character_name}}} {{roll=[[1d100cs<@{race_spell_ad_ranks}cf>@{race_spell_ad_ranks}]]}} {{chance=[[@{race_spell_ad_ranks}]]}}">T</button>
                </div>
            </div>

            <fieldset class="repeating_spellists">  
                <div class="box-border">
                    <div class="grid-spell-list-header">
                        <div class="grid-auto-columns">
                            <div class="text-label" title="">Name:</div>
                            <input type="text" name="attr_spelllist_name" class="spelllist-name" spellcheck="false"/>
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label" title="">Collection:</div>
                            <select name="attr_spelllist_section" class="text-field-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="animists_lists">Animists' Spell Lists</option>
                                <option value="bards_lists">Bards' Spell Lists</option>
                                <option value="mages_lists">Mages' Spell Lists</option>
                                <option value="channeling_lists">Open Channeling Spell Lists</option>
                                <option value="essence_lists">Open Essence Spell Lists</option>
                                <option value="rangers_lists">Rangers' Spell Lists</option>
                            </select>
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label" title="Chance of acquiring the spell list">Chance:</div>
                            <input type="number" name="attr_spellist_chance" class="number-bonus" value="0" spellcheck="false"/>
                            <div class="text">%&nbsp;</div>
                            <button type="roll" class="roller-button" name="attr_spelllist_learn" title="Learn Spell List" value="@{wtype} &{template:spelllistlearn} {{type=@{spelllist_name}}} {{character=@{character_name}}} {{roll=[[1d100cs<@{spellist_chance}cf>@{spellist_chance}]]}} {{chance=[[@{spellist_chance}]]}}">T</button>
                        </div>
                    </div>
                    <input class="visibility-toggle" name="attr_spell_details_toggle" type="checkbox"/><span></span>
                    <div class="togglable-visibility grid-spell-list">
                        <div class="grid-spell-list-details">
                            <div class="text-column-header">Lvl</div>
                            <div class="text-column-header">Name</div>
                            <div class="text-column-header">Area</div>
                            <div class="text-column-header">Duration</div>
                            <div class="text-column-header">Range</div>
                            <div class="text-column-header">Class</div>
                            <div class="text-column-header">Instant</div>
                            <div class="text-column-header">Cast</div>
                        </div>

                        <div class="grid-spell-list-details">
                            <div class="text">1)</div>
                            <input type="text" class="text-spell-name" name="attr_spell1_name" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell1_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell1_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell1_range" spellcheck="false"/>
                            <select name="attr_spell1_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell1_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell1_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell1_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=1}} {{area=@{spell1_area}}} {{duration=@{spell1_duration}}} {{range=@{spell1_range}}} {{instant=@{spell1_instant}}} {{description=@{spell1_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell1_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">2)</div>
                            <input type="text" class="text-spell-name" name="attr_spell2_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell2_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell2_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell2_range" spellcheck="false"/>
                            <select name="attr_spell2_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell2_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell2_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell2_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=2}} {{area=@{spell2_area}}} {{duration=@{spell2_duration}}} {{range=@{spell2_range}}} {{instant=@{spell2_instant}}} {{description=@{spell2_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell2_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">3)</div>
                            <input type="text" class="text-spell-name" name="attr_spell3_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell3_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell3_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell3_range" spellcheck="false"/>
                            <select name="attr_spell3_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell3_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell3_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell3_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=3}} {{area=@{spell3_area}}} {{duration=@{spell3_duration}}} {{range=@{spell3_range}}} {{instant=@{spell3_instant}}} {{description=@{spell3_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell3_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">4)</div>
                            <input type="text" class="text-spell-name" name="attr_spell4_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell4_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell4_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell4_range" spellcheck="false"/>
                            <select name="attr_spell4_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell4_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell4_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell4_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=4}} {{area=@{spell4_area}}} {{duration=@{spell4_duration}}} {{range=@{spell4_range}}} {{instant=@{spell4_instant}}} {{description=@{spell4_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell4_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">5)</div>
                            <input type="text" class="text-spell-name" name="attr_spell5_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell5_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell5_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell5_range" spellcheck="false"/>
                            <select name="attr_spell5_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell5_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell5_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell5_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=5}} {{area=@{spell5_area}}} {{duration=@{spell5_duration}}} {{range=@{spell5_range}}} {{instant=@{spell5_instant}}} {{description=@{spell5_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell5_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">6)</div>
                            <input type="text" class="text-spell-name" name="attr_spell6_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell6_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell6_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell6_range" spellcheck="false"/>
                            <select name="attr_spell6_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell6_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell6_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell6_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=6}} {{area=@{spell6_area}}} {{duration=@{spell6_duration}}} {{range=@{spell6_range}}} {{instant=@{spell6_instant}}} {{description=@{spell6_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell6_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">7)</div>
                            <input type="text" class="text-spell-name" name="attr_spell7_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell7_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell7_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell7_range" spellcheck="false"/>
                            <select name="attr_spell7_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell7_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell7_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell7_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=7}} {{area=@{spell7_area}}} {{duration=@{spell7_duration}}} {{range=@{spell7_range}}} {{instant=@{spell7_instant}}} {{description=@{spell7_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell7_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">8)</div>
                            <input type="text" class="text-spell-name" name="attr_spell8_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell8_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell8_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell8_range" spellcheck="false"/>
                            <select name="attr_spell8_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell8_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell8_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell8_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=8}} {{area=@{spell8_area}}} {{duration=@{spell8_duration}}} {{range=@{spell8_range}}} {{instant=@{spell8_instant}}} {{description=@{spell8_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell8_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">9)</div>
                            <input type="text" class="text-spell-name" name="attr_spell9_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell9_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell9_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell9_range" spellcheck="false"/>
                            <select name="attr_spell9_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell9_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell9_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell9_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=9}} {{area=@{spell9_area}}} {{duration=@{spell9_duration}}} {{range=@{spell9_range}}} {{instant=@{spell9_instant}}} {{description=@{spell9_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell9_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                        <div class="grid-spell-list-details">
                            <div class="text">10)</div>
                            <input type="text" class="text-spell-name" name="attr_spell10_name" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell10_area" spellcheck="false"/>
                            <input type="text" class="text-field-medium" name="attr_spell10_duration" spellcheck="false"/>
                            <input type="text" class="text-field-short" name="attr_spell10_range" spellcheck="false"/>
                            <select name="attr_spell10_class" class="select-spell-class">
                                <option value="none" selected="selected">--</option>
                                <option value="elemental">Elemental</option>
                                <option value="force">Force</option>
                                <option value="informational">Informational</option>
                                <option value="passive">Passive</option>
                                <option value="utility">Utility</option>
                            </select>
                            <input type="checkbox" class="checkbox-center" name="attr_spell10_instant" value="Yes" />
                            <button type="roll" class="roller-button" name="attr_spell10_cast" title="Cast Spell" value="@{wtype} &{template:spellcast} {{action=?{Cast or Prepare?|Cast,Casting Spell|Prepare,Preparing Spell}}} {{name=@{spell10_name}}} {{character=@{character_name}}} {{roll=[[1d100]]}} {{level=10}} {{area=@{spell10_area}}} {{duration=@{spell10_duration}}} {{range=@{spell10_range}}} {{instant=@{spell10_instant}}} {{description=@{spell10_desc}}}">T</button>
                        </div>
                        <textarea class="textarea-spell-description" name="attr_spell10_desc" placeholder="Spell Description" spellcheck="false"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="tab-content tab-content-equipment">
            <input type="hidden" name="attr_item_total_weight" value="0"/>
            <input type="hidden" name="attr_item_total_encumbrance" value="0"/>

            <div class="box-border">
                <div class="grid-equipment-top">
                    <div class="grid-coins">
                        <div class="grid-auto-columns">
                            <div class="text-label">Tin:</div>
                            <input class="number-bonus" type="number" name="attr_coins_tin" value="0" min="0" />
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label">Copper:</div>
                            <input class="number-bonus" type="number" name="attr_coins_copper" value="0" min="0" />
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label">Bronze:</div>
                            <input class="number-bonus" type="number" name="attr_coins_bronze" value="0" min="0" />
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label">Silver:</div>
                            <input class="number-bonus" type="number" name="attr_coins_silver" value="0" min="0" />
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label">Gold:</div>
                            <input class="number-bonus" type="number" name="attr_coins_gold" value="0" min="0" />
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label">Mithril:</div>
                            <input class="number-bonus" type="number" name="attr_coins_mithril" value="0" min="0" />
                        </div>
                        <input type="hidden" name="attr_coins_total" value="(@{coins_tin} + @{coins_copper} + @{coins_bronze} + @{coins_silver} + @{coins_gold} + @{coins_mithril})" />
                        <input type="hidden" name="attr_coins_total_weight" value="(@{coins_total}/64)" />
                    </div>
                    <div class="grid-equipment-weight">
                        <div class="grid-auto-columns">
                            <div class="text-label" title="Total weight of items and coins">Total Weight:</div>
                            <input type="number" class="number-autocalc" name="attr_equipment_total_weight" value="round(@{item_total_weight} + @{coins_total_weight})" disabled />
                            <div class="text">lbs</div>
                        </div>
                        <div class="grid-auto-columns">
                            <div class="text-label" title="Total encumbering weight of items and coins">Encumbering Weight:</div>
                            <input type="number" class="number-autocalc" name="attr_equipment_total_encumbrance" value="round(@{item_total_encumbrance} + @{coins_total_weight})" disabled />
                            <div class="text">lbs</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box-border">
                <div class="text-section-heading">Weapons</div>
                <div class="grid-weapon-list">
                    <div>
                        <div class="grid-weapon">
                            <div class="text-column-header">Weapon</div>
                            <div class="text-column-header" title="Weight in pounds">Wgt</div>
                            <div class="text-column-header">Range</div>
                            <div class="text-column-header">Melee Attack</div>
                            <div class="text-column-header">Ranged Attack</div>
                        </div>
                        <fieldset class="repeating_weapons">
                            <div class="grid-weapon">
                                <input type="text" class="text-field-long" name="attr_weapon_name"/>
                                <input class="number-stat" type="number" name="attr_weapon_weight" value="0" />
                                <input class="number-stat" type="number" name="attr_weapon_range" min="0" value="0" title="This is the effective range of your weapon." />
                                <div class="grid-auto-columns">
                                    <input type="number" class="number-stat" name="attr_weapon_melee_bonus"/>
                                    <div class="text-label">OB</div>
                                    <button type="roll" class="roller-button" name="attr_weapon_melee_roll" title="Weapon Melee Roll" value="@{wtype} &{template:meleeattack} {{type=@{weapon_name}}} {{character=@{character_name}}} {{subtags=Melee Attack}} {{roll=[[1d100!>95cs>95cf<[[@{weapon_fumble}]] + @{weapon_melee_bonus}[@{weapon_melee_skill}] + @{weapon_craft_bonus}[Craft] + @{weapon_magic_bonus}[Magic] + @{total_hit_loss_penalty}[Hit Loss] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] - @{weapon_parry}[Parry] + @{weapon_position}[Flank/Back] + @{weapon_surprise}[Surprise] + @{weapon_stunned}[Stun/Down] + @{weapon_change}[Equipment Change] - [[floor((@{weapon_movement}-10)/10)*10]][Movement] + ?{Modifier|0}[Modifier]]]}} {{fumble_roll=[[1d100]]}} {{fumble_crit=[[1d100]]}} {{fumble_crit_type=@{weapon_fumble_critical}}} {{underflow=[[1d100!>95 * -1]]}} {{primary_critical=[[1d100]] @{weapon_primary_critical}}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type=@{weapon_secondary_critical}}} {{noleather=[[@{weapon_noleather_bonus}]]}} {{chainplate=[[@{weapon_chainplate_bonus}]]}} {{parry=[[@{weapon_parry}]]}}">T</button>
                                </div>
                                <div class="grid-auto-columns">
                                    <input type="number" class="number-stat" name="attr_weapon_ranged_bonus"/>
                                    <div class="text-label">OB</div>
                                    <button type="roll" class="roller-button" name="attr_weapon_ranged_roll" title="Weapon Ranged Roll" value="@{wtype} &{template:rangedattack} {{type=@{weapon_name}}} {{character=@{character_name}}} {{subtags=Ranged Attack}} {{roll=[[1d100!>95cs>95cf<[[@{weapon_fumble}]] + @{weapon_ranged_bonus}[@{weapon_ranged_skill}] + @{weapon_craft_bonus}[Craft] + @{weapon_magic_bonus}[Magic] + @{total_hit_loss_penalty}[Hit Loss] + @{activity_penalty}[Activity] + @{armgreaves_worn} * @{armgreaves_penalty}[Arm Greaves] + @{weapon_not_loaded} * @{weapon_reload_penalty}[Reload] + @{weapon_surprise}[Surprise] + @{weapon_stunned}[Stun/Down] + @{weapon_change}[Equipment Change] - [[floor((@{weapon_movement}-10)/10)*10]][Movement] + ?{Modifier|0}[Modifier]]]}} {{fumble_roll=[[1d100]]}} {{fumble_crit=[[1d100]]}} {{fumble_crit_type=@{weapon_fumble_critical}}} {{underflow=[[1d100!>95 * -1]]}} {{primary_critical=[[1d100]] @{weapon_primary_critical}}} {{secondary_critical=[[1d100]]}} {{secondary_critical_type=@{weapon_secondary_critical}}} {{range=@{weapon_range}}}">T</button>
                                </div>
                            </div>
                            <input class="visibility-toggle" name="attr_weapon_details_toggle" type="checkbox"/><span></span>
                            <div class="togglable-visibility weapon-details">
                                <div class="box-border">
                                    <div class="grid-auto-columns">
                                        <div class="text-label">Template:</div>
                                        <select class="select-weapon" name="attr_weapon_template">
                                            <option value="" selected="selected">Custom</option>
                                            <optgroup label="1H Edged">
                                                <option value="Bastard Sword (1H)">Bastard Sword (1H)</option>
                                                <option value="Broad Sword">Broad Sword</option>
                                                <option value="Dagger">Dagger</option>
                                                <option value="Double Axe (1H)">Double Axe (1H)</option>
                                                <option value="Handaxe">Handaxe</option>
                                                <option value="Scimitar">Scimitar</option>
                                                <option value="Short Sword">Short Sword</option>
                                            </optgroup>
                                            <optgroup label="1H Concussion">
                                                <option value="Club">Club</option>
                                                <option value="Mace">Mace</option>
                                                <option value="Morning Star">Morning Star</option>
                                                <option value="Net">Net</option>
                                                <option value="War Hammer">War Hammer</option>
                                                <option value="Whip">Whip</option>
                                            </optgroup>
                                            <optgroup label="1 Handed Pole Arms">
                                                <option value="Javelin">Javelin</option>
                                                <option value="Spear">Spear</option>
                                            </optgroup>
                                            <optgroup label="2 Handed Pole Arms">
                                                <option value="Mounted Lance">Mounted Lance</option>
                                                <option value="Halbard">Halbard</option>
                                            </optgroup>
                                            <optgroup label="2 Handed Weapons">
                                                <option value="Bastard Sword (2H)">Bastard Sword (2H)</option>
                                                <option value="Battle Axe">Battle Axe</option>
                                                <option value="Double Axe (2H)">Double Axe (2H)</option>
                                                <option value="Flail">Flail</option>
                                                <option value="Quarterstaff">Quarterstaff</option>
                                                <option value="Great Sword">Great Sword</option>
                                            </optgroup>
                                            <optgroup label="Missile">
                                                <option value="Bola">Bola</option>
                                                <option value="Composite Bow">Composite Bow</option>
                                                <option value="Crossbow">Crossbow</option>
                                                <option value="Long Bow">Long Bow</option>
                                                <option value="Short Bow">Short Bow</option>
                                                <option value="Sling">Sling</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                    <div class="grid-auto-columns">
                                        <div class="text-row-header">Fumble,&nbsp;</div>
                                        <div class="text">High Range:</div>
                                        <input class="text-weapon-stat" type="number" name="attr_weapon_fumble" min="0" value="0" />
                                        <div class="text">Critical:</div>
                                        <input class="text-weapon-critical" type="text" name="attr_weapon_fumble_critical" spellcheck="false"/>
                                    </div>
                                    <div class="grid-auto-columns">
                                        <div class="text-row-header">Criticals,&nbsp;</div>
                                        <div class="text">Primary:</div>
                                        <input class="text-weapon-critical" type="text" name="attr_weapon_primary_critical" spellcheck="false"/>
                                        <div class="text">Secondary:</div>
                                        <input class="text-weapon-critical" type="text" name="attr_weapon_secondary_critical" spellcheck="false"/>
                                    </div>
                                    <div class="grid-auto-columns">
                                        <div class="text-row-header">Melee Info,&nbsp;</div>
                                        <div class="text">Attack Type:</div>
                                        <select class="select-weapon-skill" name="attr_weapon_melee_skill">
                                            <option value="" selected="selected">None</option>
                                            <option value="1H Edged">1H Edged</option>
                                            <option value="1H Concussion">1H Concussion</option>
                                            <option value="2 Handed">2 Handed</option>
                                            <option value="Polearm">Polearm</option>
                                        </select>
                                    </div>
                                    <div class="grid-auto-columns">
                                        <div class="text-row-header">Range Info,&nbsp;</div>
                                        <div class="text">Range Attack Type:</div>
                                        <select class="select-weapon-skill" name="attr_weapon_ranged_skill">
                                            <option value="" selected="selected">None</option>
                                            <option value="Missile">Missile</option>
                                            <option value="Thrown">Thrown</option>
                                        </select>
                                        <div class="text">Reload Rounds:</div>
                                        <input class="text-weapon-stat" type="number" name="attr_weapon_reload_rounds" min="0" value="0" />
                                        <div class="text">Reload Penalty:</div>
                                        <input class="text-weapon-stat" type="number" name="attr_weapon_reload_penalty" max="0" value="0" />
                                    </div>
                                    <div class="grid-auto-columns">
                                        <div class="text-row-header">Bonuses,&nbsp;</div>
                                        <div class="text">No Armor/Leather:</div>
                                        <input class="text-weapon-stat" type="number" name="attr_weapon_noleather_bonus" value="0" />
                                        <div class="text">Chain/Plate:</div>
                                        <input class="text-weapon-stat" type="number" name="attr_weapon_chainplate_bonus" value="0" />
                                        <div class="text">Craft:</div>
                                        <input class="text-weapon-stat" type="number" name="attr_weapon_craft_bonus" value="0" />
                                        <div class="text">Magic:</div>
                                        <input class="text-weapon-stat" type="number" name="attr_weapon_magic_bonus" value="0" />
                                    </div>
                                    <div class="grid-auto-columns">
                                        <div class="text-row-header">Special:</div>
                                        <input type="text" class="text-equipment-note" name="attr_weapon_special" spellcheck="false"/>
                                    </div>
                                    <div class="grid-auto-columns">
                                        <textarea class="textarea-weapon-description" name="attr_weapon_note" placeholder="Description" spellcheck="false"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="box-border grid-weapon-adjustments">
                        <div class="text-weapon-adjustment-header">Attack Adjustments&nbsp;&nbsp;<button type="action" name="act_adjustments_reset">Clear</button></div>
                        <div class="text-right">Parry:</div>
                        <input type="number" class="number-bonus" name="attr_weapon_parry" value="0" min="0" title="Enter the amount of the OB that you want to hold back for parrying."/>
                        <div class="text-row-header">Bonuses</div>
                        <div class="text"></div>
                        <div class="text-right">Flank:</div>
                        <select class="select-weapon" name="attr_weapon_position" title="If you are in melee combat, choose the appropriate directional bonus. Ask your GM to see if they will award a flank or back bonus.">
                            <option value="0">None</option>
                            <option value="15">Flank (Melee)</option>
                            <option value="35">Rear (Melee)</option>
                        </select>
                        <div class="text-right">Surprise:</div>
                        <input type="checkbox" name="attr_weapon_surprise" value="20" title="If your opponent is surprised, check this box prior to attack."/>
                        <div class="text-right">Stunned/Down:</div>
                        <input type="checkbox" name="attr_weapon_stunned" value="20" title="If your opponent is stunned or down, check this box prior to attack."/>
                        <div class="text-row-header">Penalties</div>
                        <div class="text"></div>
                        <div class="text-right">Change Equip:</div>
                        <input type="checkbox" name="attr_weapon_change" value="-30" title="If you changed weapons or equipement prior to attack, check this box."/>
                        <div class="text-right">Movement (ft):</div>
                        <input type="number" class="number-bonus" name="attr_weapon_movement" value="0" min="0" title="If you moved prior to attack, enter the amount (in feet) of movement.  If you did not move, enter 0."/>
                        <div class="text-right">Range:</div>
                        <input type="number" class="number-bonus" name="attr_weapon_range_actual" min="0" value="0" title="Enter the range you are firing your weapon."/>
                        <div class="text-right">Not Loaded:</div>
                        <input type="checkbox" name="attr_weapon_not_loaded" value="1" title="If you did not reload your weapon before firing, check this box."/>
                    </div>
                </div>
            </div>
            <div class="box-border">
                <div class="text-section-heading">Items Carried</div>
                <div class="grid-items">
                    <div class="text-column-header">Item</div>
                    <div class="text-column-header" title="Worn items are not added to encumbrance">Worn</div>
                    <div class="text-column-header" title="Dropped item: a convenience toggle for travel gear etc.">Dropped</div>
                    <div class="text-column-header" title="Weight in pounds">Weight</div>
                    <div class="text-column-header">Note</div>
                </div>
                <fieldset class="repeating_equipment">
                    <div class="grid-items">
                        <input type="text" class="text-equipment-item" name="attr_item_name" spellcheck="false"/>
                        <input type="checkbox" class="checkbox-center" name="attr_item_worn"/>
                        <input type="checkbox" class="checkbox-center" name="attr_item_dropped"/>
                        <input type="number" class="number-stat" name="attr_item_weight" value="0" min="0" step="any"/>
                        <input type="text" class="text-equipment-note" name="attr_item_note" class="text-field-itemnote" spellcheck="false"/>
                    </div>
                </fieldset>
            </div>
            <div class="box-border">
                <div class="text-section-heading">Other Possessions</div>
                <div class="grid-other-possessions">
                    <div class="text-column-header">Article</div>
                    <div class="text-column-header">Location</div>
                    <div class="text-column-header">Note</div>
                </div>
                <fieldset class="repeating_otheritems">
                    <div class="grid-other-posessions">
                        <input type="text" class="text-equipment-item" name="attr_otheritem_name" spellcheck="false"/>
                        <input type="text" class="text-equipment-location" name="attr_otheritem_location" spellcheck="false"/>
                        <input type="text" class="text-equipment-note" name="attr_otheritem_note" spellcheck="false"/>
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="tab-content tab-content-settings">
            <div class="box-border">
                <div class="text-section-heading">Character Creation</div>
                <div class="grid-auto-columns">
                    <div class="text-label">Stat Generation Method:</div>
                    <select class="stat-method" name="attr_stat_method">
                        <option value="custom">Custom/Other</option>
                        <option value="pointbuy">Point Buy</option>
                        <option value="roll">Roll</option>
                    </select>
                </div>
                <div class="grid-auto-columns">
                    <div class="text-label">Character Type:</div>
                    <select name="attr_stat_character_power">
                        <option value="peasant">Peasant</option>
                        <option value="civilian">Civilian</option>
                        <option value="standard">Standard</option>
                        <option value="hero">Hero</option>
                        <option value="superhero">Super Hero</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                <div class="stat-method-content stat-method-pointbuy">
                    <div class="grid-auto-columns">
                        <div class="text-label">Point Pool:</div>
                        <input type="number" class="number-autocalc-pool" name="attr_stat_point_pool" value="0">
                    </div>
                </div>
                <div class="stat-method-content stat-method-roll">
                    <div class="grid-auto-columns">
                        <div class="text-label">Min Stat Value:</div>
                        <input type="number" class="number-autocalc-pool" name="attr_stat_roll_min_value" value="0">
                    </div>
                    <div class="grid-auto-columns">
                        <div class="text-label">Total Rolls:</div>
                        <input type="number" class="number-autocalc-pool" name="attr_stat_roll_max_rolls" value="6" min="6">
                    </div>
                </div>
            </div>
            <div class="box-border">
                <div class="text-section-heading">Misc</div>
                <div class="grid-auto-columns">
                    <div class="text-label">Recalculate/Upgrade:</div>
                    <button type="action" name="act_recalculate">Go!</button>
                </div>
                <div class="grid-auto-columns">
                    <div class="text-label">Form Font:</div>
                    <select class="form-font" name="attr_form_font">
                        <option value="serif">Serif</option>
                        <option value="sans-serif">San Serif</option>
                        <option value="handwriting">Handwriting</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="tab-content tab-content-journal">
            <div class="box-border">
                <div class="text-section-heading">Journal</div>
                <div class="grid-journal">
                    <div class="text-column-header">Date</div>
                    <div class="text-column-header">XP</div>
                    <div class="text-column-header">Title</div>
                    <div class="text-column-header">Notes</div>
                </div>
                <fieldset class="repeating_backgroundoptions">
                    <div class="grid-journal">
                        <input type="text" class="text-field-medium" name="attr_journal_date" placeholder=""/>
                        <input type="text" class="text-field-short" name="attr_journal_xp" placeholder=""/>
                        <input type="text" class="text-field-medium" name="attr_journal_title" placeholder=""/>
                        <textarea class="textarea-journal-note" name="attr_journal_note" placeholder="" spellcheck="false"></textarea>
                        <button class="button-broadcast" type="roll" name="attr_journal_broadcast" title="Broadcast" value="@{wtype} &{template:journal} {{character=@{character_name}}} {{title=@{journal_title}}} {{date=@{journal_date}}} {{xp=@{journal_xp}}} {{note=@{journal_note}}}"></button>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
</div>

<script type="text/worker">

/* ---- BEGIN: TheAaronSheet.js ---- */
// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
// By:       The Aaron, Arcane Scriptomancer
// Contact:  https://app.roll20.net/users/104025/the-aaron

var TAS = TAS || (function(){
    'use strict';

    var version = '0.2.5',
    lastUpdate = 1504710542,

    loggingSettings = {
        debug: {
            key:     'debug',
            title:   'DEBUG',
            color: {
                bgLabel: '#7732A2',
                label:   '#F2EF40',
                bgText:  '#FFFEB7',
                text:    '#7732A2'
            }
        },
        error: {
            key:     'error',
            title:   'Error',
            color: {
                bgLabel: '#C11713',
                label:   'white',
                bgText:  '#C11713',
                text:    'white'
            }
        },
        warn: {
            key:     'warn',
            title:   'Warning',
            color: {
                bgLabel: '#F29140',
                label:   'white',
                bgText:  '#FFD8B7',
                text:    'black'
            }
        },
        info: {
            key:     'info',
            title:   'Info',
            color: {
                bgLabel: '#413FA9',
                label:   'white',
                bgText:  '#B3B2EB',
                text:    'black'
            }
        },
        notice: {
            key:     'notice',
            title:   'Notice',
            color: {
                bgLabel: '#33C133',
                label:   'white',
                bgText:  '#ADF1AD',
                text:    'black'
            }
        },
        log: {
            key:     'log',
            title:   'Log',
            color: {
                bgLabel: '#f2f240',
                label:   'black',
                bgText:  '#ffff90',
                text:    'black'
            }
        },
        callstack: {
            key:     'TAS',
            title:   'function',
            color: {
                bgLabel: '#413FA9',
                label:   'white',
                bgText:  '#B3B2EB',
                text:    'black'
            }
        },
        callstack_async: {
            key:     'TAS',
            title:   'ASYNC CALL',
            color: {
                bgLabel: '#413FA9',
                label:   'white',
                bgText:  '#413FA9',
                text:    'white'
            }
        },
        TAS: {
            key:     'TAS',
            title:   'TAS',
            color: {
                bgLabel: 'grey',
                label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                bgText:  'grey',
                text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
            }
        }
    },


    config = {
        debugMode: false,
        logging: {
            log: true,
            notice: true,
            info: true,
            warn: true,
            error: true,
            debug: false
        }
    },

    callstackRegistry = [],
queuedUpdates = {}, //< Used for delaying saves till the last moment.

complexType = function(o){
    switch(typeof o){
        case 'string':
        return 'string';
        case 'boolean':
        return 'boolean';
        case 'number':
        return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
        case 'function':
        return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
        case 'object':
        return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
        default:
        return typeof o;
    }
},

dataLogger = function(primaryLogger,secondaryLogger,data){
    _.each(data,function(m){
        var type = complexType(m);
        switch(type){
            case 'string':
            primaryLogger(m);
            break;
            case 'undefined':
            case 'null':
            case 'NaN':
            primaryLogger('['+type+']');
            break;
            case 'number':
            case 'not a number':
            case 'integer':
            case 'decimal':
            case 'boolean':
            primaryLogger('['+type+']: '+m);
            break;
            default:
            primaryLogger('['+type+']:=========================================');
            secondaryLogger(m);
            primaryLogger('=========================================================');
            break;
        }
    });
},


colorLog = function(options){
    var coloredLoggerFunction,
    key = options.key,
    label = options.title || 'TAS',
    lBGColor = (options.color && options.color.bgLabel) || 'blue',
    lTxtColor = (options.color && options.color.label) || 'white',
    mBGColor = (options.color && options.color.bgText) || 'blue',
    mTxtColor = (options.color && options.color.text) || 'white';

    coloredLoggerFunction = function(message){
        /* eslint-disable no-console */
        console.log(
            '%c '+label+': %c '+message + ' ',
            'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
            'background-color: '+mBGColor+';color: '+mTxtColor+';'
            );
        /* eslint-enable no-console */
    };
    return function(){
        if('TAS'===key || config.logging[key]){
            /* eslint-disable no-console */
            dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments));
            /* eslint-enable no-console */
        }
    };
},

logDebug  = colorLog(loggingSettings.debug),
logError  = colorLog(loggingSettings.error),
logWarn   = colorLog(loggingSettings.warn),
logInfo   = colorLog(loggingSettings.info),
logNotice = colorLog(loggingSettings.notice),
logLog    = colorLog(loggingSettings.log),
log       = colorLog(loggingSettings.TAS),
logCS     = colorLog(loggingSettings.callstack),
logCSA    = colorLog(loggingSettings.callstack_async),

registerCallstack = function(callstack,label){
    var idx=_.findIndex(callstackRegistry,function(o){
        return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
        _.difference(o.stack,callstack).length === 0 &&
        o.label === label;
    });
    if(-1 === idx){
        idx=callstackRegistry.length;
        callstackRegistry.push({
            stack: callstack,
            label: label
        });
    }
    return idx;
},

setConfigOption = function(options){
    var newconf =_.defaults(options,config);
    newconf.logging=_.defaults(
        (options && options.logging)||{},
        config.logging
        );
    config=newconf;
},

isDebugMode = function(){
    return config.debugMode;
},

debugMode = function(){
    config.logging.debug=true;
    config.debugMode = true;
},

getCallstack = function(){
    var e = new Error('dummy'),
    stack = _.map(_.rest(e.stack.replace(/^[^(]+?[\n$]/gm, '')
        .replace(/^\s+at\s+/gm, '')
        .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
        .split('\n')),function(l){
        return l.replace(/\s+.*$/,'');
    });
    return stack;
},
logCallstackSub = function(cs){
    var matches, csa;
    _.find(cs,function(line){
        matches = line.match(/TAS_CALLSTACK_(\d+)/);
        if(matches){
            csa=callstackRegistry[matches[1]];
            logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
            logCallstackSub(csa.stack);
            return true;
        }
        logCS(line);
        return false;
    });
},
logCallstack = function(){
    var cs;
    if(config.debugMode){
        cs = getCallstack();
        cs.shift();
        log('==============================> CALLSTACK <==============================');
        logCallstackSub(cs);
        log('=========================================================================');
    }
},


wrapCallback = function (label, callback, context){
    var callstack;
    if('function' === typeof label){
        context=callback;
        callback=label;
        label=undefined;
    }
    if(!config.debugMode){
        return (function(cb,ctx){
            return function(){
                cb.apply(ctx||{},arguments);
            };
        }(callback,context));
    }

    callstack = getCallstack();
    callstack.shift();

    return (function(cb,ctx,cs,lbl){
        var ctxref=registerCallstack(cs,lbl);

        /*jshint -W054 */
        return new Function('cb','ctx','TASlog',
            "return function TAS_CALLSTACK_"+ctxref+"(){"+
            "var start,end;"+
            "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
            "start=_.now();"+
            "cb.apply(ctx||{},arguments);"+
            "end=_.now();"+
            "TASlog('Exiting: '+(cb.name||'(anonymous function)')+' :: '+(end-start)+'ms elapsed');"+
            "};")(cb,ctx,log);
            /*jshint +W054 */
        }(callback,context,callstack,label));
},


prepareUpdate = function( attribute, value ){
    queuedUpdates[attribute]=value;
},

applyQueuedUpdates = function() {
    setAttrs(queuedUpdates);
    queuedUpdates = {};
},

namesFromArgs = function(args,base){
    return _.chain(args)
    .reduce(function(memo,attr){
        if('string' === typeof attr) {
            memo.push(attr);
        } else if(_.isArray(args) || _.isArguments(args)){
            memo = namesFromArgs(attr,memo);
        }
        return memo;
    },(_.isArray(base) && base) || [])
    .uniq()
    .value();
},

addId = function(obj,value){
    Object.defineProperty(obj,'id',{
        value: value,
        writable: false,
        enumerable: false
    });
},

addProp = function(obj,prop,value,fullname){
    (function(){
        var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
        full_pname = fullname || prop,
        pvalue=value;

        _.each(['S','I','F'],function(p){
            if( !_.has(obj,p)){
                Object.defineProperty(obj, p, {
                    value: {},
                    enumerable: false,
                    readonly: true
                });
            }
        });
        if( !_.has(obj,'D')){
            Object.defineProperty(obj, 'D', {
                value: _.reduce(_.range(10),function(m,d){
                    Object.defineProperty(m, d, {
                        value: {},
                        enumerable: true,
                        readonly: true
                    });
                    return m;
                },{}),
                enumerable: false,
                readonly: true
            });
        }


// Raw value
Object.defineProperty(obj, pname, {
    enumerable: true,
    set: function(v){
        if(v!==pvalue) {
            pvalue=v;
            prepareUpdate(full_pname,v);
        }
    },
    get: function(){
        return pvalue;
    }
});

// string value
Object.defineProperty(obj.S, pname, {
    enumerable: true,
    set: function(v){
        var val=v.toString();
        if(val !== pvalue) {
            pvalue=val;
            prepareUpdate(full_pname,val);
        }
    },
    get: function(){
        return pvalue.toString();
    }
});

// int value
Object.defineProperty(obj.I, pname, {
    enumerable: true,
    set: function(v){
        var val=parseInt(v,10) || 0;
        if(val !== pvalue){
            pvalue=val;
            prepareUpdate(full_pname,val);
        }
    },
    get: function(){
        return parseInt(pvalue,10) || 0;
    }
});

// float value
Object.defineProperty(obj.F, pname, {
    enumerable: true,
    set: function(v){
        var val=parseFloat(v) || 0;
        if(val !== pvalue) {
            pvalue=val;
            prepareUpdate(full_pname,val);
        }
    },
    get: function(){
        return parseFloat(pvalue) || 0;
    }
});
_.each(_.range(10),function(d){
    Object.defineProperty(obj.D[d], pname, {
        enumerable: true,
        set: function(v){
            var val=(parseFloat(v) || 0).toFixed(d);
            if(val !== pvalue){
                pvalue=val;
                prepareUpdate(full_pname,val);
            }
        },
        get: function(){
            return (parseFloat(pvalue) || 0).toFixed(d);
        }
    });
});

}());
},

repeating = function( section ) {
    return (function(s){
        var sectionName = s,
        attrNames = [],
        fieldNames = [],
        operations = [],
        after = [],

        repAttrs = function TAS_Repeating_Attrs(){
            attrNames = namesFromArgs(arguments,attrNames);
            return this;
        },
        repFields = function TAS_Repeating_Fields(){
            fieldNames = namesFromArgs(arguments,fieldNames);
            return this;
        },
        repReduce = function TAS_Repeating_Reduce(func, initial, final, context) {
            operations.push({
                type: 'reduce',
                func: (func && _.isFunction(func) && func) || _.noop,
                memo: (_.isUndefined(initial) && 0) || initial,
                final: (final && _.isFunction(final) && final) || _.noop,
                context: context || {}
            });
            return this;
        },
        repMap = function TAS_Repeating_Map(func, final, context) {
            operations.push({
                type: 'map',
                func: (func && _.isFunction(func) && func) || _.noop,
                final: (final && _.isFunction(final) && final) || _.noop,
                context: context || {}
            });
            return this;
        },
        repEach = function TAS_Repeating_Each(func, final, context) {
            operations.push({
                type: 'each',
                func: (func && _.isFunction(func) && func) || _.noop,
                final: (final && _.isFunction(final) && final) || _.noop,
                context: context || {}
            });
            return this;
        },
        repTap = function TAS_Repeating_Tap(final, context) {
            operations.push({
                type: 'tap',
                final: (final && _.isFunction(final) && final) || _.noop,
                context: context || {}
            });
            return this;
        },
        repAfter = function TAS_Repeating_After(callback,context) {
            after.push({
                callback: (callback && _.isFunction(callback) && callback) || _.noop,
                context: context || {}
            });
            return this;
        },
        repExecute = function TAS_Repeating_Execute(callback,context){
            var rowSet = {},
            attrSet = {},
            fieldIds = [],
            fullFieldNames = [];

            repAfter(callback,context);

// call each operation per row.
// call each operation's final
getSectionIDs("repeating_"+sectionName,function(ids){
    fieldIds = ids;
    fullFieldNames = _.reduce(fieldIds,function(memo,id){
        return memo.concat(_.map(fieldNames,function(name){
            return 'repeating_'+sectionName+'_'+id+'_'+name;
        }));
    },[]);
    getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
        _.each(attrNames,function(aname){
            if(values.hasOwnProperty(aname)){
                addProp(attrSet,aname,values[aname]);
            }
        });

        rowSet = _.reduce(fieldIds,function(memo,id){
            var r={};
            addId(r,id);
            _.each(fieldNames,function(name){
                var fn = 'repeating_'+sectionName+'_'+id+'_'+name;
                addProp(r,name,values[fn],fn);
            });

            memo[id]=r;

            return memo;
        },{});

        _.each(operations,function(op){
            var res;
            switch(op.type){
                case 'tap':
                _.bind(op.final,op.context,rowSet,attrSet)();
                break;

                case 'each':
                _.each(rowSet,function(r){
                    _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                });
                _.bind(op.final,op.context,rowSet,attrSet)();
                break;

                case 'map':
                res = _.map(rowSet,function(r){
                    return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                });
                _.bind(op.final,op.context,res,rowSet,attrSet)();
                break;

                case 'reduce':
                res = op.memo;
                _.each(rowSet,function(r){
                    res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                });
                _.bind(op.final,op.context,res,rowSet,attrSet)();
                break;
            }
        });

// finalize attrs
applyQueuedUpdates();
_.each(after,function(op){
    _.bind(op.callback,op.context)();
});
});
});
};

return {
    attrs: repAttrs,
    attr: repAttrs,

    column: repFields,
    columns: repFields,
    field: repFields,
    fields: repFields,

    reduce: repReduce,
    inject: repReduce,
    foldl: repReduce,

    map: repMap,
    collect: repMap,

    each: repEach,
    forEach: repEach,

    tap: repTap,
    'do': repTap,

    after: repAfter,
    last: repAfter,
    done: repAfter,

    execute: repExecute,
    go: repExecute,
    run: repExecute
};
}(section));
},


repeatingSimpleSum = function(section, field, destination){
    repeating(section)
    .attr(destination)
    .field(field)
    .reduce(function(m,r){
        TAS.log("field:" + field + " --> " + r.F[field] + "/" + m)
        return m + (r.F[field]);
    },0,function(t,r,a){
        TAS.log("destination:" + destination + " --> " + t)
        a.S[destination]=t;
    })
    .execute();
};

/* eslint-disable no-console */
console.log('%c..*`*..*`*.  The Aaron Sheet  v'+version+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
console.log('%c..*`*..*`*.  Last update: '+(new Date(lastUpdate*1000))+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
/* eslint-enable no-console */


return {
    /* Repeating Sections */
    repeatingSimpleSum: repeatingSimpleSum,
    repeating: repeating,

    /* Configuration */
    config: setConfigOption,

    /* Debugging */
    callback: wrapCallback,
    callstack: logCallstack,
    debugMode: debugMode,
    isDebugMode: isDebugMode,
    _fn: wrapCallback,

    /* Logging */
    debug: logDebug,
    error: logError,
    warn: logWarn,
    info: logInfo,
    notice: logNotice,
    log: logLog
};
}());

 /* ---- END: TheAaronSheet.js ---- */


/* BEGIN MERP Sheet */


/* TABS Worker */
const tablist = ['personal','skills','spells','equipment','settings','journal'];
tablist.forEach(tabValue => {
    on(`clicked:${tabValue}`, function() {
        //console.log(tabValue + ' tab was clicked!!');
        setAttrs({
            activeTab: tabValue
        });
    });
});

/* PERSONAL SECTION Worker */
const personallist = ['player','npc'];
personallist.forEach(sectionValue => {
    on(`clicked:${sectionValue}`, function() {
        //console.log(sectionValue + ' button was clicked!!');
        setAttrs({
            activePersonalSection: sectionValue
        });
    });
});

/* SKILLS SECTION Worker */
const sectionlist = ['primary','secondary'];
sectionlist.forEach(sectionValue => {
    on(`clicked:${sectionValue}`, function() {
        //console.log(sectionValue + ' button was clicked!!');
        setAttrs({
            activeSkillSection: sectionValue
        });
    });
});


/* SHIELD/ADRENAL Worker */
on("clicked:recalculate sheet:opened change:shield_bonus change:shield_melee_bonus change:shield_ranged_bonus change:skill_adrenaldefense_total_bonus change:armorworn", () => {
    getAttrs(["shield_bonus","shield_melee_bonus","shield_ranged_bonus","skill_adrenaldefense_total_bonus","armorworn"], values => {
        let shield_bonus = parseInt(values["shield_bonus"],10) || 0;
        let shield_melee_bonus = parseInt(values["shield_melee_bonus"],10) || 0;
        let shield_ranged_bonus = parseInt(values["shield_ranged_bonus"],10) || 0;
        let armor = values["armorworn"] || "";
        let adrenaldefense = parseInt(values["skill_adrenaldefense_total_bonus"],10) || 0;
        let melee_bonus = (shield_bonus > 0) ? shield_melee_bonus : (armor == "no_armor") ? adrenaldefense : 0;
        let ranged_bonus = (shield_bonus > 0) ? shield_ranged_bonus : (armor == "no_armor") ? adrenaldefense : 0;
        setAttrs({
            defensive_spec2_bonus: melee_bonus,
            defensive_ranged_spec2_bonus: ranged_bonus
        });
    });
});

/* RESISTANCES Worker */
const resistances = ["defensive", "defensive_ranged", "essence", "channeling", "poison", "disease", "heat", "cold"];
resistances.forEach(resistance => {
    on(`clicked:recalculate sheet:opened change:${resistance}_stat_bonus change:${resistance}_race_bonus change:${resistance}_item_bonus change:${resistance}_spec1_bonus change:${resistance}_spec2_bonus`, () => {
        getAttrs([`${resistance}_stat_bonus`, `${resistance}_race_bonus`, `${resistance}_item_bonus`, `${resistance}_spec1_bonus`, `${resistance}_spec2_bonus`], values => {
            setAttrs({
                [`${resistance}_total_bonus`]: (parseInt(values[`${resistance}_stat_bonus`],10) || 0) + (parseInt(values[`${resistance}_race_bonus`],10) || 0) + (parseInt(values[`${resistance}_item_bonus`],10) || 0) + (parseInt(values[`${resistance}_spec1_bonus`],10) || 0) + (parseInt(values[`${resistance}_spec2_bonus`],10) || 0)
            });
        });
    });
});


/* STATS Worker */
const stats = ["st", "ag", "co", "ig", "it", "pr"];
stats.forEach(stat => {
    on(`clicked:recalculate sheet:opened change:stat_${stat}_value change:stat_${stat}_bg_bonus change:stat_${stat}_race_bonus  change:stat_${stat}_misc_bonus`, () => {
        getAttrs([`stat_${stat}_value`, `stat_${stat}_bg_bonus`, `stat_${stat}_race_bonus`, `stat_${stat}_misc_bonus`], values => {
            let stat_base = parseInt(values[`stat_${stat}_value`],10) || 50;
            let stat_bg = parseInt(values[`stat_${stat}_bg_bonus`],10) || 0;
            let stat_bonus = statBonus(stat_base + stat_bg);
            let stat_race = parseInt(values[`stat_${stat}_race_bonus`],10) || 0;
            let stat_misc = parseInt(values[`stat_${stat}_misc_bonus`],10) || 0;
            let stat_total = stat_bonus + stat_race + stat_misc;
            
            setAttrs({
                [`stat_${stat}_adjusted_value`]: stat_base + stat_bg,
                [`stat_${stat}_stat_bonus`]: stat_bonus,
                [`stat_${stat}_total_bonus`]: stat_total
            });
            switch(stat) {
                case "st":
                    setAttrs({
                        skill_chain_stat_bonus: stat_total,
                        skill_plate_stat_bonus: stat_total,
                        skill_1hedged_stat_bonus: stat_total,
                        skill_1hconc_stat_bonus: stat_total,
                        skill_2handed_stat_bonus: stat_total,
                        skill_polearm_stat_bonus: stat_total,
                        skill_novicestriking_stat_bonus: stat_total,
                        skill_standardstriking_stat_bonus: stat_total,
                        skill_expertstriking_stat_bonus: stat_total
                    });
                    break;
                case "ag":
                    setAttrs({
                        defensive_stat_bonus: stat_total,
                        defensive_ranged_stat_bonus: stat_total,
                        skill_noarmor_stat_bonus: stat_total,
                        skill_softleather_stat_bonus: stat_total,
                        skill_rigidleather_stat_bonus: stat_total,
                        skill_thrown_stat_bonus: stat_total,
                        skill_missile_stat_bonus: stat_total,
                        skill_climb_stat_bonus: stat_total,
                        skill_swim_stat_bonus: stat_total,
                        skill_directedspells_stat_bonus: stat_total,
                        skill_novicesweeps_stat_bonus: stat_total,
                        skill_standardsweeps_stat_bonus: stat_total,
                        skill_expertsweeps_stat_bonus: stat_total,
                        skill_acrobatics_stat_bonus: stat_total,
                        skill_contortions_stat_bonus: stat_total
                    });
                    break;
                case "co":
                    setAttrs({
                        poison_stat_bonus: stat_total,
                        disease_stat_bonus: stat_total,
                        skill_bodydev_stat_bonus: stat_total
                    });
                    break;
                case "ig":
                    setAttrs({
                        essence_stat_bonus: stat_total,
                        skill_picklock_stat_bonus: stat_total,
                        skill_readrunes_stat_bonus: stat_total,
                        skill_appraisal_stat_bonus: stat_total,
                        skill_caving_stat_bonus: stat_total,
                        skill_firstaid_stat_bonus: stat_total,
                        skill_ropemastery_stat_bonus: stat_total,
                        skill_signaling_stat_bonus: stat_total
                    });
                    break;
                case "it":
                    setAttrs({
                        channeling_stat_bonus: stat_total,
                        skill_ride_stat_bonus: stat_total,
                        skill_track_stat_bonus: stat_total,
                        skill_disarmtrap_stat_bonus: stat_total,
                        skill_useitems_stat_bonus: stat_total,
                        skill_perception_stat_bonus: stat_total,
                        skill_boathandling_stat_bonus: stat_total,
                        skill_cookery_stat_bonus: stat_total,
                        skill_foraging_stat_bonus: stat_total,
                        skill_gambling_stat_bonus: stat_total,
                        skill_skywatching_stat_bonus: stat_total
                    });
                    break;
                case "pr":
                    setAttrs({
                        skill_stalkhide_stat_bonus: stat_total,
                        skill_leadership_stat_bonus: stat_total,
                        skill_acting_stat_bonus: stat_total,
                        skill_animalhandling_stat_bonus: stat_total,
                        skill_meditation_stat_bonus: stat_total,
                        skill_trickery_stat_bonus: stat_total
                    });
                    break;
                default:
                    break;
            }

        });
    });
});

function statBonus(stat) {
    var bonus = 0;

    if (stat <= 1) {
        bonus = -25;
    } else if (stat <= 2) {
        bonus = -20;
    } else if (stat <= 4) {
        bonus = -15;
    } else if (stat <= 9) {
        bonus = -10;
    } else if (stat <= 24) {
        bonus = -5;
    } else if (stat <= 74) {
        bonus = 0;
    } else if (stat <= 89) {
        bonus = 5;
    } else if (stat <= 94) {
        bonus = 10;
    } else if (stat <= 97) {
        bonus = 15;
    } else if (stat <= 99) {
        bonus = 20;
    } else if (stat <= 100) {
        bonus = 25;
    } else if (stat <= 101) {
        bonus = 30;
    } else {
        bonus = 35;
    }
    return bonus;
}

/* APPEARANCE Worker */
on("clicked:recalculate sheet:opened change:stat_pr_total_bonus change:stat_ap_value", function() {
    getAttrs(["stat_pr_total_bonus", "stat_ap_value"], function(values) {
        let pr_bonus = parseInt(values["stat_pr_total_bonus"],10) || 0;
        let ap_value = parseInt(values["stat_ap_value"], 10) || 0;
        setAttrs({stat_ap_total_bonus: pr_bonus + ap_value});        
    });
});

/* POWERPOINTS Worker */
on("clicked:recalculate sheet:opened change:stat_it_value change:stat_ig_value change:realm change:profession change:power_point_multiplier", function() {
    getAttrs(["stat_it_value", "stat_ig_value", "realm", "profession","power_point_multiplier"], function(values) {
        let powerPoints = 0;
        let multiplier = parseInt(values["power_point_multiplier"],10) || 0;
        switch (values["profession"]) {
            case "conjurer":
                powerPoints = powerPointBase((parseInt(values["stat_it_value"], 10) + parseInt(values["stat_ig_value"], 10))/2 || 0);
                break
            default:
                switch (values["realm"]) {
                    case "Channeling":
                        powerPoints = powerPointBase(parseInt(values["stat_it_value"], 10) || 0);
                        break;
                    case "Essence":
                        powerPoints = powerPointBase(parseInt(values["stat_ig_value"], 10) || 0);
                        break;
                    default:
                        break;
                }
            break;

        }
        setAttrs({
            "power_points_max": powerPoints * multiplier
        });
    });
});

function powerPointBase(stat) {
    var pp = 0;

    if (stat <= 74) {
        pp = 0;
    } else if (stat <= 94) {
        pp = 1;
    } else if (stat <= 99) {
        pp = 2;
    } else if (stat <= 101) {
        pp = 3;
    } else {
        pp = 4;
    }
    return pp;
}

/* TOTAL PENALTIES Worker */
on("clicked:recalculate sheet:opened change:status_stunned change:status_down change:status_onelimbout change:activity_penalty change:encumbrance_penalty change:leggreaves_penalty change:leggreaves_worn change:armgreaves_worn change:armgreaves_penalty change:total_hit_loss_penalty", function() {
    getAttrs(["status_stunned","status_down","status_onelimbout","activity_penalty","encumbrance_penalty","armgreaves_worn","armgreaves_penalty","leggreaves_penalty","leggreaves_worn","total_hit_loss_penalty"], function(values) {
        let activity_penalty = parseInt(values["activity_penalty"], 10) || 0;
        let status_stunned = parseInt(values["status_stunned"], 10) || 0;
        let status_down = parseInt(values["status_down"], 10) || 0;
        let status_onelimbout = parseInt(values["status_onelimbout"], 10) || 0;
        let encumbrance_penalty = parseInt(values["encumbrance_penalty"], 10) || 0;
        let armgreaves_penalty = parseInt(values["armgreaves_worn"], 10) * parseInt(values["armgreaves_penalty"], 10) || 0;
        let leggreaves_penalty = parseInt(values["leggreaves_worn"], 10) * parseInt(values["leggreaves_penalty"], 10) || 0;
        let hit_loss_penalty = parseInt(values["total_hit_loss_penalty"], 10) || 0;

        setAttrs({
            total_mm_penalty: activity_penalty + status_stunned + status_down + status_onelimbout + encumbrance_penalty + leggreaves_penalty,
            total_ob_penalty: activity_penalty + hit_loss_penalty  + armgreaves_penalty,
            total_sm_penalty: activity_penalty
        });
    });
});

/* MOVEMENT Workers */

on("clicked:recalculate sheet:opened change:stride_modifier change:total_mm_penalty change:armorworn change:skill_noarmor_total_bonus change:skill_softleather_total_bonus change:skill_rigidleather_total_bonus change:skill_chain_total_bonus change:skill_plate_total_bonus", function() {
    getAttrs(["stride_modifier","total_mm_penalty","armorworn", "skill_noarmor_total_bonus", "skill_softleather_total_bonus","skill_rigidleather_total_bonus", "skill_chain_total_bonus","skill_plate_total_bonus"], function(values) {
        let stride_modifier = parseInt(values["stride_modifier"], 10) || 0;
        let total_mm_penalty = parseInt(values["total_mm_penalty"], 10) || 0;
        let mm_bonus = 0;
        switch (values["armorworn"]) {
            case "no_armor":
                mm_bonus = parseInt(values["skill_noarmor_total_bonus"], 10) || 0;
                break;
            case "soft_leather":
                mm_bonus = parseInt(values["skill_softleather_total_bonus"], 10) || 0;
                break;
            case "rigid_leather":
                mm_bonus = parseInt(values["skill_rigidleather_total_bonus"], 10) || 0;
                break;
            case "chain_armor":
                mm_bonus = parseInt(values["skill_chain_total_bonus"], 10) || 0;
                break;
            case "plate_armor":
                mm_bonus = parseInt(values["skill_plate_total_bonus"], 10) || 0;
                break;
            default:
                break;
        }

        setAttrs({
            movement_rate: (50 + stride_modifier + total_mm_penalty + mm_bonus)
        });
    });
});


/* HIT LOSS Worker */
on("clicked:recalculate sheet:opened change:hit_points change:hit_points_max", function() {
    getAttrs(["hit_points","hit_points_max"], function(values) {
        let hit_points = parseInt(values["hit_points"], 10) || 0;
        let hit_points_max = parseInt(values["hit_points_max"], 10) || 0;
        let hit_loss_penalty = (2 * hit_points <hit_points_max) ? -20 : 0;

        setAttrs({
            total_hit_loss_penalty: hit_loss_penalty
        });
    });
});


/* ENCUMBRANCE Worker */
on("clicked:recalculate sheet:opened change:weight change:item_total_encumbrance change:stat_st_total_bonus", function(eventInfo) {
    getAttrs(["weight", "item_total_encumbrance","stat_st_total_bonus"], function(values) {
        TAS.log("Calculating enc penalty:" + (values["item_total_encumbrance"]))

        let weight = parseInt(values["weight"], 10) || 0;
        let enc = parseInt(values["item_total_encumbrance"], 10) || 0;
        let st_bonus = parseInt(values["stat_st_total_bonus"], 10) || 0;

        let weightIndex = Math.min(Math.max(Math.floor((weight - 41) / 20), 0), 14);
        let encIndex = (enc < 16) ? 0 : (enc < 26) ? 1 : (enc < 36) ? 2 : (enc < 46) ? 3 : (enc < 61) ? 4 :
        (enc < 81) ? 5 : (enc < 101) ? 6 : (enc < 121) ? 7 : (enc < 141) ? 8 : (enc < 161) ? 9 : 9;

        TAS.log("weight:" + weight + " ==> " + weightIndex);
        TAS.log("enc:" + enc + " ==> " + encIndex);

        let max = 200;
        let penalties = [
        [0, 30, 60, max, max, max, max, max, max, max],
        [0, 20, 35,  60,  80, max, max, max, max, max],
        [0, 15, 25,  40,  60, max, max, max, max, max],
        [0, 15, 20,  30,  40,  60, max, max, max, max],
        [0, 10, 15,  25,  35,  40,  60, max, max, max],
        [0, 10, 15,  20,  30,  35,  40,  60, max, max],
        [0, 5, 10,  15,  25,  30,  35,  45,  60, max],
        [0, 5, 10,  15,  20,  25,  30,  35,  50,  60],
        [0, 5, 10,  15,  20,  20,  30,  35,  45,  55],
        [0, 0, 10,  10,  15,  20,  25,  30,  40,  50],
        [0, 0, 10,  10,  15,  15,  25,  30,  35,  45],
        [0, 0,  5,  10,  15,  15,  20,  25,  30,  40],
        [0, 0,  5,   5,  10,  15,  20,  25,  30,  35],
        [0, 0,  0,   5,  10,  10,  20,  25,  25,  35],
        [0, 0,  0,   0,   5,  10,  15,  20,  25,  30]
        ];

        let penalty = penalties[weightIndex][encIndex];
        if (enc > 160) {
            penalty += 5 * Math.ceil((enc - 160) / 10);
        }
        TAS.log("penalty:" + penalty);
        let enc_penalty = (st_bonus - penalty > 0) ? 0 : st_bonus - penalty;
        TAS.log("enc penalty:" + enc_penalty);

        setAttrs({
            "encumbrance_penalty": enc_penalty || 0
        });
    });
});

/* BACKGROUND OPTIONS Worker */
on("clicked:recalculate change:repeating_backgroundoptions:background_options", function() {
   getAttrs([
      "repeating_backgroundoptions_background_options"
    ], function(values) {
        let bgoption = values["repeating_backgroundoptions_background_options"];
        let bonuses = setBGOptions(bgoption);
        
        setAttrs({
            skill_noarmor_spec1_bonus: bonuses["skill_noarmor_spec1_bonus"] || 0,
            essence_spec2_bonus: bonuses["essence_spec2_bonus"] || 0,
            channeling_spec2_bonus: bonuses["channeling_spec2_bonus"] || 0,
            poison_spec2_bonus: bonuses["poison_spec2_bonus"] || 0,
            disease_spec2_bonus: bonuses["disease_spec2_bonus"] || 0,
            cold_spec2_bonus: bonuses["cold_spec2_bonus"] || 0,
            heat_spec2_bonus: bonuses["heat_spec2_bonus"] || 0,
            stat_st_bg_bonus: bonuses["stat_st_bg_bonus"] || 0,
            stat_ag_bg_bonus: bonuses["stat_ag_bg_bonus"] || 0,
            stat_co_bg_bonus: bonuses["stat_co_bg_bonus"] || 0,
            stat_ig_bg_bonus: bonuses["stat_ig_bg_bonus"] || 0,
            stat_it_bg_bonus: bonuses["stat_it_bg_bonus"] || 0,
            stat_pr_bg_bonus: bonuses["stat_pr_bg_bonus"] || 0,
            skill_noarmor_bg_ranks: bonuses["skill_noarmor_bg_ranks"] || 0,
            skill_softleather_bg_ranks: bonuses["skill_softleather_bg_ranks"] || 0,
            skill_rigidleather_bg_ranks: bonuses["skill_rigidleather_bg_ranks"] || 0,
            skill_chain_bg_ranks: bonuses["skill_chain_bg_ranks"] || 0,
            skill_plate_bg_ranks: bonuses["skill_plate_bg_ranks"] || 0,
            skill_1hedged_bg_ranks: bonuses["skill_1hedged_bg_ranks"] || 0,
            skill_1hconc_bg_ranks: bonuses["skill_1hconc_bg_ranks"] || 0,
            skill_2handed_bg_ranks: bonuses["skill_2handed_bg_ranks"] || 0,
            skill_polearm_bg_ranks: bonuses["skill_polearm_bg_ranks"] || 0,
            skill_missile_bg_ranks: bonuses["skill_missile_bg_ranks"] || 0,
            skill_thrown_bg_ranks: bonuses["skill_thrown_bg_ranks"] || 0,
            skill_climb_bg_ranks: bonuses["skill_climb_bg_ranks"] || 0,
            skill_ride_bg_ranks: bonuses["skill_ride_bg_ranks"] || 0,
            skill_swim_bg_ranks: bonuses["skill_swim_bg_ranks"] || 0,
            skill_track_bg_ranks: bonuses["skill_track_bg_ranks"] || 0,
            skill_stalkhide_bg_ranks: bonuses["skill_stalkhide_bg_ranks"] || 0,
            skill_picklock_bg_ranks: bonuses["skill_picklock_bg_ranks"] || 0,
            skill_disarmtrap_bg_ranks: bonuses["skill_disarmtrap_bg_ranks"] || 0,
            skill_readrunes_bg_ranks: bonuses["skill_readrunes_bg_ranks"] || 0,
            skill_useitems_bg_ranks: bonuses["skill_useitems_bg_ranks"] || 0,
            skill_perception_bg_ranks: bonuses["skill_perception_bg_ranks"] || 0
        }); 
   });
});

function setBGOptions(bgoption) {
    var bonuses = {};

    switch(bgoption) {
        case "Adept at Moving":
            bonuses["skill_noarmor_spec1_bonus"] = 5;
            break;
        case "Resist Essence":
            bonuses["essence_spec2_bonus"] = 10;
            break;
        case "Resist Channeling":
            bonuses["channeling_spec2_bonus"] = 10;
            break;
        case "Resist Poison":
            bonuses["poison_spec2_bonus"] = 10;
            break;
        case "Resist Disease":
            bonuses["disease_spec2_bonus"] = 10;
            break;
        case "Resist Cold":
            bonuses["cold_spec2_bonus"] = 10;
            break;
        case "Resist Heat":
            bonuses["heat_spec2_bonus"] = 10;
            break;
        case "ST 2":
            bonuses["stat_st_bg_bonus"] = 2;
            break;
        case "AG 2":
            bonuses["stat_ag_bg_bonus"] = 2;
            break;
        case "CO 2":
            bonuses["stat_co_bg_bonus"] = 2;
            break;
        case "IG 2":
            bonuses["stat_ig_bg_bonus"] = 2;
            break;
        case "IT 2":
            bonuses["stat_it_bg_bonus"] = 2;
            break;
        case "PR 2":
            bonuses["stat_pr_bg_bonus"] = 2;
            break;
        case "ST AG CO":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_co_bg_bonus"] = 1;
            break;
        case "ST AG IG":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            break;
        case "ST AG IT":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            break;
        case "ST AG PR":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "ST CO IG":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            break;
        case "ST CO IT":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            break;
        case "ST CO PR":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "ST IG IT":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            break;
        case "ST IG PR":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "ST IT PR":
            bonuses["stat_st_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "AG CO IG":
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            break;
        case "AG CO IT":
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            break;
        case "AG CO PR":
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "AG IG IT":
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            break;
        case "AG IG PR":
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "AG IT PR":
            bonuses["stat_ag_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "CO IG IT":
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            break;
        case "CO IG PR":
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_ig_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "CO IT PR":
            bonuses["stat_co_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "IG IT PR":
            bonuses["stat_ig_bg_bonus"] = 1;
            bonuses["stat_it_bg_bonus"] = 1;
            bonuses["stat_pr_bg_bonus"] = 1;
            break;
        case "Hobby No Armor":
            bonuses["skill_noarmor_bg_ranks"] = 2;
            break;
        case "Hobby Soft Leather":
            bonuses["skill_softleather_bg_ranks"] = 2;
            break;
        case "Hobby Rigid Leather":
            bonuses["skill_rigidleather_bg_ranks"] = 2;
            break;
        case "Hobby Chain Mail":
            bonuses["skill_chain_bg_ranks"] = 2;
            break;
        case "Hobby Plate Mail":
            bonuses["skill_plate_bg_ranks"] = 2;
            break;
        case "Hobby 1H Edged":
            bonuses["skill_1hedged_bg_ranks"] = 2;
            break;
        case "Hobby 1H Concussion":
            bonuses["skill_1hconc_bg_ranks"] = 2;
            break;
        case "Hobby 2 Handed":
            bonuses["skill_2handed_bg_ranks"] = 2;
            break;
        case "Hobby Pole Arms":
            bonuses["skill_polearm_bg_ranks"] = 2;
            break;
        case "Hobby Missile":
            bonuses["skill_missile_bg_ranks"] = 2;
            break;
        case "Hobby Thrown":
            bonuses["skill_thrown_bg_ranks"] = 2;
            break;
        case "Hobby Climb":
            bonuses["skill_climb_bg_ranks"] = 2;
            break;
        case "Hobby Ride":
            bonuses["skill_ride_bg_ranks"] = 2;
            break;
        case "Hobby Swim":
            bonuses["skill_swim_bg_ranks"] = 2;
            break;
        case "Hobby Track":
            bonuses["skill_track_bg_ranks"] = 2;
            break;
        case "Hobby Stalk Hide":
            bonuses["skill_stalkhide_bg_ranks"] = 2;
            break;
        case "Hobby Pick Lock":
            bonuses["skill_picklock_bg_ranks"] = 2;
            break;
        case "Hobby Disarm Trap":
            bonuses["skill_disarmtrap_bg_ranks"] = 2;
            break;
        case "Hobby Read Runes":
            bonuses["skill_readrunes_bg_ranks"] = 2;
            break;
        case "Hobby Use Items":
            bonuses["skill_useitems_bg_ranks"] = 2;
            break;
        case "Hobby Perception":
            bonuses["skill_perception_bg_ranks"] = 2;
            break;
        default:
            break;
    }
    return bonuses;
}                    

/* SKILLS Worker */
const skills = ["noarmor", "softleather", "rigidleather", "chain", "plate", "1hedged", "1hconc", "2handed", "thrown", "missile", "polearm", "climb", "ride", "swim", "track", "ambush", "stalkhide", "picklock", "disarmtrap", "readrunes", "useitems", "directedspells", "perception", "bodydev", "basespells", "leadership", "novicestriking", "standardstriking", "expertstriking", "novicesweeps", "standardsweeps", "expertsweeps", "adrenaldefense", "acrobatics", "acting", "animalhandling", "appraisal", "boathandling", "caving", "contortions", "cookery", "firstaid", "foraging", "gambling", "meditation", "ropemastery", "signaling", "skywatching", "trickery"];
skills.forEach(skill => {
    on(`clicked:recalculate sheet:opened change:skill_${skill}_5rank1 change:skill_${skill}_5rank2 change:skill_${skill}_5rank3 change:skill_${skill}_5rank4 change:skill_${skill}_5rank5 change:skill_${skill}_5rank6 change:skill_${skill}_5rank7 change:skill_${skill}_5rank8 change:skill_${skill}_5rank9 change:skill_${skill}_5rank10 change:skill_${skill}_2rank1 change:skill_${skill}_2rank2 change:skill_${skill}_2rank3 change:skill_${skill}_2rank4 change:skill_${skill}_2rank5 change:skill_${skill}_stat_bonus change:skill_${skill}_prof_bonus change:skill_${skill}_race_bonus change:skill_${skill}_item_bonus change:skill_${skill}_spec1_bonus change:skill_${skill}_spec2_bonus`, () => {
        getAttrs([`skill_${skill}_5rank1`, `skill_${skill}_5rank2`, `skill_${skill}_5rank3`, `skill_${skill}_5rank4`, `skill_${skill}_5rank5`, `skill_${skill}_5rank6`, `skill_${skill}_5rank7`, `skill_${skill}_5rank8`, `skill_${skill}_5rank9`, `skill_${skill}_5rank10`, `skill_${skill}_5rank9`, `skill_${skill}_2rank1`, `skill_${skill}_5rank9`, `skill_${skill}_2rank2`, `skill_${skill}_5rank9`, `skill_${skill}_2rank3`, `skill_${skill}_5rank9`, `skill_${skill}_2rank4`, `skill_${skill}_5rank9`, `skill_${skill}_2rank5`, `skill_${skill}_stat_bonus`, `skill_${skill}_prof_bonus`, `skill_${skill}_race_bonus`, `skill_${skill}_item_bonus`, `skill_${skill}_spec1_bonus`, `skill_${skill}_spec2_bonus`], values => {
            let init_bonus = -25;
            switch (skill) {
                case "ambush":
                case "adrenaldefense":
                case "bodydev":
                case "basespells":
                case "leadership":
                    init_bonus = 0;
                    break;
                default:
                    break;
            }
            let rank_bonus = init_bonus + (parseInt(values[`skill_${skill}_5rank1`],10) || 0) + (parseInt(values[`skill_${skill}_5rank2`],10) || 0) + (parseInt(values[`skill_${skill}_5rank3`],10) || 0) + (parseInt(values[`skill_${skill}_5rank4`],10) || 0) + (parseInt(values[`skill_${skill}_5rank5`],10) || 0) + (parseInt(values[`skill_${skill}_5rank6`],10) || 0) + (parseInt(values[`skill_${skill}_5rank7`],10) || 0) + (parseInt(values[`skill_${skill}_5rank8`],10) || 0) + (parseInt(values[`skill_${skill}_5rank9`],10) || 0) + (parseInt(values[`skill_${skill}_5rank10`],10) || 0) + (parseInt(values[`skill_${skill}_2rank1`],10) || 0) + (parseInt(values[`skill_${skill}_2rank2`],10) || 0) + (parseInt(values[`skill_${skill}_2rank3`],10) || 0) + (parseInt(values[`skill_${skill}_2rank4`],10) || 0) + (parseInt(values[`skill_${skill}_2rank5`],10) || 0);
            let stat_bonus = parseInt(values[`skill_${skill}_stat_bonus`],10) || 0;
            let prof_bonus = parseInt(values[`skill_${skill}_prof_bonus`],10) || 0;
            let race_bonus = parseInt(values[`skill_${skill}_race_bonus`],10) || 0;
            let item_bonus = parseInt(values[`skill_${skill}_item_bonus`],10) || 0;
            let spec1_bonus = parseInt(values[`skill_${skill}_spec1_bonus`],10) || 0;
            let spec2_bonus = parseInt(values[`skill_${skill}_spec2_bonus`],10) || 0;
            //console.log(skill);
            //console.log(rank_bonus);
            setAttrs({
                [`skill_${skill}_rank_bonus`]: rank_bonus,
                [`skill_${skill}_total_bonus`]: rank_bonus + stat_bonus + prof_bonus + race_bonus + item_bonus + spec1_bonus + spec2_bonus
            });
            switch (skill) {
                case "bodydev":
                    setAttrs({
                        hit_points_max: rank_bonus + stat_bonus + prof_bonus + race_bonus + item_bonus + spec1_bonus + spec2_bonus
                    });
                    break;
                default:
                    break;
            }
        });
    });
});



/* CREATURE TEMPLATE worker */
on("clicked:recalculate change:creature_template", function(eventInfo) {
    getAttrs(["creature_template"], function(values) {
        let creature = values["creature_template"];
        //console.log(creature);
        let bonuses = creatureTemplates(creature);


        switch (creature) {
            case "":
                break;
            default:
                setAttrs({
                    "creature_type": bonuses["creature_type"]  || "",
                    "creature_level": bonuses["creature_level"]  || 0,
                    "creature_number_of_appearance": bonuses["creature_number_of_appearance"]  || 1,
                    "creature_size": bonuses["creature_size"]  || "",   
                    "weight": bonuses["weight"]  || 0,
                    "creature_armorworn": bonuses["creature_armorworn"]  || "",
                    "creature_quickness": bonuses["creature_speed"]  || "",
                    "creature_speed": bonuses["creature_speed"]  || "",
                    "defensive_race_bonus": bonuses["defensive_race_bonus"]  || 0,
                    "defensive_ranged_race_bonus": bonuses["defensive_race_bonus"]  || 0,
                    "essence_race_bonus": bonuses["essence_race_bonus"]  || 0,
                    "channeling_race_bonus": bonuses["channeling_race_bonus"]  || 0,
                    "poison_race_bonus": bonuses["poison_race_bonus"]  || 0,
                    "disease_race_bonus": bonuses["disease_race_bonus"]  || 0,
                    "heat_race_bonus": bonuses["heat_race_bonus"]  || 0,
                    "cold_race_bonus": bonuses["cold_race_bonus"]  || 0,
                    "creature_hit_points": bonuses["creature_hit_points"] || 0,
                    "creature_hit_points_max": bonuses["creature_hit_points"] || 0,
                    "creature_critical": bonuses["creature_critical"]  || "",
                    "attack1_name": bonuses["attack1_name"]  || "",
                    "attack1_size": bonuses["attack1_size"]  || "",
                    "attack1_type": bonuses["attack1_type"]  || "",
                    "attack1_primary": bonuses["attack1_primary"]  || "",
                    "attack1_secondary": bonuses["attack1_secondary"]  || "",
                    "attack1_ob": bonuses["attack1_ob"]  || 0,
                    "attack2_name": bonuses["attack2_name"]  || "",
                    "attack2_size": bonuses["attack2_size"]  || "",
                    "attack2_type": bonuses["attack2_type"]  || "",
                    "attack2_primary": bonuses["attack2_primary"]  || "",
                    "attack2_secondary": bonuses["attack2_secondary"]  || "",
                    "attack2_ob": bonuses["attack2_ob"]  || 0,
                    "attack3_name": bonuses["attack3_name"]  || "",
                    "attack3_size": bonuses["attack3_size"]  || "",
                    "attack3_type": bonuses["attack3_type"]  || "",
                    "attack3_primary": bonuses["attack3_primary"]  || "",
                    "attack3_secondary": bonuses["attack3_secondary"]  || "",
                    "attack3_ob": bonuses["attack3_ob"]  || 0,
                    "attack4_name": bonuses["attack4_name"]  || "",
                    "attack4_size": bonuses["attack4_size"]  || "",
                    "attack4_type": bonuses["attack4_type"]  || "",
                    "attack4_primary": bonuses["attack4_primary"]  || "",
                    "attack4_secondary": bonuses["attack4_secondary"]  || "",
                    "attack4_ob": bonuses["attack4_ob"]  || 0,
                    "attack5_name": bonuses["attack5_name"]  || "",
                    "attack5_size": bonuses["attack5_size"]  || "",
                    "attack5_type": bonuses["attack5_type"]  || "",
                    "attack5_primary": bonuses["attack5_primary"]  || "",
                    "attack5_secondary": bonuses["attack5_secondary"]  || "",
                    "attack5_ob": bonuses["attack5_ob"]  || 0
                });
                break;
        }
    });
});

function creatureTemplates(creature) {
    var bonuses = {};

    switch(creature) {
        case "ape-small":
            bonuses["creature_type"] = "Ape";
            bonuses["creature_level"] = 1;
            bonuses["creature_number_of_appearance"] = 25;
            bonuses["creature_size"] = "Small";
            bonuses["weight"] = 75;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "FA";
            bonuses["defensive_race_bonus"] = 25;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 45;
            bonuses["creature_critical"] = "medium";
            bonuses["attack1_name"] = "Bite";
            bonuses["attack1_size"] = "Small";
            bonuses["attack1_type"] = "Bite";
            bonuses["attack1_ob"] = 35;
            break;
        case "ape-large":
            bonuses["creature_type"] = "Ape";
            bonuses["creature_level"] = 2;
            bonuses["creature_number_of_appearance"] = 15;
            bonuses["creature_size"] = "Medium";
            bonuses["weight"] = 200;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "FA";
            bonuses["defensive_race_bonus"] = 20;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 100;
            bonuses["creature_critical"] = "medium";
            bonuses["attack1_name"] = "Bite";
            bonuses["attack1_size"] = "Medium";
            bonuses["attack1_type"] = "Bite";
            bonuses["attack1_ob"] = 60;
            break;
        case "ape-huge":
            bonuses["creature_type"] = "Ape";
            bonuses["creature_level"] = 3;
            bonuses["creature_number_of_appearance"] = 10;
            bonuses["creature_size"] = "Large";
            bonuses["weight"] = 350;
            bonuses["creature_armorworn"] = "soft_leather";
            bonuses["creature_speed"] = "FA";
            bonuses["defensive_race_bonus"] = 20;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 140;
            bonuses["creature_critical"] = "large";
            bonuses["attack1_name"] = "Grapple";
            bonuses["attack1_size"] = "Large";
            bonuses["attack1_type"] = "Grapple/Swallow";
            bonuses["attack1_ob"] = 90;
            bonuses["attack2_name"] = "Bite";
            bonuses["attack2_size"] = "Large";
            bonuses["attack2_type"] = "Bite";
            bonuses["attack2_ob"] = 60;
            break;
        case "bat-small":
            bonuses["creature_type"] = "Bat";
            bonuses["creature_level"] = 0;
            bonuses["creature_number_of_appearance"] = 100;
            bonuses["creature_size"] = "Small";
            bonuses["weight"] = 2;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "VF";
            bonuses["defensive_race_bonus"] = 60;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 5;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Bite";
            bonuses["attack1_size"] = "Tiny";
            bonuses["attack1_type"] = "Bite";
            bonuses["attack1_ob"] = 35;
            break;
        case "bat-giant":
            bonuses["creature_type"] = "Bat";
            bonuses["creature_level"] = 2;
            bonuses["creature_number_of_appearance"] = 20;
            bonuses["creature_size"] = "Giant";
            bonuses["weight"] = 50;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "VF";
            bonuses["defensive_race_bonus"] = 50;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 60;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Bite";
            bonuses["attack1_size"] = "Small";
            bonuses["attack1_type"] = "Bite";
            bonuses["attack1_ob"] = 50;
            break;
        case "bear-large":
            bonuses["creature_type"] = "Bear";
            bonuses["creature_level"] = 3;
            bonuses["creature_number_of_appearance"] = 5;
            bonuses["creature_size"] = "Large";
            bonuses["weight"] = 500;
            bonuses["creature_armorworn"] = "soft_leather";
            bonuses["creature_speed"] = "MF";
            bonuses["defensive_race_bonus"] = 30;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 150;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Ram";
            bonuses["attack1_size"] = "Large";
            bonuses["attack1_type"] = "Ram";
            bonuses["attack1_ob"] = 70;
            bonuses["attack2_name"] = "Bite";
            bonuses["attack2_size"] = "Large";
            bonuses["attack2_type"] = "Bite";
            bonuses["attack2_ob"] = 50;
            bonuses["attack3_name"] = "Rake";
            bonuses["attack3_size"] = "Large";
            bonuses["attack3_type"] = "Claw";
            bonuses["attack3_ob"] = 70;
            break;
        case "bear-giant":
            bonuses["creature_type"] = "Bear";
            bonuses["creature_level"] = 7;
            bonuses["creature_number_of_appearance"] = 3;
            bonuses["creature_size"] = "Giant";
            bonuses["weight"] = 2500;
            bonuses["creature_armorworn"] = "soft_leather";
            bonuses["creature_speed"] = "MF";
            bonuses["defensive_race_bonus"] = 40;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 250;
            bonuses["creature_critical"] = "large";
            bonuses["attack1_name"] = "Ram";
            bonuses["attack1_size"] = "Huge";
            bonuses["attack1_type"] = "Ram";
            bonuses["attack1_ob"] = 95;
            bonuses["attack2_name"] = "Bite";
            bonuses["attack2_size"] = "Huge";
            bonuses["attack2_type"] = "Bite";
            bonuses["attack2_ob"] = 70;
            bonuses["attack3_name"] = "Rake";
            bonuses["attack3_size"] = "Huge";
            bonuses["attack3_type"] = "Claw";
            bonuses["attack3_ob"] = 95;
            break;
        case "bird-small":
            bonuses["creature_type"] = "Bird";
            bonuses["creature_level"] = 0;
            bonuses["creature_number_of_appearance"] = 100;
            bonuses["creature_size"] = "Tiny";
            bonuses["weight"] = 1;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "MF";
            bonuses["defensive_race_bonus"] = 40;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 5;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Peck";
            bonuses["attack1_size"] = "Tiny";
            bonuses["attack1_type"] = "Pincer/Beak";
            bonuses["attack1_ob"] = 25;
            break;
        case "bird-large":
            bonuses["creature_type"] = "Bird";
            bonuses["creature_level"] = 1;
            bonuses["creature_number_of_appearance"] = 4;
            bonuses["creature_size"] = "Medium";
            bonuses["weight"] = 50;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "FA";
            bonuses["defensive_race_bonus"] = 30;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 30;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Peck";
            bonuses["attack1_size"] = "Medium";
            bonuses["attack1_type"] = "Pincer/Beak";
            bonuses["attack1_ob"] = 40;
            break;
        case "boar":
            bonuses["creature_type"] = "Boar";
            bonuses["creature_level"] = 3;
            bonuses["creature_number_of_appearance"] = 6;
            bonuses["creature_size"] = "Large";
            bonuses["weight"] = 500;
            bonuses["creature_armorworn"] = "soft_leather";
            bonuses["creature_speed"] = "MF";
            bonuses["defensive_race_bonus"] = 40;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 110;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Tusk";
            bonuses["attack1_size"] = "Large";
            bonuses["attack1_type"] = "Horn/Tusk";
            bonuses["attack1_ob"] = 55;
            break;
        case "bull":
            bonuses["creature_type"] = "Bull";
            bonuses["creature_level"] = 3;
            bonuses["creature_number_of_appearance"] = 1;
            bonuses["creature_size"] = "Large";
            bonuses["weight"] = 1500;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "MF";
            bonuses["defensive_race_bonus"] = 25;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 190;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Ram";
            bonuses["attack1_size"] = "Large";
            bonuses["attack1_type"] = "Ram";
            bonuses["attack1_ob"] = 50;
            break;
        case "cat-small":
            bonuses["creature_type"] = "Cat";
            bonuses["creature_level"] = 1;
            bonuses["creature_number_of_appearance"] = 3;
            bonuses["creature_size"] = "Small";
            bonuses["weight"] = 10;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "MF";
            bonuses["defensive_race_bonus"] = 25;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 20;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Claw";
            bonuses["attack1_size"] = "Small";
            bonuses["attack1_type"] = "Claw";
            bonuses["attack1_ob"] = 40;
            break;
        case "cat-medium":
            bonuses["creature_type"] = "Cat";
            bonuses["creature_level"] = 2;
            bonuses["creature_number_of_appearance"] = 6;
            bonuses["creature_size"] = "Medium";
            bonuses["weight"] = 50;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "VF";
            bonuses["defensive_race_bonus"] = 35;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 50;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Claw";
            bonuses["attack1_size"] = "Small";
            bonuses["attack1_type"] = "Claw";
            bonuses["attack1_ob"] = 60;
            break;
        case "cat-large":
            bonuses["creature_type"] = "Cat";
            bonuses["creature_level"] = 3;
            bonuses["creature_number_of_appearance"] = 10;
            bonuses["creature_size"] = "Large";
            bonuses["weight"] = 200;
            bonuses["creature_armorworn"] = "soft_leather";
            bonuses["creature_speed"] = "FA";
            bonuses["defensive_race_bonus"] = 35;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 100;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Claw";
            bonuses["attack1_size"] = "Medium";
            bonuses["attack1_type"] = "Claw";
            bonuses["attack1_ob"] = 80;
            break;
        case "deer-female":
            bonuses["creature_type"] = "Deer";
            bonuses["creature_level"] = 1;
            bonuses["creature_number_of_appearance"] = 15;
            bonuses["creature_size"] = "Small";
            bonuses["weight"] = 100;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "VF";
            bonuses["defensive_race_bonus"] = 25;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 50;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Ram";
            bonuses["attack1_size"] = "Small";
            bonuses["attack1_type"] = "Ram";
            bonuses["attack1_ob"] = 15;
            break;
        case "deer-male":
            bonuses["creature_type"] = "Deer";
            bonuses["creature_level"] = 2;
            bonuses["creature_number_of_appearance"] = 1;
            bonuses["creature_size"] = "Large";
            bonuses["weight"] = 200;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "VF";
            bonuses["defensive_race_bonus"] = 25;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 70;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Antlers";
            bonuses["attack1_size"] = "Large";
            bonuses["attack1_type"] = "Horn/Tusk";
            bonuses["attack1_ob"] = 50;
            break;
        case "dog-small":
            bonuses["creature_type"] = "Dog";
            bonuses["creature_level"] = 1;
            bonuses["creature_number_of_appearance"] = 10;
            bonuses["creature_size"] = "Small";
            bonuses["weight"] = 25;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "SL";
            bonuses["defensive_race_bonus"] = 20;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 30;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Bite";
            bonuses["attack1_size"] = "Small";
            bonuses["attack1_type"] = "Bite";
            bonuses["attack1_ob"] = 40;
            break;
        case "dog-medium":
            bonuses["creature_type"] = "Dog";
            bonuses["creature_level"] = 2;
            bonuses["creature_number_of_appearance"] = 20;
            bonuses["creature_size"] = "Medium";
            bonuses["weight"] = 100;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "ME";
            bonuses["defensive_race_bonus"] = 25;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 70;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Bite";
            bonuses["attack1_size"] = "Medium";
            bonuses["attack1_type"] = "Bite";
            bonuses["attack1_ob"] = 50;
            break;
        case "dog-large":
            bonuses["creature_type"] = "Dog";
            bonuses["creature_level"] = 3;
            bonuses["creature_number_of_appearance"] = 20;
            bonuses["creature_size"] = "Large";
            bonuses["weight"] = 250;
            bonuses["creature_armorworn"] = "soft_leather";
            bonuses["creature_speed"] = "MD";
            bonuses["defensive_race_bonus"] = 25;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 110;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Bite";
            bonuses["attack1_size"] = "Large";
            bonuses["attack1_type"] = "Bite";
            bonuses["attack1_ob"] = 70;
            break;
        case "balrogs":
            bonuses["creature_type"] = "Balrog";
            bonuses["creature_level"] = 60;
            bonuses["creature_number_of_appearance"] = 1;
            bonuses["creature_size"] = "Huge";
            bonuses["weight"] = 500;
            bonuses["creature_armorworn"] = "plate_armor";
            bonuses["creature_speed"] = "VF";
            bonuses["defensive_race_bonus"] = 60;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 400;
            bonuses["creature_hit_points_max"] = 400;
            bonuses["creature_critical"] = "huge";
            bonuses["attack1_name"] = "Flaming Whip";
            bonuses["attack1_size"] = "";
            bonuses["attack1_type"] = "Weapon";
            bonuses["attack1_primary"] = "Grapple";
            bonuses["attack1_secondary"] = "Slash";
            bonuses["attack1_ob"] = 240;
            bonuses["attack2_name"] = "Flaming Weapon";
            bonuses["attack2_size"] = "";
            bonuses["attack2_type"] = "Weapon";
            bonuses["attack2_primary"] = "Slash";
            bonuses["attack2_secondary"] = "Crush";
            bonuses["attack2_ob"] = 240;
            bonuses["attack3_name"] = "Rend";
            bonuses["attack3_size"] = "Huge";
            bonuses["attack3_type"] = "Grapple/Swallow";
            bonuses["attack3_primary"] = "Grapple";
            bonuses["attack3_ob"] = 50;
            bonuses["attack4_name"] = "Flaming Touch";
            bonuses["attack4_size"] = "";
            bonuses["attack4_type"] = "Touch";
            bonuses["attack4_primary"] = "Heat";
            bonuses["attack4_ob"] = 30;
            bonuses["attack5_name"] = "Imposing Presence";
            bonuses["attack5_size"] = "";
            bonuses["attack5_type"] = "Spell";
            bonuses["attack5_primary"] = "Fear";
            bonuses["attack5_ob"] = 0;
            break;
        case "crebain":
            bonuses["creature_type"] = "Crebain";
            bonuses["creature_level"] = 2;
            bonuses["creature_number_of_appearance"] = 100;
            bonuses["creature_size"] = "Small";
            bonuses["weight"] = 5;
            bonuses["creature_armorworn"] = "no_armor";
            bonuses["creature_speed"] = "FA";
            bonuses["defensive_race_bonus"] = 50;
            bonuses["essence_race_bonus"] = 0;
            bonuses["channeling_race_bonus"] = 0;
            bonuses["poison_race_bonus"] = 0;
            bonuses["disease_race_bonus"] = 0;
            bonuses["heat_race_bonus"] = 0;
            bonuses["cold_race_bonus"] = 0;
            bonuses["creature_hit_points"] = 10;
            bonuses["creature_hit_points_max"] = 10;
            bonuses["creature_critical"] = "regular";
            bonuses["attack1_name"] = "Beak";
            bonuses["attack1_size"] = "Small";
            bonuses["attack1_type"] = "Pincer/Beak";
            bonuses["attack1_ob"] = 25;
            break;
            //TODO - Finish out the rest of the creatures stats
        default:
            break;
    }
    return bonuses;
}

/* CREATURE PENALTIES Worker */
on("clicked:recalculate sheet:opened change:creature_status_stunned change:creature_status_down change:creature_status_onelimbout change:creature_activity_penalty change:encumbrance_penalty change:creature_total_hit_loss_penalty", function() {
    getAttrs(["creature_status_stunned","creature_status_down","creature_status_onelimbout","creature_activity_penalty","encumbrance_penalty","creature_total_hit_loss_penalty"], function(values) {
        let activity_penalty = parseInt(values["creature_activity_penalty"], 10) || 0;
        let status_stunned = parseInt(values["creature_status_stunned"], 10) || 0;
        let status_down = parseInt(values["creature_status_down"], 10) || 0;
        let status_onelimbout = parseInt(values["creature_status_onelimbout"], 10) || 0;
        let encumbrance_penalty = parseInt(values["encumbrance_penalty"], 10) || 0;
        let hit_loss_penalty = parseInt(values["creature_total_hit_loss_penalty"], 10) || 0;

        setAttrs({
            creature_total_mm_penalty: activity_penalty + status_stunned + status_down + status_onelimbout + encumbrance_penalty,
            creature_total_ob_penalty: activity_penalty + hit_loss_penalty,
            creature_total_sm_penalty: activity_penalty
        });
    });
});


/* CREATURE MOVEMENT Worker */

on("clicked:recalculate sheet:opened change:creature_total_mm_penalty change:creature_speed", function() {
    getAttrs(["creature_total_mm_penalty","creature_speed"], function(values) {
        let total_mm_penalty = parseInt(values["creature_total_mm_penalty"], 10) || 0;
        let bonuses = creatureMovement(values["creature_speed"])

        setAttrs({
            "creature_mm_bonus": bonuses["movement_bonus"],
            creature_movement_rate: (total_mm_penalty + bonuses["base_movement_rate"])
        });
    });
});



function creatureMovement(speed) {
    var bonuses = {};

    switch(speed) {
        case "CR":
        bonuses["base_movement_rate"] = 20;
        bonuses["movement_bonus"] = 0;
        break;
        case "VS":
        bonuses["base_movement_rate"] = 40;
        bonuses["movement_bonus"] = 0;
        break;
        case "SL":
        bonuses["base_movement_rate"] = 50;
        bonuses["movement_bonus"] = 10;
        break;
        case "MD":
        bonuses["base_movement_rate"] = 65;
        bonuses["movement_bonus"] = 15;
        break;
        case "MF":
        bonuses["base_movement_rate"] = 80;
        bonuses["movement_bonus"] = 20;
        break;
        case "FA":
        bonuses["base_movement_rate"] = 110;
        bonuses["movement_bonus"] = 30;
        break;
        case "VF":
        bonuses["base_movement_rate"] = 140;
        bonuses["movement_bonus"] = 40;
        break;
        case "BF":
        bonuses["base_movement_rate"] = 170;
        bonuses["movement_bonus"] = 50;
        break;
        default:
        bonuses["base_movement_rate"] = 0;
        bonuses["movement_bonus"] = 0;
        break;
    }
    return bonuses;
}

/* CREATURE QUICKNESS worker */
on("clicked:recalculate sheet:opened change:creature_quickness", function() {
    getAttrs(["creature_quickness"], function(values) {
        let bonuses = creatureDefensiveModifiers(values["creature_quickness"])
        setAttrs({
            "creature_chargelunge_db_mod": bonuses["charge_lunge"],
            "creature_fleeevade_db_mod": bonuses["flee_evade"]
        });
    });
});

function creatureDefensiveModifiers(speed) {
    var bonuses = {};

    switch(speed) {
        case "CR":
        bonuses["charge_lunge"] = 0;
        bonuses["flee_evade"] = 0;
        break;
        case "VS":
        bonuses["charge_lunge"] = 0;
        bonuses["flee_evade"] = 0;
        break;
        case "SL":
        bonuses["charge_lunge"] = 0;
        bonuses["flee_evade"] = 5;
        break;
        case "MD":
        bonuses["charge_lunge"] = -5;
        bonuses["flee_evade"] = 10;
        break;
        case "MF":
        bonuses["charge_lunge"] = -10;
        bonuses["flee_evade"] = 15;
        break;
        case "FA":
        bonuses["charge_lunge"] = -15;
        bonuses["flee_evade"] = 20;
        break;
        case "VF":
        bonuses["charge_lunge"] = -20;
        bonuses["flee_evade"] = 30;
        break;
        case "BF":
        bonuses["charge_lunge"] = -20;
        bonuses["flee_evade"] = 40;
        break;
        default:
        bonuses["charge_lunge"] = 0;
        bonuses["flee_evade"] = 0;
        break;
    }
    return bonuses;
}

/* CREATURE HIT LOSS Worker */
on("clicked:recalculate sheet:opened change:creature_hit_points change:creature_hit_points_max", function() {
    getAttrs(["creature_hit_points","creature_hit_points_max"], function(values) {
        let hit_points = parseInt(values["creature_hit_points"], 10) || 0;
        let hit_points_max = parseInt(values["creature_hit_points_max"], 10) || 0;
        let hit_loss_penalty = ((2 * hit_points) < hit_points_max) ? -20 : 0;
        setAttrs({
            creature_total_hit_loss_penalty: hit_loss_penalty
        });
    });
});


/* CREATURE ATTACKS Worker */

const npcattacks = ["1", "2", "3", "4", "5"];
npcattacks.forEach(npcattack => {
    on(`clicked:recalculate change:attack${npcattack}_type change:attack${npcattack}_size`, () => {
        getAttrs([`attack${npcattack}_type`,`attack${npcattack}_size`], function(values) {
            let attack_type = values[`attack${npcattack}_type`] || "";
            let attack_size = values[`attack${npcattack}_size`] || "";
            let bonuses = critCalc(attack_size, attack_type);
    
            switch(attack_type) {
                case "Weapon":
                case "Touch":
                case "Spell":
                    break;
                default:
                setAttrs({
                    [`attack${npcattack}_primary`]: bonuses["primary"] || "",
                    [`attack${npcattack}_secondary`]: bonuses["secondary"] || ""
                });
            }

        });
    });
});


function critCalc(attack_size, attack_type) {
    var bonuses = {};

    switch (attack_size) {
        case "Tiny":
            bonuses["primary"] = "Slash(T)";
            break;
        default:
            switch (attack_type) {
                case "Pincer/Beak":
                    bonuses["primary"] = "Slash";
                    switch (attack_size) {
                        case "Large":
                        case "Huge":
                            bonuses["secondary"] = "Crush";
                            break;
                        default:
                            break;
                    }
                    break;
                case "Bite":
                    bonuses["primary"] = "Puncture";
                    bonuses["secondary"] = "Slash (C)";
                    break;
                case "Claw":
                    bonuses["primary"] = "Slash";
                    switch (attack_size) {
                        case "Large":
                        case "Huge":
                            bonuses["secondary"] = "Puncture (B)";
                            break;
                        default:
                            break;
                    }
                    break;
                case "Horn/Tusk":
                case "Stinger":
                    bonuses["primary"] = "Puncture";
                    switch (attack_size) {
                        case "Large":
                        case "Huge":
                            bonuses["secondary"] = "Crush (C)";
                            break;
                        default:
                            break;
                    }
                    break;
                case "Grapple/Swallow":
                    bonuses["primary"] = "Grapple";
                    bonuses["secondary"] = "Unbalance (C)";
                    break;
                case "Ram":
                case "Bash/Slug":
                    bonuses["primary"] = "Unbalance";
                    switch (attack_size) {
                        case "Large":
                        case "Huge":
                            bonuses["secondary"] = "Crush (C)";
                            break;
                        default:
                            break;
                    }
                    break;
                case "Trample/Stomp":
                case "Crush":
                    bonuses["primary"] = "Crush";
                    switch (attack_size) {
                        case "Large":
                        case "Huge":
                            bonuses["secondary"] = "Crush";
                            break;
                        default:
                            break;
                    }
                    break;
                case "Fist/Kick":
                    bonuses["primary"] = "Unbalance (A)";
                    break;
                case "Wrestling/Tackle":
                    bonuses["primary"] = "Grapple (A)";
                    break;
                default:
                    break;
            }
            break;
    }
    return bonuses;
}

/* RACE Worker */
on("clicked:recalculate change:race", function(eventInfo) {
    getAttrs(["race"], function(values) {
        TAS.log("Race  bonus  " + eventInfo.previousValue + " to " +  eventInfo.newValue)
        let race = values["race"];

        let bonuses = raceBonuses(race);
        TAS.log("Strength skill bonus for race:" +  race + " is " + bonuses["attr_stat_st_race_bonus"]);
        switch (race) {
            case "custom":
                break;
            default:
                setAttrs({
                    "stat_st_race_bonus": bonuses["stat_st_race_bonus"] || 0,
                    "stat_ag_race_bonus": bonuses["stat_ag_race_bonus"] || 0,
                    "stat_co_race_bonus": bonuses["stat_co_race_bonus"] || 0,
                    "stat_ig_race_bonus": bonuses["stat_ig_race_bonus"] || 0,
                    "stat_it_race_bonus": bonuses["stat_it_race_bonus"] || 0,
                    "stat_pr_race_bonus": bonuses["stat_pr_race_bonus"] || 0,
                    "defensive_race_bonus": bonuses["defensive_race_bonus"] || 0,
                    "defensive_ranged_race_bonus": bonuses["defensive_race_bonus"] || 0,
                    "essence_race_bonus": bonuses["essence_race_bonus"] || 0,
                    "channeling_race_bonus": bonuses["channeling_race_bonus"] || 0,
                    "poison_race_bonus": bonuses["poison_race_bonus"] || 0,
                    "disease_race_bonus": bonuses["disease_race_bonus"] || 0,
                    "cold_race_bonus": bonuses["cold_race_bonus"] || 0,
                    "heat_race_bonus": bonuses["heat_race_bonus"] || 0,
                    "vision_dark": bonuses["vision_dark"] || 0,
                    "vision_dim": bonuses["vision_dim"] || 0,
                    "vision_starmoon": bonuses["vision_starmoon"] || 0,
                    "skill_acrobatics_race_bonus": bonuses["skill_boathandling_race_bonus"] || 0,
                    "skill_acting_race_bonus": bonuses["skill_acting_race_bonus"] || 0,
                    "skill_animalhandling_race_bonus": bonuses["skill_animalhandling_race_bonus"] || 0,
                    "skill_appraisal_race_bonus": bonuses["skill_appraisal_race_bonus"] || 0,
                    "skill_boathandling_race_bonus": bonuses["skill_boathandling_race_bonus"] || 0,
                    "skill_caving_race_bonus": bonuses["skill_caving_race_bonus"] || 0,
                    "skill_contortions_race_bonus": bonuses["skill_contortions_race_bonus"] || 0,
                    "skill_cookery_race_bonus": bonuses["skill_cookery_race_bonus"] || 0,
                    "skill_firstaid_race_bonus": bonuses["skill_firstaid_race_bonus"] || 0,
                    "skill_foraging_race_bonus": bonuses["skill_foraging_race_bonus"] || 0,
                    "skill_gambling_race_bonus": bonuses["skill_gambling_race_bonus"] || 0,
                    "skill_meditation_race_bonus": bonuses["skill_meditation_race_bonus"] || 0,
                    "skill_ropemastery_race_bonus": bonuses["skill_ropemastery_race_bonus"] || 0,
                    "skill_signaling_race_bonus": bonuses["skill_signaling_race_bonus"] || 0,
                    "skill_skywatching_race_bonus": bonuses["skill_skywatching_race_bonus"] || 0,
                    "skill_trickery_race_bonus": bonuses["skill_trickery_race_bonus"] || 0,
                    "skill_noarmor_ad_ranks": bonuses["skill_noarmor_ad_ranks"] || 0,
                    "skill_softleather_ad_ranks": bonuses["skill_softleather_ad_ranks"] || 0,
                    "skill_rigidleather_ad_ranks": bonuses["skill_rigidleather_ad_ranks"] || 0,
                    "skill_chain_ad_ranks": bonuses["skill_chain_ad_ranks"] || 0,
                    "skill_1hedged_ad_ranks": bonuses["skill_1hedged_ad_ranks"] || 0,
                    "skill_1hconc_ad_ranks": bonuses["skill_1hconc_ad_ranks"] || 0,
                    "skill_2handed_ad_ranks": bonuses["skill_2handed_ad_ranks"] || 0,
                    "skill_thrown_ad_ranks": bonuses["skill_thrown_ad_ranks"] || 0,
                    "skill_missile_ad_ranks": bonuses["skill_missile_ad_ranks"] || 0,
                    "skill_polearm_ad_ranks": bonuses["skill_polearm_ad_ranks"] || 0,
                    "skill_climb_ad_ranks": bonuses["skill_climb_ad_ranks"] || 0,
                    "skill_ride_ad_ranks": bonuses["skill_ride_ad_ranks"] || 0,
                    "skill_swim_ad_ranks": bonuses["skill_swim_ad_ranks"] || 0,
                    "skill_ambush_ad_ranks": bonuses["skill_ambush_ad_ranks"] || 0,
                    "skill_stalkhide_ad_ranks": bonuses["skill_stalkhide_ad_ranks"] || 0,
                    "skill_picklock_ad_ranks": bonuses["skill_picklock_ad_ranks"] || 0,
                    "skill_disarmtrap_ad_ranks": bonuses["skill_disarmtrap_ad_ranks"] || 0,
                    "skill_readrunes_ad_ranks": bonuses["skill_readrunes_ad_ranks"] || 0,
                    "skill_useitems_ad_ranks": bonuses["skill_useitems_ad_ranks"] || 0,
                    "skill_perception_ad_ranks": bonuses["skill_perception_ad_ranks"] || 0,
                    "skill_bodydev_ad_ranks": bonuses["skill_bodydev_ad_ranks"] || 0,
                    "race_spell_ad_ranks": bonuses["race_spell_ad_ranks"] || 0,
                    "race_language_ad_ranks": bonuses["race_language_ad_ranks"] || 0,
                    "race_bg_options": bonuses["race_bg_options"] || 0,
                    "skill_noarmor_race_bonus": bonuses["skill_noarmor_race_bonus"] || 0,
                    "skill_softleather_race_bonus": bonuses["skill_softleather_race_bonus"] || 0,
                    "skill_rigidleather_race_bonus": bonuses["skill_skill_rigidleather_race_bonus"] || 0,
                    "skill_chain_race_bonus": bonuses["skill_skill_chain_race_bonus"] || 0,
                    "skill_plate_race_bonus": bonuses["skill_plate_race_bonus"] || 0,
                    "skill_1hedged_race_bonus": bonuses["skill_1hedged_race_bonus"] || 0,
                    "skill_1hconc_race_bonus": bonuses["skill_1hconc_race_bonus"] || 0,
                    "skill_2handed_race_bonus": bonuses["skill_2handed_race_bonus"] || 0,
                    "skill_thrown_race_bonus": bonuses["skill_thrown_race_bonus"] || 0,
                    "skill_missile_race_bonus": bonuses["skill_missile_race_bonus"] || 0,
                    "skill_polearm_race_bonus": bonuses["skill_polearm_race_bonus"] || 0,
                    "skill_climb_race_bonus": bonuses["skill_climb_race_bonus"] || 0,
                    "skill_ride_race_bonus": bonuses["skill_ride_race_bonus"] || 0,
                    "skill_swim_race_bonus": bonuses["skill_swim_race_bonus"] || 0,
                    "skill_track_race_bonus": bonuses["skill_track_race_bonus"] || 0,
                    "skill_stalkhide_race_bonus": bonuses["skill_stalkhide_race_bonus"] || 0,
                    "skill_picklock_race_bonus": bonuses["skill_picklock_race_bonus"] || 0,
                    "skill_disarmtrap_race_bonus": bonuses["skill_disarmtrap_race_bonus"] || 0,
                    "skill_readrunes_race_bonus": bonuses["skill_readrunes_race_bonus"] || 0,
                    "skill_useitems_race_bonus": bonuses["skill_useitems_race_bonus"] || 0,
                    "skill_directedspells_race_bonus": bonuses["skill_directedspells_race_bonus"] || 0,
                    "skill_perception_race_bonus": bonuses["skill_perception_race_bonus"] || 0,
                    "skill_bodydev_race_bonus": bonuses["skill_bodydev_race_bonus"] || 0,
                    "skill_basespells_race_bonus": bonuses["skill_basespells_race_bonus"] || 0
                });
                break;
        }
    });
});

function raceBonuses(race) {
    var bonuses = {};

    switch(race) {
        case "Dwarf":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = -5;
        bonuses["stat_co_race_bonus"] = 15;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = -5;
        bonuses["stat_pr_race_bonus"] = -5;
        bonuses["essence_race_bonus"] = 40;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 10;
        bonuses["disease_race_bonus"] = 10;
        bonuses["cold_race_bonus"] = 30;
        bonuses["heat_race_bonus"] = 30;
        bonuses["vision_dark"] = 10;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 100;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 1;
        bonuses["skill_chain_ad_ranks"] = 3;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 4;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 1;
        bonuses["skill_disarmtrap_ad_ranks"] = 1;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 2;
        bonuses["skill_bodydev_ad_ranks"] = 3;
        bonuses["race_spell_ad_ranks"] = 3;
        bonuses["race_language_ad_ranks"] = 4;
        bonuses["race_bg_options"] = 4;
        break;
        case "Umli":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 10;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = -5;
        bonuses["stat_pr_race_bonus"] = -5;
        bonuses["essence_race_bonus"] = 20;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 5;
        bonuses["disease_race_bonus"] = 5;
        bonuses["cold_race_bonus"] = 30;
        bonuses["heat_race_bonus"] = -15;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 3;
        bonuses["skill_rigidleather_ad_ranks"] = 3;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 3;
        bonuses["skill_2handed_ad_ranks"] = 1;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 1;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 5;
        bonuses["race_language_ad_ranks"] = 3;
        bonuses["race_bg_options"] = 4;
        break;
        case "Noldo Elf":
        bonuses["stat_st_race_bonus"] = 0;
        bonuses["stat_ag_race_bonus"] = 15;
        bonuses["stat_co_race_bonus"] = 10;
        bonuses["stat_ig_race_bonus"] = 5;
        bonuses["stat_it_race_bonus"] = 5;
        bonuses["stat_pr_race_bonus"] = 15;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 10;
        bonuses["disease_race_bonus"] = 100;
        bonuses["cold_race_bonus"] = 20;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 0;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 1;
        bonuses["skill_swim_ad_ranks"] = 2;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 2;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 2;
        bonuses["skill_useitems_ad_ranks"] = 1;
        bonuses["skill_perception_ad_ranks"] = 3;
        bonuses["skill_bodydev_ad_ranks"] = 1;
        bonuses["race_spell_ad_ranks"] = 40;
        bonuses["race_language_ad_ranks"] = 10;
        bonuses["race_bg_options"] = 2;
        bonuses["skill_useitems_race_bonus"] = 20;
        break;
        case "Sindar Elf":
        bonuses["stat_st_race_bonus"] = 0;
        bonuses["stat_ag_race_bonus"] = 10;
        bonuses["stat_co_race_bonus"] = 5;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 5;
        bonuses["stat_pr_race_bonus"] = 10;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 10;
        bonuses["disease_race_bonus"] = 100;
        bonuses["cold_race_bonus"] = 15;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 0;
        bonuses["skill_missile_ad_ranks"] = 2;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 1;
        bonuses["skill_swim_ad_ranks"] = 2;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 3;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 1;
        bonuses["skill_useitems_ad_ranks"] = 1;
        bonuses["skill_perception_ad_ranks"] = 3;
        bonuses["skill_bodydev_ad_ranks"] = 1;
        bonuses["race_spell_ad_ranks"] = 30;
        bonuses["race_language_ad_ranks"] = 8;
        bonuses["race_bg_options"] = 3;
        bonuses["skill_boathandling_race_bonus"] = 10;
        break;
        case "Silvan Elf":
        bonuses["stat_st_race_bonus"] = 0;
        bonuses["stat_ag_race_bonus"] = 10;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 5;
        bonuses["stat_pr_race_bonus"] = 5;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 10;
        bonuses["disease_race_bonus"] = 100;
        bonuses["cold_race_bonus"] = 10;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 0;
        bonuses["skill_missile_ad_ranks"] = 3;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 2;
        bonuses["skill_ride_ad_ranks"] = 1;
        bonuses["skill_swim_ad_ranks"] = 3;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 4;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 1;
        bonuses["skill_useitems_ad_ranks"] = 1;
        bonuses["skill_perception_ad_ranks"] = 3;
        bonuses["skill_bodydev_ad_ranks"] = 1;
        bonuses["race_spell_ad_ranks"] = 20;
        bonuses["race_language_ad_ranks"] = 6;
        bonuses["race_bg_options"] = 4;
        bonuses["skill_stalkhide_race_bonus"] = 10;
        bonuses["skill_trickery_race_bonus"] = 10;
        break;
        case "Half-Elf":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 5;
        bonuses["stat_co_race_bonus"] = 5;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 5;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 5;
        bonuses["disease_race_bonus"] = 50;
        bonuses["cold_race_bonus"] = 5;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 500;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 1;
        bonuses["skill_chain_ad_ranks"] = 1;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 0;
        bonuses["skill_missile_ad_ranks"] = 2;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 1;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 2;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 1;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 1;
        bonuses["race_spell_ad_ranks"] = 10;
        bonuses["race_language_ad_ranks"] = 4;
        bonuses["race_bg_options"] = 3;
        break;
        case "Hobbit":
        bonuses["stat_st_race_bonus"] = -10;
        bonuses["stat_ag_race_bonus"] = 15;
        bonuses["stat_co_race_bonus"] = 15;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = -5;
        bonuses["stat_pr_race_bonus"] = -5;
        bonuses["essence_race_bonus"] = 50;
        bonuses["channeling_race_bonus"] = 20;
        bonuses["poison_race_bonus"] = 30;
        bonuses["disease_race_bonus"] = 15;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 2;
        bonuses["skill_missile_ad_ranks"] = 2;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 2;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 5;
        bonuses["skill_picklock_ad_ranks"] = 1;
        bonuses["skill_disarmtrap_ad_ranks"] = 1;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 4;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 0;
        bonuses["race_language_ad_ranks"] = 3;
        bonuses["race_bg_options"] = 3;
        break;
        case "Beorning":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 1;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 2;
        bonuses["skill_climb_ad_ranks"] = 2;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 2;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 4;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 3;
        bonuses["race_spell_ad_ranks"] = 3;
        bonuses["race_language_ad_ranks"] = 3;
        bonuses["race_bg_options"] = 5;
        break;
        case "Black Numenorean":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["defensive_race_bonus"] = -10;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 2;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 1;
        bonuses["skill_swim_ad_ranks"] = 3;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 1;
        bonuses["skill_useitems_ad_ranks"] = 1;
        bonuses["skill_perception_ad_ranks"] = 0;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 10;
        bonuses["race_language_ad_ranks"] = 6;
        bonuses["race_bg_options"] = 3;
        bonuses["skill_1hedged_race_bonus"] = 10;
        bonuses["skill_1hconc_race_bonus"] = 10;
        bonuses["skill_2handed_race_bonus"] = 10;
        bonuses["skill_polearm_race_bonus"] = 10;
        bonuses["skill_boathandling_race_bonus"] = 25;
        break;
        case "Corsair":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 2;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 2;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 5;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 0;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 5;
        bonuses["race_language_ad_ranks"] = 5;
        bonuses["race_bg_options"] = 5;
        bonuses["skill_skywatching_race_bonus"] = 25;
        break;
        case "Dorwinrim":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 30;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 1;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 1;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 2;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 0;
        bonuses["skill_bodydev_ad_ranks"] = 1;
        bonuses["race_spell_ad_ranks"] = 10;
        bonuses["race_language_ad_ranks"] = 5;
        bonuses["race_bg_options"] = 5;
        bonuses["skill_boathandling_race_bonus"] = 10;
        bonuses["skill_publicspeaking_race_bonus"] = 15;
        bonuses["skill_acting_race_bonus"] = 15;
        break;
        case "Dunedain":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 10;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 5;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 5;
        bonuses["disease_race_bonus"] = 5;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 1;
        bonuses["skill_chain_ad_ranks"] = 2;
        bonuses["skill_1hedged_ad_ranks"] = 2;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 1;
        bonuses["skill_thrown_ad_ranks"] = 0;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 1;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 1;
        bonuses["skill_useitems_ad_ranks"] = 1;
        bonuses["skill_perception_ad_ranks"] = 0;
        bonuses["skill_bodydev_ad_ranks"] = 3;
        bonuses["race_spell_ad_ranks"] = 10;
        bonuses["race_language_ad_ranks"] = 6;
        bonuses["race_bg_options"] = 3;
        break;
        case "Dunlending":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 1;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 1;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 2;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 2;
        bonuses["skill_climb_ad_ranks"] = 5;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 2;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 4;
        bonuses["skill_climb_race_bonus"] = 20;
        bonuses["skill_acting_race_bonus"] = 20;
        bonuses["skill_publicspeaking_race_bonus"] = 20;
        bonuses["skill_acrobatics_race_bonus"] = 20;
        break;
        case "Easterling":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 2;
        bonuses["skill_polearm_ad_ranks"] = 2;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 5;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 2;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 4;
        bonuses["skill_animalhandling_race_bonus"] = 20;
        break;
        case "Eriadoran":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 1;
        bonuses["skill_rigidleather_ad_ranks"] = 1;
        bonuses["skill_chain_ad_ranks"] = 1;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 1;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 1;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 3;
        bonuses["race_language_ad_ranks"] = 4;
        bonuses["race_bg_options"] = 5;
        break;
        case "Gondorian":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 0;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 1;
        bonuses["skill_useitems_ad_ranks"] = 1;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 1;
        bonuses["race_spell_ad_ranks"] = 15;
        bonuses["race_language_ad_ranks"] = 5;
        bonuses["race_bg_options"] = 5;
        break;
        case "Haradrim":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = -10;
        bonuses["heat_race_bonus"] = 10;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 1;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 2;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 7;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 2;
        bonuses["race_language_ad_ranks"] = 3;
        bonuses["race_bg_options"] = 5;
        break;
        case "Lossoth":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 20;
        bonuses["heat_race_bonus"] = -20;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 3;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 3;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 2;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 2;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 4;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 3;
        bonuses["race_spell_ad_ranks"] = 5;
        bonuses["race_language_ad_ranks"] = 1;
        bonuses["race_bg_options"] = 4;
        bonuses["skill_perception_race_bonus"] = 10;
        break;
        case "Rohirrim":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 1;
        bonuses["skill_chain_ad_ranks"] = 2;
        bonuses["skill_1hedged_ad_ranks"] = 2;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 0;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 8;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 3;
        bonuses["race_language_ad_ranks"] = 4;
        bonuses["race_bg_options"] = 5;
        break;
        case "Variag":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 1;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 2;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 0;
        bonuses["skill_ride_ad_ranks"] = 4;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 1;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 5;
        bonuses["race_language_ad_ranks"] = 3;
        bonuses["race_bg_options"] = 4;
        break;
        case "Woodman":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 0;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = 0;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 0;
        bonuses["vision_dim"] = 0;
        bonuses["vision_starmoon"] = 0;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 1;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 1;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 3;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 1;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 4;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 3;
        bonuses["race_spell_ad_ranks"] = 3;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 5;
        bonuses["skill_climb_race_bonus"] = 20;
        bonuses["skill_acrobatics_race_bonus"] = 20;
        bonuses["skill_foraging_race_bonus"] = 10;
        break;
        case "Wose":
        bonuses["stat_st_race_bonus"] = 0;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 5;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = -5;
        bonuses["essence_race_bonus"] = 20;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 0;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 1000;
        bonuses["vision_dim"] = 1000;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 3;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 2;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 4;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 3;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 2;
        bonuses["skill_ambush_ad_ranks"] = 2;
        bonuses["skill_stalkhide_ad_ranks"] = 4;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 3;
        bonuses["race_spell_ad_ranks"] = 5;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 5;
        bonuses["skill_track_race_bonus"] = 25;
        bonuses["skill_foraging_race_bonus"] = 15;
        break;
        case "Orc":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = -5;
        bonuses["stat_co_race_bonus"] = 15;
        bonuses["stat_ig_race_bonus"] = -10;
        bonuses["stat_it_race_bonus"] = -10;
        bonuses["stat_pr_race_bonus"] = -10;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 20;
        bonuses["disease_race_bonus"] = 5;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 30;
        bonuses["vision_dark"] = 10;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 1;
        bonuses["skill_rigidleather_ad_ranks"] = 3;
        bonuses["skill_chain_ad_ranks"] = 2;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 3;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 1;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 0;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 0;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 2;
        break;
        case "Uruk-Hai":
        bonuses["stat_st_race_bonus"] = 10;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 20;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = -5;
        bonuses["stat_pr_race_bonus"] = -10;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 20;
        bonuses["disease_race_bonus"] = 5;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 30;
        bonuses["vision_dark"] = 10;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 1;
        bonuses["skill_rigidleather_ad_ranks"] = 3;
        bonuses["skill_chain_ad_ranks"] = 3;
        bonuses["skill_1hedged_ad_ranks"] = 4;
        bonuses["skill_1hconc_ad_ranks"] = 1;
        bonuses["skill_2handed_ad_ranks"] = 1;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 1;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 1;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 1;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 3;
        bonuses["race_spell_ad_ranks"] = 0;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 2;
        break;
        case "Half-Orc":
        bonuses["stat_st_race_bonus"] = 5;
        bonuses["stat_ag_race_bonus"] = 0;
        bonuses["stat_co_race_bonus"] = 5;
        bonuses["stat_ig_race_bonus"] = 0;
        bonuses["stat_it_race_bonus"] = 0;
        bonuses["stat_pr_race_bonus"] = -5;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 10;
        bonuses["disease_race_bonus"] = 0;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 15;
        bonuses["vision_dark"] = 10;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 1;
        bonuses["skill_rigidleather_ad_ranks"] = 3;
        bonuses["skill_chain_ad_ranks"] = 1;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 3;
        bonuses["skill_2handed_ad_ranks"] = 0;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 1;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 1;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 0;
        bonuses["skill_bodydev_ad_ranks"] = 2;
        bonuses["race_spell_ad_ranks"] = 0;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 3;
        break;
        case "Troll":
        bonuses["stat_st_race_bonus"] = 15;
        bonuses["stat_ag_race_bonus"] = -10;
        bonuses["stat_co_race_bonus"] = 15;
        bonuses["stat_ig_race_bonus"] = -15;
        bonuses["stat_it_race_bonus"] = -15;
        bonuses["stat_pr_race_bonus"] = -10;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 30;
        bonuses["disease_race_bonus"] = 10;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 10;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 3;
        bonuses["skill_thrown_ad_ranks"] = 1;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 0;
        bonuses["skill_bodydev_ad_ranks"] = 5;
        bonuses["race_spell_ad_ranks"] = 0;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 1;
        break;
        case "Olog-Hai":
        bonuses["stat_st_race_bonus"] = 20;
        bonuses["stat_ag_race_bonus"] = -5;
        bonuses["stat_co_race_bonus"] = 15;
        bonuses["stat_ig_race_bonus"] = -5;
        bonuses["stat_it_race_bonus"] = -10;
        bonuses["stat_pr_race_bonus"] = -10;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 20;
        bonuses["disease_race_bonus"] = 10;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 10;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 0;
        bonuses["skill_rigidleather_ad_ranks"] = 0;
        bonuses["skill_chain_ad_ranks"] = 0;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 5;
        bonuses["skill_thrown_ad_ranks"] = 2;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 1;
        bonuses["skill_bodydev_ad_ranks"] = 5;
        bonuses["race_spell_ad_ranks"] = 0;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 1;
        break;
        case "Half-Troll":
        bonuses["stat_st_race_bonus"] = 10;
        bonuses["stat_ag_race_bonus"] = -5;
        bonuses["stat_co_race_bonus"] = 10;
        bonuses["stat_ig_race_bonus"] = -5;
        bonuses["stat_it_race_bonus"] = -5;
        bonuses["stat_pr_race_bonus"] = -5;
        bonuses["essence_race_bonus"] = 0;
        bonuses["channeling_race_bonus"] = 0;
        bonuses["poison_race_bonus"] = 15;
        bonuses["disease_race_bonus"] = 5;
        bonuses["cold_race_bonus"] = 0;
        bonuses["heat_race_bonus"] = 0;
        bonuses["vision_dark"] = 10;
        bonuses["vision_dim"] = 100;
        bonuses["vision_starmoon"] = 1000;
        bonuses["skill_noarmor_ad_ranks"] = 1;
        bonuses["skill_softleather_ad_ranks"] = 1;
        bonuses["skill_rigidleather_ad_ranks"] = 2;
        bonuses["skill_chain_ad_ranks"] = 3;
        bonuses["skill_1hedged_ad_ranks"] = 0;
        bonuses["skill_1hconc_ad_ranks"] = 0;
        bonuses["skill_2handed_ad_ranks"] = 4;
        bonuses["skill_thrown_ad_ranks"] = 2;
        bonuses["skill_missile_ad_ranks"] = 0;
        bonuses["skill_polearm_ad_ranks"] = 0;
        bonuses["skill_climb_ad_ranks"] = 1;
        bonuses["skill_ride_ad_ranks"] = 0;
        bonuses["skill_swim_ad_ranks"] = 0;
        bonuses["skill_ambush_ad_ranks"] = 0;
        bonuses["skill_stalkhide_ad_ranks"] = 0;
        bonuses["skill_picklock_ad_ranks"] = 0;
        bonuses["skill_disarmtrap_ad_ranks"] = 0;
        bonuses["skill_readrunes_ad_ranks"] = 0;
        bonuses["skill_useitems_ad_ranks"] = 0;
        bonuses["skill_perception_ad_ranks"] = 0;
        bonuses["skill_bodydev_ad_ranks"] = 4;
        bonuses["race_spell_ad_ranks"] = 0;
        bonuses["race_language_ad_ranks"] = 2;
        bonuses["race_bg_options"] = 2;
        break;
        default:
        break;
    }
    return bonuses;
}


/* REALM Worker */
on("clicked:recalculate change:profession", function(eventInfo) {
    getAttrs(["profession"], function(values) {
        let profession = values["profession"];

        let realms = profRealm(profession)

        setAttrs({
            "realm": realms["realm"] || ""
        });
    });
});

function profRealm(profession) {
    var realms = {};

    switch(profession) {
        case "animist":
        realms["realm"] = "Channeling";
        break;
        case "bard":
        realms["realm"] = "Essence";
        break;
        case "mage":
        realms["realm"] = "Essence";
        break;
        case "ranger":
        realms["realm"] = "Channeling";
        break;
        default:
        break;
    }
    return realms;
}

/* PROFESSION Worker */
on("clicked:recalculate change:level change:profession", function(eventInfo) {
    getAttrs(["level", "profession"], function(values) {
        TAS.log("Profession skill bonus  " + eventInfo.previousValue + " to " +  eventInfo.newValue)
        let intLevel = parseInt(values["level"], 10) || 1;
        let profession = values["profession"] || "";

        let bonuses = profBonuses(profession)
        TAS.log("Weapon skill bonus level:" + intLevel + " and profession:" +  profession + " is " + bonuses["weapon_skill_prof_bonus"])

        switch (profession) {
            case "custom":
                break;
            default:
                setAttrs({
                    "skill_1hedged_prof_bonus": bonuses["weapon_skill_prof_bonus"] * intLevel || 0,
                    "skill_1hconc_prof_bonus": bonuses["weapon_skill_prof_bonus"] * intLevel || 0,
                    "skill_2handed_prof_bonus": bonuses["weapon_skill_prof_bonus"] * intLevel || 0,
                    "skill_missile_prof_bonus": bonuses["weapon_skill_prof_bonus"] * intLevel || 0,
                    "skill_thrown_prof_bonus": bonuses["weapon_skill_prof_bonus"] * intLevel || 0,
                    "skill_polearm_prof_bonus": bonuses["weapon_skill_prof_bonus"] * intLevel || 0,
                    "skill_climb_prof_bonus": bonuses["general_skill_prof_bonus"] * intLevel || 0,
                    "skill_ride_prof_bonus": bonuses["general_skill_prof_bonus"] * intLevel || 0,
                    "skill_swim_prof_bonus": bonuses["general_skill_prof_bonus"] * intLevel || 0,
                    "skill_track_prof_bonus": bonuses["general_skill_prof_bonus"] * intLevel || 0,
                    "skill_stalkhide_prof_bonus": bonuses["stalkhide_skill_prof_bonus"] * intLevel || 0,
                    "skill_picklock_prof_bonus": bonuses["subterfuge_skill_prof_bonus"] * intLevel || 0,
                    "skill_disarmtrap_prof_bonus": bonuses["subterfuge_skill_prof_bonus"] * intLevel || 0,
                    "skill_readrunes_prof_bonus": bonuses["magical_skill_prof_bonus"] * intLevel || 0,
                    "skill_useitems_prof_bonus": bonuses["magical_skill_prof_bonus"] * intLevel || 0,
                    "skill_directedspells_prof_bonus": bonuses["directedspell_skill_prof_bonus"] * intLevel || 0,
                    "skill_perception_prof_bonus": bonuses["perception_skill_prof_bonus"] * intLevel || 0,
                    "skill_basespells_prof_bonus": bonuses["basespell_skill_prof_bonus"] * intLevel || 0,
                    "skill_bodydev_prof_bonus": bonuses["bodydev_skill_prof_bonus"] * intLevel || 0,
                    "skill_novicestriking_prof_bonus": bonuses["martialarts_skill_prof_bonus"] * intLevel || 0,
                    "skill_standardstriking_prof_bonus": bonuses["martialarts_skill_prof_bonus"] * intLevel || 0,
                    "skill_expertstriking_prof_bonus": bonuses["martialarts_skill_prof_bonus"] * intLevel || 0,
                    "skill_novicesweeps_prof_bonus": bonuses["martialarts_skill_prof_bonus"] * intLevel || 0,
                    "skill_standardsweeps_prof_bonus": bonuses["martialarts_skill_prof_bonus"] * intLevel || 0,
                    "skill_expertsweeps_prof_bonus": bonuses["martialarts_skill_prof_bonus"] * intLevel || 0,
                    "movingmaneuver_profession_development": bonuses["movingmaneuver_profession_development"] || 0,
                    "weapon_profession_development": bonuses["weapon_profession_development"] || 0,
                    "general_profession_development": bonuses["general_profession_development"] || 0,
                    "subterfuge_profession_development": bonuses["subterfuge_profession_development"] || 0,
                    "magical_profession_development": bonuses["magical_profession_development"] || 0,
                    "bodydev_profession_development": bonuses["bodydev_profession_development"] || 0,
                    "language_profession_development": bonuses["language_profession_development"] || 0,
                    "spell_profession_development": bonuses["spell_profession_development"] || 0,
                    "martialarts_profession_development": bonuses["martialarts_profession_development"] || 0,
                    "adrenaldefense_profession_development": bonuses["adrenaldefense_profession_development"] || 0
                });
                break;
        }
    });
});

function profBonuses(profession) {
    var bonuses = {};

    switch(profession) {
        case "animist":
            bonuses["general_skill_prof_bonus"] = 1;
            bonuses["magical_skill_prof_bonus"] = 1;
            bonuses["perception_skill_prof_bonus"] = 1;
            bonuses["directedspell_skill_prof_bonus"] = 2;
            bonuses["basespell_skill_prof_bonus"] = 2;
            bonuses["movingmaneuver_profession_development"] = 1;
            bonuses["weapon_profession_development"] = 1;
            bonuses["general_profession_development"] = 2;
            bonuses["subterfuge_profession_development"] = 1;
            bonuses["magical_profession_development"] = 2;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 2;
            bonuses["spell_profession_development"] = 5;
            break;
        case "bard":
            bonuses["weapon_skill_prof_bonus"] = 1;
            bonuses["general_skill_prof_bonus"] = 1;
            bonuses["subterfuge_skill_prof_bonus"] = 1;
            bonuses["stalkhide_skill_prof_bonus"] = 1;
            bonuses["magical_skill_prof_bonus"] = 1;
            bonuses["directedspell_skill_prof_bonus"] = 1;
            bonuses["perception_skill_prof_bonus"] = 1;
            bonuses["basespell_skill_prof_bonus"] = 1;
            bonuses["movingmaneuver_profession_development"] = 0;
            bonuses["weapon_profession_development"] = 2;
            bonuses["general_profession_development"] = 2;
            bonuses["subterfuge_profession_development"] = 2;
            bonuses["magical_profession_development"] = 3;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 3;
            bonuses["spell_profession_development"] = 2;
            break;
        case "mage":
            bonuses["magical_skill_prof_bonus"] = 2;
            bonuses["directedspell_skill_prof_bonus"] = 3;
            bonuses["basespell_skill_prof_bonus"] = 2;
            bonuses["movingmaneuver_profession_development"] = 0;
            bonuses["weapon_profession_development"] = 0;
            bonuses["general_profession_development"] = 2;
            bonuses["subterfuge_profession_development"] = 0;
            bonuses["magical_profession_development"] = 5;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 2;
            bonuses["spell_profession_development"] = 5;
            break;
        case "ranger":
            bonuses["weapon_skill_prof_bonus"] = 2;
            bonuses["general_skill_prof_bonus"] = 3;
            bonuses["perception_skill_prof_bonus"] = 2;
            bonuses["stalkhide_skill_prof_bonus"] = 2;
            bonuses["movingmaneuver_profession_development"] = 2;
            bonuses["weapon_profession_development"] = 3;
            bonuses["general_profession_development"] = 4;
            bonuses["subterfuge_profession_development"] = 2;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 2;
            bonuses["language_profession_development"] = 1;
            bonuses["spell_profession_development"] = 1;
            break;
        case "scout":
            bonuses["weapon_skill_prof_bonus"] = 1;
            bonuses["general_skill_prof_bonus"] = 1;
            bonuses["subterfuge_skill_prof_bonus"] = 2;
            bonuses["stalkhide_skill_prof_bonus"] = 2;
            bonuses["perception_skill_prof_bonus"] = 3;
            bonuses["movingmaneuver_profession_development"] = 1;
            bonuses["weapon_profession_development"] = 3;
            bonuses["general_profession_development"] = 3;
            bonuses["subterfuge_profession_development"] = 5;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 2;
            bonuses["language_profession_development"] = 1;
            bonuses["spell_profession_development"] = 0;
            break;
        case "warrior":
            bonuses["weapon_skill_prof_bonus"] = 3;
            bonuses["general_skill_prof_bonus"] = 1;
            bonuses["bodydev_skill_prof_bonus"] = 2;
            bonuses["movingmaneuver_profession_development"] = 3;
            bonuses["weapon_profession_development"] = 5;
            bonuses["general_profession_development"] = 2;
            bonuses["subterfuge_profession_development"] = 2;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 3;
            bonuses["language_profession_development"] = 0;
            bonuses["spell_profession_development"] = 0;
            break;
        case "barbarian":
            bonuses["weapon_skill_prof_bonus"] = 2;
            bonuses["general_skill_prof_bonus"] = 3;
            bonuses["bodydev_skill_prof_bonus"] = 2;
            bonuses["movingmaneuver_profession_development"] = 1;
            bonuses["weapon_profession_development"] = 5;
            bonuses["general_profession_development"] = 5;
            bonuses["subterfuge_profession_development"] = 1;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 3;
            bonuses["language_profession_development"] = 0;
            bonuses["spell_profession_development"] = 0;
            break;
        case "burglar":
            bonuses["weapon_skill_prof_bonus"] = 0;
            bonuses["general_skill_prof_bonus"] = 1;
            bonuses["subterfuge_skill_prof_bonus"] = 3;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 0;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 3;
            bonuses["basespell_skill_prof_bonus"] = 0;
            bonuses["movingmaneuver_profession_development"] = 2;
            bonuses["weapon_profession_development"] = 1;
            bonuses["general_profession_development"] = 2;
            bonuses["subterfuge_profession_development"] = 8;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 1;
            bonuses["spell_profession_development"] = 0;
            break;
        case "conjurer":
            bonuses["weapon_skill_prof_bonus"] = 0;
            bonuses["general_skill_prof_bonus"] = 0;
            bonuses["subterfuge_skill_prof_bonus"] = 1;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 1;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 1;
            bonuses["basespell_skill_prof_bonus"] = 1;
            bonuses["movingmaneuver_profession_development"] = 0;
            bonuses["weapon_profession_development"] = 1;
            bonuses["general_profession_development"] = 1;
            bonuses["subterfuge_profession_development"] = 4;
            bonuses["magical_profession_development"] = 3;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 1;
            bonuses["spell_profession_development"] = 4;
            break;
        case "explorer":
            bonuses["weapon_skill_prof_bonus"] = 1;
            bonuses["general_skill_prof_bonus"] = 3;
            bonuses["subterfuge_skill_prof_bonus"] = 2;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 1;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 2;
            bonuses["basespell_skill_prof_bonus"] = 0;
            bonuses["movingmaneuver_profession_development"] = 2;
            bonuses["weapon_profession_development"] = 2;
            bonuses["general_profession_development"] = 5;
            bonuses["subterfuge_profession_development"] = 4;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 1;
            bonuses["spell_profession_development"] = 0;
            break;
        case "rogue":
            bonuses["weapon_skill_prof_bonus"] = 2;
            bonuses["general_skill_prof_bonus"] = 2;
            bonuses["subterfuge_skill_prof_bonus"] = 2;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 0;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 0;
            bonuses["basespell_skill_prof_bonus"] = 0;
            bonuses["movingmaneuver_profession_development"] = 2;
            bonuses["weapon_profession_development"] = 4;
            bonuses["general_profession_development"] = 3;
            bonuses["subterfuge_profession_development"] = 3;
            bonuses["magical_profession_development"] = 1;
            bonuses["bodydev_profession_development"] = 2;
            bonuses["language_profession_development"] = 0;
            bonuses["spell_profession_development"] = 0;
            break;
        case "wizard":
            bonuses["weapon_skill_prof_bonus"] = 0;
            bonuses["general_skill_prof_bonus"] = 0;
            bonuses["subterfuge_skill_prof_bonus"] = 0;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 2;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 0;
            bonuses["basespell_skill_prof_bonus"] = 2;
            bonuses["movingmaneuver_profession_development"] = 0;
            bonuses["weapon_profession_development"] = 0;
            bonuses["general_profession_development"] = 2;
            bonuses["subterfuge_profession_development"] = 0;
            bonuses["magical_profession_development"] = 5;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 2;
            bonuses["spell_profession_development"] = 5;
            break;
        case "monk":
            bonuses["weapon_skill_prof_bonus"] = 0;
            bonuses["general_skill_prof_bonus"] = 1;
            bonuses["subterfuge_skill_prof_bonus"] = 1;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 1;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 1;
            bonuses["basespell_skill_prof_bonus"] = 0;
            bonuses["martialarts_skill_prof_bonus"] = 2;
            bonuses["movingmaneuver_profession_development"] = 0;
            bonuses["weapon_profession_development"] = 1;
            bonuses["general_profession_development"] = 2;
            bonuses["subterfuge_profession_development"] = 2;
            bonuses["magical_profession_development"] = 1;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 1;
            bonuses["spell_profession_development"] = 2;
            bonuses["martialarts_profession_development"] = 3;
            bonuses["adrenaldefense_profession_development"] = 2;
            break;
        case "shapechanger":
            bonuses["weapon_skill_prof_bonus"] = 0;
            bonuses["general_skill_prof_bonus"] = 0;
            bonuses["subterfuge_skill_prof_bonus"] = 0;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 0;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 0;
            bonuses["bodydev_skill_prof_bonus"] = 2;
            bonuses["basespell_skill_prof_bonus"] = 0;
            bonuses["martialarts_skill_prof_bonus"] = 2;
            bonuses["movingmaneuver_profession_development"] = 1;
            bonuses["weapon_profession_development"] = 1;
            bonuses["general_profession_development"] = 1;
            bonuses["subterfuge_profession_development"] = 1;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 3;
            bonuses["language_profession_development"] = 1;
            bonuses["spell_profession_development"] = 0;
            bonuses["martialarts_profession_development"] = 3;
            bonuses["adrenaldefense_profession_development"] = 3;
            break;
        case "warriormonk":
            bonuses["weapon_skill_prof_bonus"] = 0;
            bonuses["general_skill_prof_bonus"] = 1;
            bonuses["subterfuge_skill_prof_bonus"] = 0;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 0;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 0;
            bonuses["bodydev_skill_prof_bonus"] = 2;
            bonuses["basespell_skill_prof_bonus"] = 0;
            bonuses["martialarts_skill_prof_bonus"] = 3;
            bonuses["movingmaneuver_profession_development"] = 0;
            bonuses["weapon_profession_development"] = 1;
            bonuses["general_profession_development"] = 1;
            bonuses["subterfuge_profession_development"] = 2;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 3;
            bonuses["language_profession_development"] = 0;
            bonuses["spell_profession_development"] = 0;
            bonuses["martialarts_profession_development"] = 5;
            bonuses["adrenaldefense_profession_development"] = 3;
            break;
        case "scholar":
            bonuses["weapon_skill_prof_bonus"] = 0;
            bonuses["general_skill_prof_bonus"] = 0;
            bonuses["subterfuge_skill_prof_bonus"] = 0;
            bonuses["stalkhide_skill_prof_bonus"] = 0;
            bonuses["magical_skill_prof_bonus"] = 0;
            bonuses["directedspell_skill_prof_bonus"] = 0;
            bonuses["perception_skill_prof_bonus"] = 2;
            bonuses["basespell_skill_prof_bonus"] = 0;
            bonuses["movingmaneuver_profession_development"] = 1;
            bonuses["weapon_profession_development"] = 1;
            bonuses["general_profession_development"] = 3;
            bonuses["subterfuge_profession_development"] = 0;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 4;
            bonuses["spell_profession_development"] = 0;
            bonuses["secondary_profession_development"] = 5;
            break;
        case "acrobat":
        case "actor":
        case "artist":
        case "blacksmith":
        case "bureaucrat":
        case "carpenter":
        case "farmer":
        case "fisherman":
        case "herder":
        case "merchant":
            bonuses["movingmaneuver_profession_development"] = 0;
            bonuses["weapon_profession_development"] = 1;
            bonuses["general_profession_development"] = 2;
            bonuses["subterfuge_profession_development"] = 0;
            bonuses["magical_profession_development"] = 0;
            bonuses["bodydev_profession_development"] = 1;
            bonuses["language_profession_development"] = 0;
            bonuses["spell_profession_development"] = 0;
            bonuses["secondary_profession_development"] = 11;
            break;
        default:
            break;
    }
    return bonuses;
}

/* EQUIPMENT Worker */
on('clicked:recalculate sheet:opened change:repeating_equipment remove:repeating_equipment', function(){
    TAS.log("Calculating weight")

    TAS.repeating('equipment')
    .attrs('item_total_weight','item_total_encumbrance')
    .fields('item_weight','item_worn', 'item_dropped')
    .reduce(function(m,r){
        var w = 0
        if (r.item_worn != "on" && r.item_dropped != "on") {
            m.enc+=(r.F.item_weight);
        }
        if (r.item_dropped != "on") {
            m.weight+=(r.F.item_weight);
        }
        return m;
    },{weight:0, enc:0},function(m,r,a){
        a.D[1].item_total_weight=m.weight;
        a.D[1].item_total_encumbrance=m.enc;
    })
    .execute();
});

/* WEAPONS Worker */
on("change:repeating_weapons:weapon_template", function() {
   getAttrs([
      "repeating_weapons_weapon_template"
    ], function(values) {
        let weapon = values["repeating_weapons_weapon_template"] || "";

        let bonuses = weaponBonuses(weapon);
                    
        setAttrs({
            repeating_weapons_weapon_fumble: bonuses["weapon_fumble"] || 0, 
            repeating_weapons_weapon_fumble_critical: bonuses["weapon_fumble_critical"] || "", 
            repeating_weapons_weapon_primary_critical: bonuses["weapon_primary_critical"] || "" , 
            repeating_weapons_weapon_secondary_critical: bonuses["weapon_secondary_critical"] || "", 
            repeating_weapons_weapon_range: bonuses["weapon_range"] || 0, 
            repeating_weapons_weapon_reload_rounds: bonuses["weapon_reload_rounds"] || 0, 
            repeating_weapons_weapon_reload_penalty: bonuses["weapon_reload_penalty"] || 0, 
            repeating_weapons_weapon_weight: bonuses["weapon_weight"] || 0, 
            repeating_weapons_weapon_noleather_bonus: bonuses["weapon_noleather_bonus"] || 0, 
            repeating_weapons_weapon_chainplate_bonus: bonuses["weapon_chainplate_bonus"] || 0,
            repeating_weapons_weapon_melee_skill: bonuses["weapon_melee_skill"] || 0, 
            repeating_weapons_weapon_ranged_skill: bonuses["weapon_ranged_skill"] || 0,
            repeating_weapons_weapon_special: bonuses["weapon_special"] || ""
        });
   });
});

function weaponBonuses(weapon) {
    var bonuses = {};


    switch(weapon) {

        case "Broad Sword":
            bonuses["weapon_fumble"] = 3;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] =  0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 4;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 0;
            bonuses["weapon_melee_skill"] = "1H Edged";
            break;
        case "Dagger":
            bonuses["weapon_fumble"] = 1;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Puncture (C)";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 15;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 1;
            bonuses["weapon_noleather_bonus"] = -15;
            bonuses["weapon_chainplate_bonus"] = -15;
            bonuses["weapon_melee_skill"] = "1H Edged";
            bonuses["weapon_ranged_skill"] = "Thrown";
            break;
        case "Handaxe":
            bonuses["weapon_fumble"] = 4;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 15;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 5;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 5;
            bonuses["weapon_melee_skill"] = "1H Edged";
            bonuses["weapon_ranged_skill"] = "Thrown";
            break;
        case "Scimitar":
            bonuses["weapon_fumble"] = 4;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 4;
            bonuses["weapon_noleather_bonus"] = 5;
            bonuses["weapon_chainplate_bonus"] = -5;
            bonuses["weapon_melee_skill"] = "1H Edged";
            break;
        case "Short Sword":
            bonuses["weapon_fumble"] = 2;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 3;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 3;
            bonuses["weapon_noleather_bonus"] = 10;
            bonuses["weapon_chainplate_bonus"] = -10;
            bonuses["weapon_melee_skill"] = "1H Edged";
            bonuses["weapon_ranged_skill"] = "Thrown";
            break;
        case "Club":
            bonuses["weapon_fumble"] = 4;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Crush (D)";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 2;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 5;
            bonuses["weapon_noleather_bonus"] = -10;
            bonuses["weapon_chainplate_bonus"] = -10;
            bonuses["weapon_melee_skill"] = "1H Concussion";
            bonuses["weapon_ranged_skill"] = "Thrown";
            break;
        case "Mace":
            bonuses["weapon_fumble"] = 2;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Crush";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 5;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 5;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 0;
            bonuses["weapon_melee_skill"] = "1H Concussion";
            bonuses["weapon_ranged_skill"] = "Thrown";
            break;
        case "Morning Star":
            bonuses["weapon_fumble"] = 8;
            bonuses["weapon_fumble_critical"] = "Crush (B)";
            bonuses["weapon_primary_critical"] = "Crush";
            bonuses["weapon_secondary_critical"] = "Puncture (A)";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 5;
            bonuses["weapon_noleather_bonus"] = 10;
            bonuses["weapon_chainplate_bonus"] = 10;
            bonuses["weapon_melee_skill"] = "1H Concussion";
            break;
        case "Net":
            bonuses["weapon_fumble"] = 6;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Grapple";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 10;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 3;
            bonuses["weapon_noleather_bonus"] = -10;
            bonuses["weapon_chainplate_bonus"] = 15;
            bonuses["weapon_melee_skill"] = "1H Concussion";
            bonuses["weapon_ranged_skill"] = "Thrown";
            break;
        case "War Hammer":
            bonuses["weapon_fumble"] = 4;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Crush";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 10;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 5;
            bonuses["weapon_noleather_bonus"] = 5;
            bonuses["weapon_chainplate_bonus"] = 5;
            bonuses["weapon_melee_skill"] = "1H Concussion";
            bonuses["weapon_ranged_skill"] = "Thrown";
            break;
        case "Whip":
            bonuses["weapon_fumble"] = 6;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Grapple (C)";
            bonuses["weapon_secondary_critical"] = "Slash (A)";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 3;
            bonuses["weapon_noleather_bonus"] = -10;
            bonuses["weapon_chainplate_bonus"] = -10;
            bonuses["weapon_melee_skill"] = "1H Concussion";
            bonuses["weapon_special"] = "Can use from 2nd line";
            break;
        case "Javelin":
            bonuses["weapon_fumble"] = 4;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Puncture";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 30;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 4;
            bonuses["weapon_noleather_bonus"] = -10;
            bonuses["weapon_chainplate_bonus"] = -10;
            bonuses["weapon_melee_skill"] = "Polearm";
            bonuses["weapon_ranged_skill"] = "Thrown";
            bonuses["weapon_special"] = "Can use from 2nd line";
            break;
        case "Spear":
            bonuses["weapon_fumble"] = 5;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Puncture";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 20;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 5;
            bonuses["weapon_noleather_bonus"] = -5;
            bonuses["weapon_chainplate_bonus"] = -5;
            bonuses["weapon_melee_skill"] = "Polearm";
            bonuses["weapon_ranged_skill"] = "Thrown";
            bonuses["weapon_special"] = "Can use from 2nd line";
            break;
        case "Mounted Lance":
            bonuses["weapon_fumble"] = 7;
            bonuses["weapon_fumble_critical"] = "Unbalance (B)";
            bonuses["weapon_primary_critical"] = "Puncture";
            bonuses["weapon_secondary_critical"] = "Unbalance";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 10;
            bonuses["weapon_noleather_bonus"] = +15;
            bonuses["weapon_chainplate_bonus"] = +15;
            bonuses["weapon_melee_skill"] = "Polearm";
            break;
        case "Halbard":
            bonuses["weapon_fumble"] = 7;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "Puncture";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 7;
            bonuses["weapon_noleather_bonus"] = -5;
            bonuses["weapon_chainplate_bonus"] = -5;
            bonuses["weapon_melee_skill"] = "Polearm";
            break;
        case "Battle Axe":
            bonuses["weapon_fumble"] = 5;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "Crush";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 7;
            bonuses["weapon_noleather_bonus"] = -5;
            bonuses["weapon_chainplate_bonus"] = 5;
            bonuses["weapon_melee_skill"] = "2 Handed";
            break;
        case "Flail":
            bonuses["weapon_fumble"] = 8;
            bonuses["weapon_fumble_critical"] = "Crush (C)";
            bonuses["weapon_primary_critical"] = "Crush";
            bonuses["weapon_secondary_critical"] = "Puncture";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 6;
            bonuses["weapon_noleather_bonus"] = 10;
            bonuses["weapon_chainplate_bonus"] = 10;
            bonuses["weapon_melee_skill"] = "2 Handed";
            break;
        case "Quarterstaff":
            bonuses["weapon_fumble"] = 5;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Crush";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 4;
            bonuses["weapon_noleather_bonus"] = -10;
            bonuses["weapon_chainplate_bonus"] = -10;
            bonuses["weapon_melee_skill"] = "2 Handed";
            break;
        case "Great Sword":
            bonuses["weapon_fumble"] = 5;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "Crush";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 8;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 0;
            bonuses["weapon_melee_skill"] = "2 Handed";
            break;
        case "Bastard Sword (1H)":
            bonuses["weapon_fumble"] = 4;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 6;
            bonuses["weapon_noleather_bonus"] = -5;
            bonuses["weapon_chainplate_bonus"] = -5;
            bonuses["weapon_melee_skill"] = "1H Edged";
            break;
        case "Bastard Sword (2H)":
            bonuses["weapon_fumble"] = 5;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "Crush (B)";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 6;
            bonuses["weapon_noleather_bonus"] = -5;
            bonuses["weapon_chainplate_bonus"] = -5;
            bonuses["weapon_melee_skill"] = "2 Handed";
            break;
        case "Double Axe (1H)":
            bonuses["weapon_fumble"] = 5;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 9;
            bonuses["weapon_noleather_bonus"] = -5;
            bonuses["weapon_chainplate_bonus"] = 5;
            bonuses["weapon_melee_skill"] = "1H Edged";
            break;
        case "Double Axe (2H)":
            bonuses["weapon_fumble"] = 6;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Slash";
            bonuses["weapon_secondary_critical"] = " Crush (B)";
            bonuses["weapon_range"] = 0;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 9;
            bonuses["weapon_noleather_bonus"] = -5;
            bonuses["weapon_chainplate_bonus"] = 5;
            bonuses["weapon_melee_skill"] = "2 Handed";
            break;
        case "Bola":
            bonuses["weapon_fumble"] = 7;
            bonuses["weapon_fumble_critical"] = "Grapple (B)";
            bonuses["weapon_primary_critical"] = "Grapple";
            bonuses["weapon_secondary_critical"] = "Crush (A)";
            bonuses["weapon_range"] = 40;
            bonuses["weapon_reload_rounds"] = 0;
            bonuses["weapon_reload_penalty"] = 0;
            bonuses["weapon_weight"] = 3;
            bonuses["weapon_noleather_bonus"] = -5;
            bonuses["weapon_chainplate_bonus"] = -5;
            bonuses["weapon_ranged_skill"] = "Missile";
            break;
        case "Composite Bow":
            bonuses["weapon_fumble"] = 4;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Puncture";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 75;
            bonuses["weapon_reload_rounds"] = 1;
            bonuses["weapon_reload_penalty"] = -25;
            bonuses["weapon_weight"] = 3;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 0;
            bonuses["weapon_ranged_skill"] = "Missile";
            break;
        case "Crossbow":
            bonuses["weapon_fumble"] = 5;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Puncture";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 90;
            bonuses["weapon_reload_rounds"] = 2;
            bonuses["weapon_reload_penalty"] = -100;
            bonuses["weapon_weight"] = 8;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 0;
            bonuses["weapon_skill_bonus_type"] = "missile";
            bonuses["weapon_ranged_skill"] = "Missile";
            bonuses["weapon_special"] = "+20 OB up to 50'";
            break;
        case "Long Bow":
            bonuses["weapon_fumble"] = 5;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Puncture";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 100;
            bonuses["weapon_reload_rounds"] = 1;
            bonuses["weapon_reload_penalty"] = -35;
            bonuses["weapon_weight"] = 3;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 0;
            bonuses["weapon_skill_bonus_type"] = "missile";
            bonuses["weapon_ranged_skill"] = "Missile";
            break;
        case "Short Bow":
            bonuses["weapon_fumble"] = 4;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Puncture";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 60;
            bonuses["weapon_reload_rounds"] = 1;
            bonuses["weapon_reload_penalty"] = -10;
            bonuses["weapon_weight"] = 3;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 0;
            bonuses["weapon_skill_bonus_type"] = "missile";
            bonuses["weapon_ranged_skill"] = "Missile";
            break;
        case "Sling":
            bonuses["weapon_fumble"] = 6;
            bonuses["weapon_fumble_critical"] = "";
            bonuses["weapon_primary_critical"] = "Crush (D)";
            bonuses["weapon_secondary_critical"] = "";
            bonuses["weapon_range"] = 50;
            bonuses["weapon_reload_rounds"] = 1;
            bonuses["weapon_reload_penalty"] = -100;
            bonuses["weapon_weight"] = 0.5;
            bonuses["weapon_noleather_bonus"] = 0;
            bonuses["weapon_chainplate_bonus"] = 0;
            bonuses["weapon_skill_bonus_type"] = "missile";
            bonuses["weapon_ranged_skill"] = "Missile";
            bonuses["weapon_special"] = "Can use with shield";
            break;
        default:
            break;
    }
    return bonuses;
}


on("change:repeating_weapons:weapon_melee_skill", function() {
   getAttrs([
      "repeating_weapons_weapon_melee_skill",
      "skill_1hedged_total_bonus",
      "skill_1hconc_total_bonus",
      "skill_2handed_total_bonus",
      "skill_polearm_total_bonus"
    ], function(values) {
        let skill = values["repeating_weapons_weapon_melee_skill"] || "";
        let ohe = values["skill_1hedged_total_bonus"] || "";
        let ohc = values["skill_1hconc_total_bonus"] || "";
        let twoh = values["skill_2handed_total_bonus"] || "";
        let pole = values["skill_polearm_total_bonus"] || "";
        let bonus = 0;

        switch(skill) {
            case "1H Edged":
                bonus = ohe;
                break;
            case "1H Concussion":
                bonus = ohc;
                break;
            case "2 Handed":
                bonus = twoh;
                break;
            case "Polearm":
                bonus = pole;
                break;
            default:
                break;
        }
                    
        setAttrs({
            repeating_weapons_weapon_melee_bonus: bonus
        });
   });
});

on("change:skill_1hedged_total_bonus change:skill_1hconc_total_bonus change:skill_2handed_total_bonus change:skill_polearm_total_bonus change:skill_thrown_total_bonus change:skill_missile_total_bonus", function() {
   getAttrs([
      "skill_1hedged_total_bonus",
      "skill_1hconc_total_bonus",
      "skill_2handed_total_bonus",
      "skill_polearm_total_bonus"
    ], function(values) {
        getSectionIDs("weapons", function (idarray) {
            var fieldnames=[];
            idarray.forEach(id => {
                fieldnames.push("repeating_weapons_" + id + "_weapon_melee_skill");
                fieldnames.push("repeating_weapons_" + id + "_weapon_ranged_skill");
            });
            getAttrs(fieldnames, function(fieldvalues) {
                idarray.forEach(id => {
                    setWeaponBonus(id, fieldvalues["repeating_weapons_" + id + "_weapon_melee_skill"], fieldvalues["repeating_weapons_" + id + "_weapon_ranged_skill"])
                });
            });

        });
    });
});

function setWeaponBonus(id, melee_skill, ranged_skill) {
    getAttrs(["skill_1hedged_total_bonus","skill_1hconc_total_bonus","skill_2handed_total_bonus","skill_polearm_total_bonus","skill_thrown_total_bonus","skill_missile_total_bonus"], function(values) {
        let mbonus = 0;
        let rbonus = 0;
        console.log(melee_skill);
        switch(melee_skill) {
            case "1H Edged":
                mbonus = values["skill_1hedged_total_bonus"] || 0;
                break;
            case "1H Concussion":
                mbonus = values["skill_1hconc_total_bonus"] || 0;
                break;
            case "2 Handed":
                mbonus = values["skill_2handed_total_bonus"] || 0;
                break;
            case "Polearm":
                mbonus = values["skill_polearm_total_bonus"] || 0;
                break;
            default:
                break;
        }
        console.log(ranged_skill);
        switch(ranged_skill) {
            case "Thrown":
                rbonus = values["skill_thrown_total_bonus"] || 0;
                break;
            case "Missile":
                rbonus = values["skill_missile_total_bonus"] || 0;
                break;
            default:
                break;
        }
        var attrs = {};
        attrs["repeating_weapons_" + id + "_weapon_melee_bonus"] = mbonus;
        attrs["repeating_weapons_" + id + "_weapon_ranged_bonus"] = rbonus;
        console.log(attrs);
        setAttrs(attrs);
    });
}

on("change:repeating_weapons:weapon_ranged_skill", function() {
   getAttrs([
      "repeating_weapons_weapon_ranged_skill",
      "skill_thrown_total_bonus",
      "skill_missile_total_bonus"
    ], function(values) {
        let skill = values["repeating_weapons_weapon_ranged_skill"] || "";
        let thrown = values["skill_thrown_total_bonus"] || "";
        let missile = values["skill_missile_total_bonus"] || "";
        let bonus = 0;

        switch(skill) {
            case "Thrown":
                bonus = thrown;
                break;
            case "Missile":
                bonus = missile;
                break;
            default:
                break;
        }
                    
        setAttrs({
            repeating_weapons_weapon_ranged_bonus: bonus
        });
   });
});


on("change:stat_character_power", function() {
    getAttrs(["stat_character_power"], values => {
        let power = values["stat_character_power"] || "";
        let pointpool = 0;
        let minvalue = 20;
        let maxrolls = 7;
        
        switch(power) {
            case "peasant":
                pointpool = 300;
                minvalue = 10;
                maxrolls = 6;
                break;
            case "civilian":
                pointpool = 360;
                minvalue = 20;
                maxrolls = 6;
                break;
            case "standard": 
                pointpool = 420;
                minvalue = 20;
                maxrolls = 6;
                break;
            case "hero": 
                pointpool = 480;
                minvalue = 40;
                maxrolls = 8;
                break;
            case "superhero": 
                pointpool = 540;
                minvalue = 50;
                maxrolls = 10;
                break;
            default:
                break;
        }

        setAttrs({
            stat_point_pool: pointpool,
            stat_roll_min_value: minvalue,
            stat_roll_max_rolls: maxrolls,
        });
    });
});

on("change:stat_st_value change:stat_ag_value change:stat_co_value change:stat_ig_value change:stat_it_value change:stat_pr_value change:stat_point_pool", function() {
    getAttrs(["stat_st_value","stat_ag_value","stat_co_value","stat_ig_value","stat_it_value","stat_pr_value","stat_point_pool"], values => {
        let pointpool = parseInt(values["stat_point_pool"],10) || 0;
        let st = parseInt(values["stat_st_value"],10) || 0;
        let ag = parseInt(values["stat_ag_value"],10) || 0;
        let co = parseInt(values["stat_co_value"],10) || 0;
        let ig = parseInt(values["stat_ig_value"],10) || 0;
        let it = parseInt(values["stat_it_value"],10) || 0;
        let pr = parseInt(values["stat_pr_value"],10) || 0;

        let usedpoints = pointTotal(st) + pointTotal(ag) + pointTotal(co) + pointTotal(ig) + pointTotal(it) + pointTotal(pr);
        
        setAttrs({
            stat_point_pool_remaining: (pointpool - usedpoints)
        });
    });
});

function pointTotal(statvalue) {
    let i = 0;

    if (statvalue<91) {
        return statvalue;
    }
    if (statvalue==91) {
        return 92;
    }
    if (statvalue==92) {
        return 94;
    }
    if (statvalue==93) {
        return 99;
    }
    if (statvalue==94) {
        return 106;
    }
    if (statvalue==95) {
        return 115;
    }
    if (statvalue==96) {
        return 126;
    }
    if (statvalue==97) {
        return 139;
    }
    if (statvalue==98) {
        return 154;
    }
    if (statvalue==99) {
        return 171;
    }
    if (statvalue==100) {
        return 190;
    }
    return 200;
}

on("clicked:randomize_npc_stats", () => {
    getAttrs(["npc_low_roll","npc_total_rolls"], values => {
        setAttrs({
            stat_st_value: getRandom(20, 100),
            stat_ag_value: getRandom(20, 100),
            stat_co_value: getRandom(20, 100),
            stat_ig_value: getRandom(20, 100),
            stat_it_value: getRandom(20, 100),
            stat_pr_value: getRandom(20, 100),
            stat_ap_value: getRandom(20, 100)
        });
    });
});

function getRandom(min, max) {
    let num = Math.floor((max+1)*Math.random());
    return (num < min) ? getRandom(min, max) : num;
}

on("clicked:adjustments_reset", () => {
    setAttrs({
        weapon_Parry: 0,
        weapon_position: 0,
        weapon_surprise: 0,
        weapon_stunned: 0,
        weapon_change: 0,
        weapon_movement: 0,
        weapon_range_actual: 0,
        weapon_not_loaded: 0
    });
});

</script>

<div class="hidden">

    <rolltemplate class="sheet-rolltemplate-openended">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            {{#rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">Additional underflow:</div>
                    <div class="sheet-rolltemplate-total">
                    {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() roll}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-1d100">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-resistanceroll">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            <div class="sheet-rolltemplate-modifiers">
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Bonus:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{bonus}}
                    </div>
                </div>
            </div>
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-spelllistlearn">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair">
                <div class="sheet-rolltemplate-label rolltemplate-roll">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            <div class="sheet-rolltemplate-modifiers">
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Chance:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{chance}}
                    </div>
                </div>
            </div>
            {{#rollBetween() roll 0 chance}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-success">Spell list was learned!</div>
            </div>
            {{/rollBetween() roll 0 chance}}
            {{#rollGreater() roll chance}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">Spell list was not learned!</div>
            </div>
            {{/rollGreater() roll chance}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-successcheck">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair">
                <div class="sheet-rolltemplate-label rolltemplate-roll">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            <div class="sheet-rolltemplate-modifiers">
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Chance:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{chance}}
                    </div>
                </div>
            </div>
            {{#rollBetween() roll 0 chance}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-success">Success!</div>
            </div>
            {{/rollBetween() roll 0 chance}}
            {{#rollGreater() roll chance}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">Failure!</div>
            </div>
            {{/rollGreater() roll chance}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-spellcast">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{name}}</div>
                <div class="sheet-rolltemplate-subheading">{{action}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            <div class="grid-label-value-pair">
                <div class="sheet-rolltemplate-modifier-label">
                   Level:
                </div>
                <div class="sheet-rolltemplate-total">
                   {{level}}
                </div>
            </div>
            <div class="grid-label-value-pair">
                <div class="sheet-rolltemplate-modifier-label">
                   Area:
                </div>
                <div class="sheet-rolltemplate-total">
                   {{area}}
                </div>
            </div>
            <div class="grid-label-value-pair">
                <div class="sheet-rolltemplate-modifier-label">
                   Duration:
                </div>
                <div class="sheet-rolltemplate-total">
                   {{duration}}
                </div>
            </div>
            <div class="grid-label-value-pair">
                <div class="sheet-rolltemplate-modifier-label">
                   Range:
                </div>
                <div class="sheet-rolltemplate-total">
                   {{range}}
                </div>
            </div>
            <div class="grid-label-value-pair">
                <div class="sheet-rolltemplate-modifier-label">
                   Instant:
                </div>
                <div class="sheet-rolltemplate-total">
                   {{instant}}
                </div>
            </div>
            <div class="sheet-rolltemplate-modifier-description">{{description}}</div>
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-movingmaneuver">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            {{#rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Additional underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() roll}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-staticmaneuver">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>

            {{#rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() roll}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-attack">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>

            {{#rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Add'l Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-heading">Criticals</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Primary Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{primary_critical}}
                    </div>
                </div>
                {{#secondary_critical_type}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Secondary Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{secondary_critical}} {{secondary_critical_type}}
                    </div>
                </div>
                {{/secondary_critical_type}}
            </div>
            {{#rollGreater() parry 0}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Parry Reserved:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{parry}}
                    </div>
                </div>
            </div>
            {{/rollGreater() parry 0}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-spellattack">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>

            {{#rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Add'l Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-heading">Criticals</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Primary Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{primary_critical}}
                    </div>
                </div>
                {{#secondary_critical_type}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Secondary Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{secondary_critical}} {{secondary_critical_type}}
                    </div>
                </div>
                {{/secondary_critical_type}}
            </div>
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-meleeattack">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            {{#rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!!!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble Roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_crit}}
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-fumble">
                        <div>The roll may have exploded into negative range.</div>
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-heading">Criticals</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Primary Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{primary_critical}}
                    </div>
                </div>
                {{#secondary_critical_type}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Secondary Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{secondary_critical}} {{secondary_critical_type}}
                    </div>
                </div>
                {{/secondary_critical_type}}
            </div>
            {{#rollGreater() parry 0}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Parry Reserved:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{parry}}
                    </div>
                </div>
            </div>
            {{/rollGreater() parry 0}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-heading">Armor Bonuses</div>
                {{#rollGreater() noleather 0}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       No Armor / Leather:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{noleather}}
                    </div>
                </div>
                {{/rollGreater() noleather 0}}
                {{#rollLess() noleather 0}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       No Armor / Leather:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{noleather}}
                    </div>
                </div>
                {{/rollLess() noleather 0}}
                {{#rollGreater() chainplate 0}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Chain/Plate:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{chainplate}}
                    </div>
                </div>
                {{/rollGreater() chainplate 0}}
                {{#rollLess() chainplate 0}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Chain/Plate:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{chainplate}}
                    </div>
                </div>
                {{/rollLess() chainplate 0}}
            </div>
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-rangedattack">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>

            {{#rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!!!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble Roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_crit}}
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-fumble">
                        <div>The roll may have exploded into negative range.</div>
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-heading">Criticals</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Primary Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{primary_critical}}
                    </div>
                </div>
                {{#secondary_critical_type}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Secondary Critical:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{secondary_critical}} {{secondary_critical_type}}
                    </div>
                </div>
                {{/secondary_critical_type}}
            </div>
            {{#rollGreater() parry 0}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Parry Reserved:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{parry}}
                    </div>
                </div>
            </div>
            {{/rollGreater() parry 0}}
            <div class="sheet-rolltemplate-modifiers">
                {{#range_special}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       {{range_special}}
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{range_special_value}}
                    </div>
                </div>
                {{/range_special}}
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Range:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{range}}
                    </div>
                </div>
            </div>
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-stalkhide">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">Stalking</div>
                <div class="sheet-rolltemplate-subheading">Moving Maneuver</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{mm_roll}}
                </div>
            </div>
            {{#rollWasFumble() mm_roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() mm_roll}}
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">Hiding</div>
                <div class="sheet-rolltemplate-subheading">Static Maneuver</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{sm_roll}}
                </div>
            </div>
            {{#rollWasFumble() sm_roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() sm_roll}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-secondaryskill">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            {{#movingmaneuver}}
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">Moving Maneuver</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{mm_roll}}
                </div>
            </div>
            {{#rollWasFumble() mm_roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() mm_roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       MM Penalty:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{mm_penalty}}
                    </div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Skill:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{skill}}
                    </div>
                </div>
            </div>
            {{/movingmaneuver}}
            {{#staticmaneuver}}
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">Static Maneuver</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{sm_roll}}
                </div>
            </div>
            {{#rollWasFumble() sm_roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                        <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() sm_roll}}
            {{/staticmaneuver}}
            {{#special}}
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">Special</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{mm_roll}}
                </div>
            </div>
            {{#rollWasFumble() mm_roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() mm_roll}}
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">Static Maneuver</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{sm_roll}}
                </div>
            </div>
            {{#rollWasFumble() sm_roll}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier-fumble">
                   <div>FUMBLE!</div>
                </div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                       Fumble roll:
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{fumble_roll}}
                    </div>
                </div>
                <div class="sheet-rolltemplate-modifier-fumble">The roll exploded into negative range.</div>
                <div class="grid-label-value-pair">
                    <div class="sheet-rolltemplate-modifier-label">
                        <div title="Subtract this from the above roll">Additional Underflow:</div>
                    </div>
                    <div class="sheet-rolltemplate-total">
                       {{underflow}}
                    </div>
                </div>
            </div>
            {{/rollWasFumble() sm_roll}}
            {{/special}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-handarmsfumble">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            {{#rollBetween() roll -49 5}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You lose your grip.  No further action this round.</div>
            </div>
            {{/rollBetween() roll -49 5}}
            {{#rollBetween() roll 6 20}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You slip.  If your weapon is 1-handed and non-magical, it breaks.</div>
            </div>
            {{/rollBetween() roll 6 20}}
            {{#rollBetween() roll 21 35}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Bad follow-through.  You lost your opporutunity, give yourself 2 hits.</div>
            </div>
            {{/rollBetween() roll 21 35}}
            {{#rollBetween() roll 36 50}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Drop your weapon.  It will take 1 round to draw a new one or 2 rounds to recover the old one.</div>
            </div>
            {{/rollBetween() roll 36 50}}
            {{#rollBetween() roll 51 65}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You lose your "wind" and realize you should relax.  -40 to activity for 2 rounds.</div>
            </div>
            {{/rollBetween() roll 51 65}}
            {{#rollBetween() roll 66 79}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You stumble.  The classless display leaves you stunned for 2 rounds.  With luck, you might still survive.</div>
            </div>
            {{/rollBetween() roll 66 79}}
            {{#rollBetween() roll 80 80}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Incredibly inept move.  Roll a B crush crit on yourself.  If your opponent is using a slashing weapon, your weapon is broken.</div>
            </div>
            {{/rollBetween() roll 80 80}}
            {{#rollBetween() roll 81 86}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Bite and swallow your tongue in the excitement.  Stunned for 2 rounds.</div>
            </div>
            {{/rollBetween() roll 81 86}}
            {{#rollBetween() roll 87 89}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Lose your grip on your weapon and reality.  Stunned for 3 rounds.</div>
            </div>
            {{/rollBetween() roll 87 89}}
            {{#rollBetween() roll 90 90}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Bad taste and poor execution.  You attempt to main yourself as your weapon breaks.  Roll a C slah crit on yourself.</div>
            </div>
            {{/rollBetween() roll 90 90}}
            {{#rollBetween() roll 91 96}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Unbelievable mishandling of your weapon.  Any friendly combatant in your vicinity takes a B crush critical.</div>
            </div>
            {{/rollBetween() roll 91 96}}
            {{#rollBetween() roll 97 99}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Stumble over and unseen imaginary deceased turtle.  You are confused. Stunned for 3 rounds.</div>
            </div>
            {{/rollBetween() roll 97 99}}
            {{#rollBetween() roll 100 100}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Worst move seen in ages.  -60 to activity from a pulled groin.  Foe is stunned 2 rounds laughing.</div>
            </div>
            {{/rollBetween() roll 100 100}}
            {{#rollBetween() roll 101 106}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You stagger and fall in an apparent suicide attempt.  Stunned 3 rounds.  If using a pole arem, it's shaft is shattered.</div>
            </div>
            {{/rollBetween() roll 101 106}}
            {{#rollBetween() roll 107 109}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You break your weapon through ineptness.  Stunned 4 rounds.</div>
            </div>
            {{/rollBetween() roll 107 109}}
            {{#rollBetween() roll 110 110}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You stumble and drive the point of your weapon into the ground.  Stunned 5 rounds.  If mounted, you pole vault 30 feet and take a C crush crit from the landing.</div>
            </div>
            {{/rollBetween() roll 110 110}}
            {{#rollBetween() roll 111 116}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Your mount rears suddenly.  Stunned 3 rounds recovering.</div>
            </div>
            {{/rollBetween() roll 111 116}}
            {{#rollBetween() roll 117 119}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You do not coordinate your movement with your mount's.  -90 to activity for the next 3 rounds trying to stay mounted.</div>
            </div>
            {{/rollBetween() roll 117 119}}
            {{#rollBetween() roll 120 120}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You fall off your mount.  Roll a D crush crit on yourself.</div>
            </div>
            {{/rollBetween() roll 120 120}}
            <div class="sheet-rolltemplate-modifiers">
        </div>
    </rolltemplate>


    <rolltemplate class="sheet-rolltemplate-missilefumble">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            {{#rollBetween() roll -49 5}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You lose your grip.  No further action this round.</div>
            </div>
            {{/rollBetween() roll -49 5}}
            {{#rollBetween() roll 6 20}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">One's ten thumbs cannot handle loading.  Lose this round.</div>
            </div>
            {{/rollBetween() roll 6 20}}
            <div class="sheet-rolltemplate-modifiers">
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-spellfumble">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            {{#rollBetween() roll -49 5}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Lose concentration due to strain.  Spell lost, but not power points.</div>
            </div>
            {{/rollBetween() roll -49 5}}
            {{#rollBetween() roll 6 20}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">Second thoughts.  No spell may be cast or prepared this round.</div>
            </div>
            {{/rollBetween() roll 6 20}}
            <div class="sheet-rolltemplate-modifiers">
        </div>
    </rolltemplate>


    <rolltemplate class="sheet-rolltemplate-movingmaneuverfumble">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{type}}</div>
                <div class="sheet-rolltemplate-subheading">{{subtags}}</div>
            </div>
            <div class="grid-label-value-pair rolltemplate-roll">
                <div class="sheet-rolltemplate-label">
                    Roll:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{roll}}
                </div>
            </div>
            {{#rollBetween() roll -49 5}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You hesistate and fail to act.</div>
            </div>
            {{/rollBetween() roll -49 5}}
            {{#rollBetween() roll 6 20}}
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">You have second thoughts and decide to wait one round.</div>
            </div>
            {{/rollBetween() roll 6 20}}
            <div class="sheet-rolltemplate-modifiers">
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-journal">
        <div class="sheet-rolltemplate-character">{{character}}</div>
        <div class="sheet-rolltemplate-container">
            <div class="sheet-rolltemplate-header">
                <div class="sheet-rolltemplate-heading">{{title}}</div>
                <div class="sheet-rolltemplate-subheading">{{date}}</div>
            </div>
            <div class="grid-label-value-pair">
                <div class="sheet-rolltemplate-label">
                    XP:
                </div>
                <div class="sheet-rolltemplate-total">
                    {{xp}}
                </div>
            </div>
            <div class="sheet-rolltemplate-modifiers">
                <div class="sheet-rolltemplate-modifier">{{note}}</div>
            </div>
        </div>
    </rolltemplate>
</div>
